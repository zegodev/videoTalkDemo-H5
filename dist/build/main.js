webpackJsonp([0],{150:function(e,t){function n(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=150},177:function(e,t){function n(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=177},201:function(e,t,n){"use strict";function l(e){return D._19(0,[(e()(),D.Z(0,0,null,null,2,"ion-nav",[],null,null,null,ke.b,ke.a)),D._15(6144,null,Le.a,null,[Me.a]),D.Y(2,4374528,null,0,Me.a,[[2,we.a],[2,Ue.a],ze.a,Oe.a,De.a,D.j,D.u,D.z,D.i,Ne.l,Ae.a,[2,xe.a],Ye.a,D.k],{root:[0,"root"]},null),(e()(),D._18(-1,null,["\n"]))],function(e,t){e(t,2,0,t.component.rootPage)},null)}function i(e){return D._19(0,[(e()(),D.Z(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),D.Y(1,16384,[[21,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit.deviceId)},function(e,t){e(t,2,0,t.context.$implicit.label)})}function r(e){return D._19(0,[(e()(),D.Z(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),D.Y(1,16384,[[28,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit.deviceId)},function(e,t){e(t,2,0,t.context.$implicit.label)})}function o(e){return D._19(0,[D._16(402653184,1,{navBar:0}),(e()(),D.Z(1,0,null,null,10,"ion-header",[],null,null,null,null,null)),D.Y(2,16384,null,0,qe.a,[Oe.a,D.j,D.z,[2,we.a]],null,null),(e()(),D._18(-1,null,["\n  "])),(e()(),D.Z(4,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,He.b,He.a)),D.Y(5,49152,[[1,4]],0,Be.a,[ze.a,[2,we.a],[2,Ue.a],Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,3,["\n    "])),(e()(),D.Z(7,0,null,3,2,"ion-title",[],null,null,null,Fe.b,Fe.a)),D.Y(8,49152,null,0,Ge.a,[Oe.a,D.j,D.z,[2,We.a],[2,Be.a]],null,null),(e()(),D._18(-1,0,["\n      设置\n    "])),(e()(),D._18(-1,3,["\n  "])),(e()(),D._18(-1,null,["\n"])),(e()(),D._18(-1,null,["\n\n"])),(e()(),D.Z(13,0,null,null,251,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Je.b,Je.a)),D.Y(14,4374528,null,0,Qe.a,[Oe.a,De.a,Ye.a,D.j,D.z,ze.a,Ke.a,D.u,[2,we.a],[2,Ue.a]],null,null),(e()(),D._18(-1,1,["\n  "])),(e()(),D.Z(16,0,null,1,247,"ion-list",[],null,null,null,null,null)),D.Y(17,16384,null,0,Xe.a,[Oe.a,D.j,D.z,De.a,Ne.l,Ye.a],null,null),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(19,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(20,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,2,{contentLabel:0}),D._16(603979776,3,{_buttons:1}),D._16(603979776,4,{_icons:1}),D.Y(24,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(26,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(27,16384,[[2,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["用户ID"])),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(30,0,null,3,1,"ion-input",[["readonly",""],["type","text"]],null,null,null,rt.b,rt.a)),D.Y(31,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{value:[0,"value"],type:[1,"type"],readonly:[2,"readonly"]},null),(e()(),D._18(-1,2,["\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(34,0,null,null,16,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(35,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,5,{contentLabel:0}),D._16(603979776,6,{_buttons:1}),D._16(603979776,7,{_icons:1}),D.Y(39,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(41,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(42,16384,[[5,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["用户名"])),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(45,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.nickName=n)&&l}return l},rt.b,rt.a)),D.Y(46,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(48,16384,null,0,st.g,[st.f],null,null),D.Y(49,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(56,0,null,null,43,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(57,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,8,{contentLabel:0}),D._16(603979776,9,{_buttons:1}),D._16(603979776,10,{_icons:1}),D.Y(61,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(63,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(64,16384,[[8,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["日志级别"])),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(67,0,null,3,31,"ion-select",[["cancelText","取消"],["multiple","false"],["okText","确定"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var l=!0,i=e.component;if("click"===t){l=!1!==D._13(e,68)._click(n)&&l}if("keyup.space"===t){l=!1!==D._13(e,68)._keyup()&&l}if("ngModelChange"===t){l=!1!==(i.logLevel=n)&&l}return l},at.b,at.a)),D.Y(68,1228800,null,1,ut.a,[ze.a,tt.a,Oe.a,D.j,D.z,[2,et.a],xe.a],{cancelText:[0,"cancelText"],okText:[1,"okText"],multiple:[2,"multiple"]},null),D._16(603979776,11,{options:1}),D._15(1024,null,st.e,function(e){return[e]},[ut.a]),D.Y(71,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(73,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(75,0,null,null,2,"ion-option",[["value","0"]],null,null,null,null,null)),D.Y(76,16384,[[11,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(-1,null,["debug"])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(79,0,null,null,2,"ion-option",[["selected","true"],["value","1"]],null,null,null,null,null)),D.Y(80,16384,[[11,4]],0,Ve.a,[D.j],{selected:[0,"selected"],value:[1,"value"]},null),(e()(),D._18(-1,null,["info"])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(83,0,null,null,2,"ion-option",[["value","2"]],null,null,null,null,null)),D.Y(84,16384,[[11,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(-1,null,["warn"])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(87,0,null,null,2,"ion-option",[["value","3"]],null,null,null,null,null)),D.Y(88,16384,[[11,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(-1,null,["error"])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(91,0,null,null,2,"ion-option",[["value","98"]],null,null,null,null,null)),D.Y(92,16384,[[11,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(-1,null,["report"])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(95,0,null,null,2,"ion-option",[["value","100"]],null,null,null,null,null)),D.Y(96,16384,[[11,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(-1,null,["disable"])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,2,["\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(109,0,null,null,17,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(110,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,12,{contentLabel:0}),D._16(603979776,13,{_buttons:1}),D._16(603979776,14,{_icons:1}),D.Y(114,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(116,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(117,16384,[[12,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["采集监听"])),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(120,0,null,4,5,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"]],function(e,t,n){var l=!0,i=e.component;if("keyup"===t){l=!1!==D._13(e,121)._keyup(n)&&l}if("ngModelChange"===t){l=!1!==(i.muted=n)&&l}return l},ct.b,ct.a)),D.Y(121,1228800,null,0,dt.a,[tt.a,Oe.a,De.a,D.j,D.z,ht.a,[2,et.a],Ne.l,Ye.a,D.u],null,null),D._15(1024,null,st.e,function(e){return[e]},[dt.a]),D.Y(123,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(125,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(128,0,null,null,17,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(129,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,15,{contentLabel:0}),D._16(603979776,16,{_buttons:1}),D._16(603979776,17,{_icons:1}),D.Y(133,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(135,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(136,16384,[[15,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["麦克风"])),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(139,0,null,4,5,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"]],function(e,t,n){var l=!0,i=e.component;if("keyup"===t){l=!1!==D._13(e,140)._keyup(n)&&l}if("ngModelChange"===t){l=!1!==(i.audio=n)&&l}return l},ct.b,ct.a)),D.Y(140,1228800,null,0,dt.a,[tt.a,Oe.a,De.a,D.j,D.z,ht.a,[2,et.a],Ne.l,Ye.a,D.u],null,null),D._15(1024,null,st.e,function(e){return[e]},[dt.a]),D.Y(142,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(144,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(147,0,null,null,22,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(148,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,18,{contentLabel:0}),D._16(603979776,19,{_buttons:1}),D._16(603979776,20,{_icons:1}),D.Y(152,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(154,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(155,16384,[[18,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["音频设备"])),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(158,0,null,3,10,"ion-select",[["cancelText","取消"],["multiple","false"],["okText","确定"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var l=!0,i=e.component;if("click"===t){l=!1!==D._13(e,159)._click(n)&&l}if("keyup.space"===t){l=!1!==D._13(e,159)._keyup()&&l}if("ngModelChange"===t){l=!1!==(i.audioInput=n)&&l}return l},at.b,at.a)),D.Y(159,1228800,null,1,ut.a,[ze.a,tt.a,Oe.a,D.j,D.z,[2,et.a],xe.a],{cancelText:[0,"cancelText"],okText:[1,"okText"],multiple:[2,"multiple"]},null),D._16(603979776,21,{options:1}),D._15(1024,null,st.e,function(e){return[e]},[ut.a]),D.Y(162,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(164,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.U(16777216,null,null,1,null,i)),D.Y(167,802816,null,0,pt.h,[D.I,D.F,D.p],{ngForOf:[0,"ngForOf"]},null),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,2,["\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(171,0,null,null,17,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(172,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,22,{contentLabel:0}),D._16(603979776,23,{_buttons:1}),D._16(603979776,24,{_icons:1}),D.Y(176,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(178,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(179,16384,[[22,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["摄像头"])),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(182,0,null,4,5,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"]],function(e,t,n){var l=!0,i=e.component;if("keyup"===t){l=!1!==D._13(e,183)._keyup(n)&&l}if("ngModelChange"===t){l=!1!==(i.video=n)&&l}return l},ct.b,ct.a)),D.Y(183,1228800,null,0,dt.a,[tt.a,Oe.a,De.a,D.j,D.z,ht.a,[2,et.a],Ne.l,Ye.a,D.u],null,null),D._15(1024,null,st.e,function(e){return[e]},[dt.a]),D.Y(185,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(187,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(190,0,null,null,22,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(191,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,25,{contentLabel:0}),D._16(603979776,26,{_buttons:1}),D._16(603979776,27,{_icons:1}),D.Y(195,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(197,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(198,16384,[[25,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["视频设备"])),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(201,0,null,3,10,"ion-select",[["cancelText","取消"],["multiple","false"],["okText","确定"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var l=!0,i=e.component;if("click"===t){l=!1!==D._13(e,202)._click(n)&&l}if("keyup.space"===t){l=!1!==D._13(e,202)._keyup()&&l}if("ngModelChange"===t){l=!1!==(i.videoInput=n)&&l}return l},at.b,at.a)),D.Y(202,1228800,null,1,ut.a,[ze.a,tt.a,Oe.a,D.j,D.z,[2,et.a],xe.a],{cancelText:[0,"cancelText"],okText:[1,"okText"],multiple:[2,"multiple"]},null),D._16(603979776,28,{options:1}),D._15(1024,null,st.e,function(e){return[e]},[ut.a]),D.Y(205,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(207,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.U(16777216,null,null,1,null,r)),D.Y(210,802816,null,0,pt.h,[D.I,D.F,D.p],{ngForOf:[0,"ngForOf"]},null),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,2,["\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(214,0,null,null,32,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(215,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,29,{contentLabel:0}),D._16(603979776,30,{_buttons:1}),D._16(603979776,31,{_icons:1}),D.Y(219,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(221,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(222,16384,[[29,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["视频质量"])),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(225,0,null,3,20,"ion-select",[["cancelText","取消"],["multiple","false"],["okText","确定"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var l=!0,i=e.component;if("click"===t){l=!1!==D._13(e,226)._click(n)&&l}if("keyup.space"===t){l=!1!==D._13(e,226)._keyup()&&l}if("ngModelChange"===t){l=!1!==(i.videoQuality=n)&&l}return l},at.b,at.a)),D.Y(226,1228800,null,1,ut.a,[ze.a,tt.a,Oe.a,D.j,D.z,[2,et.a],xe.a],{cancelText:[0,"cancelText"],okText:[1,"okText"],multiple:[2,"multiple"]},null),D._16(603979776,32,{options:1}),D._15(1024,null,st.e,function(e){return[e]},[ut.a]),D.Y(229,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(231,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(233,0,null,null,2,"ion-option",[["value","1"]],null,null,null,null,null)),D.Y(234,16384,[[32,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(-1,null,["标清"])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(237,0,null,null,2,"ion-option",[["value","2"]],null,null,null,null,null)),D.Y(238,16384,[[32,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(-1,null,["高清"])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(241,0,null,null,2,"ion-option",[["value","3"]],null,null,null,null,null)),D.Y(242,16384,[[32,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(-1,null,["超清"])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,2,["\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(252,0,null,null,10,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(253,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,33,{contentLabel:0}),D._16(603979776,34,{_buttons:1}),D._16(603979776,35,{_icons:1}),D.Y(257,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(259,0,null,2,2,"button",[["full",""],["ion-button",""],["large",""],["round",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.showConfirm()&&l}return l},gt.b,gt.a)),D.Y(260,1097728,[[34,4]],0,ft.a,[[8,""],Oe.a,D.j,D.z],{large:[0,"large"],round:[1,"round"],full:[2,"full"]},null),(e()(),D._18(-1,0,["确定"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D._18(-1,null,["\n  "])),(e()(),D._18(-1,1,["\n\n"])),(e()(),D._18(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,31,0,n.idName,"text","");e(t,46,0,n.nickName);e(t,49,0,"text");e(t,68,0,"取消","确定","false");e(t,71,0,n.logLevel);e(t,76,0,"0");e(t,80,0,"true","1");e(t,84,0,"2");e(t,88,0,"3");e(t,92,0,"98");e(t,96,0,"100");e(t,123,0,n.muted);e(t,142,0,n.audio);e(t,159,0,"取消","确定","false");e(t,162,0,n.audioInput);e(t,167,0,n.audioInputList);e(t,185,0,n.video);e(t,202,0,"取消","确定","false");e(t,205,0,n.videoInput);e(t,210,0,n.videoInputList);e(t,226,0,"取消","确定","false");e(t,229,0,n.videoQuality);e(t,234,0,"1");e(t,238,0,"2");e(t,242,0,"3");e(t,260,0,"","","")},function(e,t){e(t,4,0,D._13(t,5)._hidden,D._13(t,5)._sbPadding);e(t,13,0,D._13(t,14).statusbarPadding,D._13(t,14)._hasRefresher);e(t,45,0,D._13(t,48).ngClassUntouched,D._13(t,48).ngClassTouched,D._13(t,48).ngClassPristine,D._13(t,48).ngClassDirty,D._13(t,48).ngClassValid,D._13(t,48).ngClassInvalid,D._13(t,48).ngClassPending);e(t,67,0,D._13(t,68)._disabled,D._13(t,73).ngClassUntouched,D._13(t,73).ngClassTouched,D._13(t,73).ngClassPristine,D._13(t,73).ngClassDirty,D._13(t,73).ngClassValid,D._13(t,73).ngClassInvalid,D._13(t,73).ngClassPending);e(t,120,0,D._13(t,121)._disabled,D._13(t,121)._value,D._13(t,121)._activated,D._13(t,125).ngClassUntouched,D._13(t,125).ngClassTouched,D._13(t,125).ngClassPristine,D._13(t,125).ngClassDirty,D._13(t,125).ngClassValid,D._13(t,125).ngClassInvalid,D._13(t,125).ngClassPending);e(t,139,0,D._13(t,140)._disabled,D._13(t,140)._value,D._13(t,140)._activated,D._13(t,144).ngClassUntouched,D._13(t,144).ngClassTouched,D._13(t,144).ngClassPristine,D._13(t,144).ngClassDirty,D._13(t,144).ngClassValid,D._13(t,144).ngClassInvalid,D._13(t,144).ngClassPending);e(t,158,0,D._13(t,159)._disabled,D._13(t,164).ngClassUntouched,D._13(t,164).ngClassTouched,D._13(t,164).ngClassPristine,D._13(t,164).ngClassDirty,D._13(t,164).ngClassValid,D._13(t,164).ngClassInvalid,D._13(t,164).ngClassPending);e(t,182,0,D._13(t,183)._disabled,D._13(t,183)._value,D._13(t,183)._activated,D._13(t,187).ngClassUntouched,D._13(t,187).ngClassTouched,D._13(t,187).ngClassPristine,D._13(t,187).ngClassDirty,D._13(t,187).ngClassValid,D._13(t,187).ngClassInvalid,D._13(t,187).ngClassPending);e(t,201,0,D._13(t,202)._disabled,D._13(t,207).ngClassUntouched,D._13(t,207).ngClassTouched,D._13(t,207).ngClassPristine,D._13(t,207).ngClassDirty,D._13(t,207).ngClassValid,D._13(t,207).ngClassInvalid,D._13(t,207).ngClassPending);e(t,225,0,D._13(t,226)._disabled,D._13(t,231).ngClassUntouched,D._13(t,231).ngClassTouched,D._13(t,231).ngClassPristine,D._13(t,231).ngClassDirty,D._13(t,231).ngClassValid,D._13(t,231).ngClassInvalid,D._13(t,231).ngClassPending)})}function s(e){return D._19(0,[(e()(),D.Z(0,0,null,null,35,"ion-header",[],null,null,null,null,null)),D.Y(1,16384,null,0,qe.a,[Oe.a,D.j,D.z,[2,we.a]],null,null),(e()(),D._18(-1,null,["\n  "])),(e()(),D.Z(3,0,null,null,31,"ion-toolbar",[["class","toolbar"],["color","primary"]],[[2,"statusbar-padding",null]],null,null,bt.b,bt.a)),D.Y(4,49152,null,0,We.a,[Oe.a,D.j,D.z],{color:[0,"color"]},null),(e()(),D._18(-1,3,["\n    "])),(e()(),D.Z(6,0,null,3,27,"ion-title",[],null,null,null,Fe.b,Fe.a)),D.Y(7,49152,null,0,Ge.a,[Oe.a,D.j,D.z,[2,We.a],[2,Be.a]],null,null),(e()(),D._18(-1,0,["\n      "])),(e()(),D.Z(9,0,null,0,23,"ion-grid",[["class","grid"]],null,null,null,null,null)),D.Y(10,16384,null,0,yt.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(12,0,null,null,19,"ion-row",[["class","row"]],null,null,null,null,null)),D.Y(13,16384,null,0,Ct.a,[],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(15,0,null,null,1,"ion-col",[["class","col"],["col-4",""]],null,null,null,null,null)),D.Y(16,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(18,0,null,null,3,"ion-col",[["class","col"],["col-4",""],["style","text-align: center"]],null,null,null,null,null)),D.Y(19,16384,null,0,St.a,[],null,null),(e()(),D.Z(20,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),D._18(-1,null,["VideoTalk"])),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(23,0,null,null,2,"ion-col",[["class","col"],["col-2",""]],null,null,null,null,null)),D.Y(24,16384,null,0,St.a,[],null,null),(e()(),D.Z(25,0,null,null,0,"h6",[],null,null,null,null,null)),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(27,0,null,null,3,"ion-col",[["class","setting col"],["col-2",""]],null,[[null,"click"]],function(e,t,n){var l=!0,i=e.component;if("click"===t){l=!1!==(i.isSupport&&i.openSetting())&&l}return l},null,null)),D.Y(28,16384,null,0,St.a,[],null,null),(e()(),D.Z(29,0,null,null,1,"h6",[],null,null,null,null,null)),(e()(),D._18(-1,null,["设置"])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,0,["\n    "])),(e()(),D._18(-1,3,["\n  "])),(e()(),D._18(-1,null,["\n"])),(e()(),D._18(-1,null,["\n\n\n"])),(e()(),D.Z(37,0,null,null,39,"ion-content",[["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Je.b,Je.a)),D.Y(38,4374528,null,0,Qe.a,[Oe.a,De.a,Ye.a,D.j,D.z,ze.a,Ke.a,D.u,[2,we.a],[2,Ue.a]],null,null),(e()(),D._18(-1,1,["\n\n  "])),(e()(),D.Z(40,0,null,1,16,"ion-item",[["class","roomId item item-block"]],null,null,null,$e.b,$e.a)),D.Y(41,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,1,{contentLabel:0}),D._16(603979776,2,{_buttons:1}),D._16(603979776,3,{_icons:1}),D.Y(45,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(47,0,null,1,2,"ion-label",[["floating",""]],null,null,null,null,null)),D.Y(48,16384,[[1,4]],0,it.a,[Oe.a,D.j,D.z,[8,""],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["请输入会话ID"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(51,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.roomId=n)&&l}return l},rt.b,rt.a)),D.Y(52,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(54,16384,null,0,st.g,[st.f],null,null),D.Y(55,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n  "])),(e()(),D.Z(58,0,null,1,17,"ion-row",[["class","row"]],null,null,null,null,null)),D.Y(59,16384,null,0,Ct.a,[],null,null),(e()(),D._18(-1,null,["\n    "])),(e()(),D.Z(61,0,null,null,1,"ion-col",[["class","col"],["col-4",""]],null,null,null,null,null)),D.Y(62,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n    "])),(e()(),D.Z(64,0,null,null,6,"ion-col",[["class","col"],["col-4",""],["style","text-align: center"]],null,null,null,null,null)),D.Y(65,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n       "])),(e()(),D.Z(67,0,null,null,2,"button",[["ion-button",""],["margin-top",""],["tappable",""]],null,[[null,"click"]],function(e,t,n){var l=!0,i=e.component;if("click"===t){l=!1!==(i.isSupport&&i.openRoom())&&l}return l},gt.b,gt.a)),D.Y(68,1097728,null,0,ft.a,[[8,""],Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["开始视频通话"])),(e()(),D._18(-1,null,["\n    "])),(e()(),D._18(-1,null,["\n    "])),(e()(),D.Z(72,0,null,null,2,"ion-col",[["class","col"],["col-4",""]],null,null,null,null,null)),D.Y(73,16384,null,0,St.a,[],null,null),(e()(),D.Z(74,0,null,null,0,"h6",[],null,null,null,null,null)),(e()(),D._18(-1,null,["\n  "])),(e()(),D._18(-1,1,["\n\n\n"])),(e()(),D._18(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,"primary");e(t,52,0,n.roomId);e(t,55,0,"text")},function(e,t){e(t,3,0,D._13(t,4)._sbPadding);e(t,37,0,D._13(t,38).statusbarPadding,D._13(t,38)._hasRefresher);e(t,51,0,D._13(t,54).ngClassUntouched,D._13(t,54).ngClassTouched,D._13(t,54).ngClassPristine,D._13(t,54).ngClassDirty,D._13(t,54).ngClassValid,D._13(t,54).ngClassInvalid,D._13(t,54).ngClassPending)})}function a(e){return D._19(0,[(e()(),D.Z(0,0,null,null,6,"ion-chip",[],null,null,null,null,null)),D.Y(1,16384,null,0,Pt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n            "])),(e()(),D.Z(3,0,null,null,2,"ion-label",[["color","secondary"]],null,null,null,null,null)),D.Y(4,16384,null,0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(e()(),D._18(5,null,["",""])),(e()(),D._18(-1,null,["\n          "]))],function(e,t){e(t,4,0,"secondary")},function(e,t){e(t,5,0,t.parent.context.$implicit.stream_id)})}function u(e){return D._19(0,[(e()(),D.Z(0,0,[[2,0],["subVideo",1]],null,1,"video",[["autoplay",""],["playsinline",""]],[[8,"id",0]],null,null,null,null)),(e()(),D._18(-1,null,["\n            您的浏览器不支持 video 标签。\n          "]))],null,function(e,t){e(t,0,0,D._2(1,"",t.parent.context.$implicit.stream_id,""))})}function c(e){return D._19(0,[(e()(),D.Z(0,0,null,null,8,"ion-col",[["class","col"],["col-sm-4",""]],null,null,null,null,null)),D.Y(1,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.U(16777216,null,null,1,null,a)),D.Y(4,16384,null,0,pt.i,[D.I,D.F],{ngIf:[0,"ngIf"]},null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.U(16777216,null,null,1,null,u)),D.Y(7,16384,null,0,pt.i,[D.I,D.F],{ngIf:[0,"ngIf"]},null),(e()(),D._18(-1,null,["\n        "]))],function(e,t){e(t,4,0,t.context.index<3);e(t,7,0,t.context.index<3)},null)}function d(e){return D._19(0,[D._16(402653184,1,{localVideo:0}),D._16(671088640,2,{subVideoList:1}),(e()(),D.Z(2,0,null,null,89,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Je.b,Je.a)),D.Y(3,4374528,null,0,Qe.a,[Oe.a,De.a,Ye.a,D.j,D.z,ze.a,Ke.a,D.u,[2,we.a],[2,Ue.a]],null,null),(e()(),D._18(-1,1,["\n  "])),(e()(),D.Z(5,0,null,1,59,"ion-grid",[["class","topRow grid"]],null,null,null,null,null)),D.Y(6,16384,null,0,yt.a,[],null,null),(e()(),D._18(-1,null,["\n    "])),(e()(),D.Z(8,0,null,null,55,"ion-row",[["class","row"]],null,null,null,null,null)),D.Y(9,16384,null,0,Ct.a,[],null,null),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(11,0,null,null,33,"ion-col",[["class","col col"],["col-8",""]],null,null,null,null,null)),D.Y(12,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(14,0,null,null,6,"button",[["class","fab-in-list show"],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.toggleCam()&&l}return l},It.b,It.a)),D.Y(15,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(17,0,null,0,2,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(18,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,null,["\n          "])),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(22,0,null,null,5,"button",[["class","fab-in-list show"],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.toggleMic()&&l}return l},It.b,It.a)),D.Y(23,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(25,0,null,0,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(26,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(29,0,null,null,5,"button",[["class","fab-in-list show"],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.toggleVolume()&&l}return l},It.b,It.a)),D.Y(30,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n        "])),(e()(),D.Z(32,0,null,0,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(33,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(36,0,null,null,7,"button",[["class","fab-in-list show"],["ion-fab",""]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.changeUseCam()&&l}return l},It.b,It.a)),D.Y(37,278528,null,0,pt.g,[D.p,D.q,D.j,D.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),D._14(38,{cannotToggleCam:0}),D.Y(39,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(41,0,null,0,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(42,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(46,0,null,null,16,"ion-col",[["class","col col"],["col-4",""]],null,null,null,null,null)),D.Y(47,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(49,0,null,null,5,"button",[["class","fab-in-list show"],["float-start",""],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.showLogs()&&l}return l},It.b,It.a)),D.Y(50,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n                    "])),(e()(),D.Z(52,0,null,0,1,"span",[["class","button-inner"]],null,null,null,null,null)),(e()(),D._18(-1,null,["\n                        日志\n                    "])),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(56,0,null,null,5,"button",[["class","fab-in-list show"],["float-start",""],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.logoutRoom()&&l}return l},It.b,It.a)),D.Y(57,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(59,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(60,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n    "])),(e()(),D._18(-1,null,["\n  "])),(e()(),D._18(-1,1,["\n  "])),(e()(),D.Z(66,0,null,1,23,"ion-grid",[["class","subVideo grid"]],null,null,null,null,null)),D.Y(67,16384,null,0,yt.a,[],null,null),(e()(),D._18(-1,null,["\n    "])),(e()(),D.Z(69,0,null,null,19,"ion-row",[["class","row"]],null,null,null,null,null)),D.Y(70,16384,null,0,Ct.a,[],null,null),(e()(),D._18(-1,null,["\n\n      "])),(e()(),D.Z(72,0,null,null,12,"ion-col",[["class","col"],["col-sm-4",""]],null,null,null,null,null)),D.Y(73,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(75,0,null,null,6,"ion-chip",[],null,null,null,null,null)),D.Y(76,16384,null,0,Pt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(78,0,null,null,2,"ion-label",[["color","secondary"]],null,null,null,null,null)),D.Y(79,16384,null,0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(e()(),D._18(80,null,["",""])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(83,0,[[1,0],["localVideo",1]],null,0,"video",[["autoplay",""],["muted",""],["playsinline",""]],null,null,null,null,null)),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n\n\n        "])),(e()(),D.U(16777216,null,null,1,null,c)),D.Y(87,802816,null,0,pt.h,[D.I,D.F,D.p],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D._18(-1,null,["\n\n  "])),(e()(),D._18(-1,1,["\n  "])),(e()(),D._18(-1,1,["\n"])),(e()(),D._18(-1,null,["\n\n\n"]))],function(e,t){var n=t.component;e(t,18,0,n.offOnCam);e(t,26,0,n.offOnMic);e(t,33,0,n.offOnVolume);e(t,37,0,"fab-in-list show",e(t,38,0,!n.isSuportMultipCam));e(t,42,0,n.changeCam);e(t,60,0,"close");e(t,79,0,"secondary");e(t,87,0,n.useLocalStreamList,n.identify)},function(e,t){var n=t.component;e(t,2,0,D._13(t,3).statusbarPadding,D._13(t,3)._hasRefresher);e(t,17,0,D._13(t,18)._hidden);e(t,25,0,D._13(t,26)._hidden);e(t,32,0,D._13(t,33)._hidden);e(t,36,0,!n.isSuportMultipCam);e(t,41,0,D._13(t,42)._hidden);e(t,59,0,D._13(t,60)._hidden);e(t,80,0,"me:"+n.publishStreamId)})}function h(e){return D._19(0,[(e()(),D.Z(0,0,null,null,6,"ion-chip",[],null,null,null,null,null)),D.Y(1,16384,null,0,Pt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n            "])),(e()(),D.Z(3,0,null,null,2,"ion-label",[["color","secondary"]],null,null,null,null,null)),D.Y(4,16384,null,0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(e()(),D._18(5,null,["","(",")"])),(e()(),D._18(-1,null,["\n          "]))],function(e,t){e(t,4,0,"secondary")},function(e,t){e(t,5,0,t.parent.context.$implicit.stream_id,t.component.status["pull"+t.parent.context.$implicit.stream_id])})}function p(e){return D._19(0,[(e()(),D.Z(0,0,[[2,0],["subVideo",1]],null,1,"video",[["autoplay",""],["playsinline",""]],[[8,"id",0]],null,null,null,null)),(e()(),D._18(-1,null,["\n            您的浏览器不支持 video 标签。\n          "]))],null,function(e,t){e(t,0,0,D._2(1,"",t.parent.context.$implicit.stream_id,""))})}function g(e){return D._19(0,[(e()(),D.Z(0,0,null,null,8,"ion-col",[["class","col"],["col-sm-4",""]],null,null,null,null,null)),D.Y(1,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.U(16777216,null,null,1,null,h)),D.Y(4,16384,null,0,pt.i,[D.I,D.F],{ngIf:[0,"ngIf"]},null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.U(16777216,null,null,1,null,p)),D.Y(7,16384,null,0,pt.i,[D.I,D.F],{ngIf:[0,"ngIf"]},null),(e()(),D._18(-1,null,["\n        "]))],function(e,t){e(t,4,0,t.context.index<3);e(t,7,0,t.context.index<3)},null)}function f(e){return D._19(0,[D._16(402653184,1,{localVideo:0}),D._16(671088640,2,{subVideoList:1}),(e()(),D.Z(2,0,null,null,93,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Je.b,Je.a)),D.Y(3,4374528,null,0,Qe.a,[Oe.a,De.a,Ye.a,D.j,D.z,ze.a,Ke.a,D.u,[2,we.a],[2,Ue.a]],null,null),(e()(),D._18(-1,1,["\n  "])),(e()(),D.Z(5,0,null,1,63,"ion-grid",[["class","topRow grid"]],null,null,null,null,null)),D.Y(6,16384,null,0,yt.a,[],null,null),(e()(),D._18(-1,null,["\n    "])),(e()(),D.Z(8,0,null,null,59,"ion-row",[["class","row"]],null,null,null,null,null)),D.Y(9,16384,null,0,Ct.a,[],null,null),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(11,0,null,null,37,"ion-col",[["class","col col"],["col-8",""]],null,null,null,null,null)),D.Y(12,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(14,0,null,null,6,"button",[["class","fab-in-list show"],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.toggleCam()&&l}return l},It.b,It.a)),D.Y(15,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(17,0,null,0,2,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(18,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,null,["\n          "])),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(22,0,null,null,5,"button",[["class","fab-in-list show"],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.toggleMic()&&l}return l},It.b,It.a)),D.Y(23,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(25,0,null,0,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(26,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(29,0,null,null,5,"button",[["class","fab-in-list show"],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.toggleVolume()&&l}return l},It.b,It.a)),D.Y(30,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n        "])),(e()(),D.Z(32,0,null,0,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(33,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(36,0,null,null,7,"button",[["class","fab-in-list show"],["ion-fab",""]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.changeUseCam()&&l}return l},It.b,It.a)),D.Y(37,278528,null,0,pt.g,[D.p,D.q,D.j,D.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),D._14(38,{cannotToggleCam:0}),D.Y(39,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(41,0,null,0,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(42,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(45,0,null,null,2,"button",[["class","fab-in-list show"],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.togglePullStream()&&l}return l},It.b,It.a)),D.Y(46,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          切拉流\n        "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(50,0,null,null,16,"ion-col",[["class","col col"],["col-4",""]],null,null,null,null,null)),D.Y(51,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(53,0,null,null,5,"button",[["class","fab-in-list show"],["float-start",""],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.showLogs()&&l}return l},It.b,It.a)),D.Y(54,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n                    "])),(e()(),D.Z(56,0,null,0,1,"span",[["class","button-inner"]],null,null,null,null,null)),(e()(),D._18(-1,null,["\n                        日志\n                    "])),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(60,0,null,null,5,"button",[["class","fab-in-list show"],["float-start",""],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.logoutRoom()&&l}return l},It.b,It.a)),D.Y(61,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(63,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(64,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n    "])),(e()(),D._18(-1,null,["\n\n\n\n  "])),(e()(),D._18(-1,1,["\n  "])),(e()(),D.Z(70,0,null,1,23,"ion-grid",[["class","subVideo grid"]],null,null,null,null,null)),D.Y(71,16384,null,0,yt.a,[],null,null),(e()(),D._18(-1,null,["\n    "])),(e()(),D.Z(73,0,null,null,19,"ion-row",[["class","row"]],null,null,null,null,null)),D.Y(74,16384,null,0,Ct.a,[],null,null),(e()(),D._18(-1,null,["\n\n      "])),(e()(),D.Z(76,0,null,null,12,"ion-col",[["class","col"],["col-sm-4",""]],null,null,null,null,null)),D.Y(77,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(79,0,null,null,6,"ion-chip",[],null,null,null,null,null)),D.Y(80,16384,null,0,Pt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(82,0,null,null,2,"ion-label",[["color","secondary"]],null,null,null,null,null)),D.Y(83,16384,null,0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(e()(),D._18(84,null,["","(",")"])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(87,0,[[1,0],["localVideo",1]],null,0,"video",[["autoplay",""],["muted",""],["playsinline",""]],null,null,null,null,null)),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n\n\n        "])),(e()(),D.U(16777216,null,null,1,null,g)),D.Y(91,802816,null,0,pt.h,[D.I,D.F,D.p],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D._18(-1,null,["\n\n  "])),(e()(),D._18(-1,1,["\n  "])),(e()(),D._18(-1,1,["\n"])),(e()(),D._18(-1,null,["\n\n\n"]))],function(e,t){var n=t.component;e(t,18,0,n.offOnCam);e(t,26,0,n.offOnMic);e(t,33,0,n.offOnVolume);e(t,37,0,"fab-in-list show",e(t,38,0,!n.isSuportMultipCam));e(t,42,0,n.changeCam);e(t,64,0,"close");e(t,83,0,"secondary");e(t,91,0,n.useLocalStreamList,n.identify)},function(e,t){var n=t.component;e(t,2,0,D._13(t,3).statusbarPadding,D._13(t,3)._hasRefresher);e(t,17,0,D._13(t,18)._hidden);e(t,25,0,D._13(t,26)._hidden);e(t,32,0,D._13(t,33)._hidden);e(t,36,0,!n.isSuportMultipCam);e(t,41,0,D._13(t,42)._hidden);e(t,63,0,D._13(t,64)._hidden);e(t,84,0,"me:"+n.publishStreamId,n.status["push"+n.publishStreamId])})}function m(e){return D._19(0,[(e()(),D.Z(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),D.Y(1,16384,[[5,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(2,null,["",""]))],function(e,t){e(t,1,0,t.context.$implicit)},function(e,t){e(t,2,0,t.context.$implicit)})}function v(e){return D._19(0,[(e()(),D.Z(0,0,null,null,10,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(1,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,6,{contentLabel:0}),D._16(603979776,7,{_buttons:1}),D._16(603979776,8,{_icons:1}),D.Y(5,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D.Z(7,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(8,16384,[[6,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(9,null,["",""])),(e()(),D._18(-1,2,["\n    "]))],null,function(e,t){e(t,9,0,t.context.$implicit)})}function _(e){return D._19(0,[(e()(),D.Z(0,0,null,null,75,"ion-header",[],null,null,null,null,null)),D.Y(1,16384,null,0,qe.a,[Oe.a,D.j,D.z,[2,we.a]],null,null),(e()(),D._18(-1,null,["\n  "])),(e()(),D.Z(3,0,null,null,10,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,He.b,He.a)),D.Y(4,49152,null,0,Be.a,[ze.a,[2,we.a],[2,Ue.a],Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,3,["\n    "])),(e()(),D.Z(6,0,null,3,2,"ion-title",[],null,null,null,Fe.b,Fe.a)),D.Y(7,49152,null,0,Ge.a,[Oe.a,D.j,D.z,[2,We.a],[2,Be.a]],null,null),(e()(),D._18(-1,0,["\n      日志\n    "])),(e()(),D._18(-1,3,["\n    "])),(e()(),D.Z(10,0,null,3,2,"button",[["float-end",""],["ion-fab",""],["mini",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.toggleRefresh()&&l}return l},It.b,It.a)),D.Y(11,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(12,0,[" ",""])),(e()(),D._18(-1,3,["\n  "])),(e()(),D._18(-1,null,["\n  "])),(e()(),D.Z(15,0,null,null,59,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(16,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,1,{contentLabel:0}),D._16(603979776,2,{_buttons:1}),D._16(603979776,3,{_icons:1}),D.Y(20,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n\n    "])),(e()(),D.Z(22,0,null,1,6,"ion-label",[],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.showPrompt()&&l}return l},null,null)),D.Y(23,16384,[[1,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(25,0,null,null,2,"button",[["color","light"],["ion-button",""]],null,null,null,gt.b,gt.a)),D.Y(26,1097728,null,0,ft.a,[[8,""],Oe.a,D.j,D.z],{color:[0,"color"]},null),(e()(),D._18(27,0,["自定义过滤-",""])),(e()(),D._18(-1,null,["\n    "])),(e()(),D._18(-1,2,["\n\n    "])),(e()(),D.Z(30,0,null,3,23,"ion-select",[["cancelText","取消"],["multiple","false"],["okText","确定"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var l=!0,i=e.component;if("click"===t){l=!1!==D._13(e,31)._click(n)&&l}if("keyup.space"===t){l=!1!==D._13(e,31)._keyup()&&l}if("ngModelChange"===t){l=!1!==(i.levelID=n)&&l}return l},at.b,at.a)),D.Y(31,1228800,null,1,ut.a,[ze.a,tt.a,Oe.a,D.j,D.z,[2,et.a],xe.a],{cancelText:[0,"cancelText"],okText:[1,"okText"],multiple:[2,"multiple"]},null),D._16(603979776,4,{options:1}),D._15(1024,null,st.e,function(e){return[e]},[ut.a]),D.Y(34,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(36,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(38,0,null,null,2,"ion-option",[["value","debug"]],null,null,null,null,null)),D.Y(39,16384,[[4,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(-1,null,["debug"])),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(42,0,null,null,2,"ion-option",[["value","info"]],null,null,null,null,null)),D.Y(43,16384,[[4,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(-1,null,["info"])),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(46,0,null,null,2,"ion-option",[["value","warning"]],null,null,null,null,null)),D.Y(47,16384,[[4,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(-1,null,["warnings"])),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(50,0,null,null,2,"ion-option",[["value","errors"]],null,null,null,null,null)),D.Y(51,16384,[[4,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(-1,null,["errors"])),(e()(),D._18(-1,null,["\n    "])),(e()(),D._18(-1,2,["\n\n    "])),(e()(),D.Z(55,0,null,3,18,"ion-select",[["cancelText","取消"],["multiple","false"],["okText","确定"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,t,n){var l=!0,i=e.component;if("click"===t){l=!1!==D._13(e,56)._click(n)&&l}if("keyup.space"===t){l=!1!==D._13(e,56)._keyup()&&l}if("ngModelChange"===t){l=!1!==(i.typeID=n)&&l}return l},at.b,at.a)),D.Y(56,1228800,null,1,ut.a,[ze.a,tt.a,Oe.a,D.j,D.z,[2,et.a],xe.a],{cancelText:[0,"cancelText"],okText:[1,"okText"],multiple:[2,"multiple"]},null),D._16(603979776,5,{options:1}),D._15(1024,null,st.e,function(e){return[e]},[ut.a]),D.Y(59,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(61,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(63,0,null,null,2,"ion-option",[["value",""]],null,null,null,null,null)),D.Y(64,16384,[[5,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(-1,null,["全部"])),(e()(),D._18(-1,null,["\n      "])),(e()(),D.U(16777216,null,null,1,null,m)),D.Y(68,802816,null,0,pt.h,[D.I,D.F,D.p],{ngForOf:[0,"ngForOf"]},null),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(70,0,null,null,2,"ion-option",[["value","###"]],null,null,null,null,null)),D.Y(71,16384,[[5,4]],0,Ve.a,[D.j],{value:[0,"value"]},null),(e()(),D._18(-1,null,["其他"])),(e()(),D._18(-1,null,["\n    "])),(e()(),D._18(-1,2,["\n\n  "])),(e()(),D._18(-1,null,["\n"])),(e()(),D._18(-1,null,["\n\n"])),(e()(),D.Z(77,0,null,null,9,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Je.b,Je.a)),D.Y(78,4374528,null,0,Qe.a,[Oe.a,De.a,Ye.a,D.j,D.z,ze.a,Ke.a,D.u,[2,we.a],[2,Ue.a]],null,null),(e()(),D._18(-1,1,["\n  "])),(e()(),D.Z(80,0,null,1,5,"ion-list",[],null,null,null,null,null)),D.Y(81,16384,null,0,Xe.a,[Oe.a,D.j,D.z,De.a,Ne.l,Ye.a],null,null),(e()(),D._18(-1,null,["\n    "])),(e()(),D.U(16777216,null,null,1,null,v)),D.Y(84,802816,null,0,pt.h,[D.I,D.F,D.p],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),D._18(-1,null,["\n  "])),(e()(),D._18(-1,1,["\n\n"])),(e()(),D._18(-1,null,["\n"])),(e()(),D._18(-1,null,["\n"])),(e()(),D._18(-1,null,["\n"])),(e()(),D._18(-1,null,["\n"])),(e()(),D._18(-1,null,["\n"])),(e()(),D._18(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,26,0,"light");e(t,31,0,"取消","确定","false");e(t,34,0,n.levelID);e(t,39,0,"debug");e(t,43,0,"info");e(t,47,0,"warning");e(t,51,0,"errors");e(t,56,0,"取消","确定","false");e(t,59,0,n.typeID);e(t,64,0,"");e(t,68,0,n.typeArray);e(t,71,0,"###");e(t,84,0,n.logArray,n.item)},function(e,t){var n=t.component;e(t,3,0,D._13(t,4)._hidden,D._13(t,4)._sbPadding);e(t,12,0,n.refreshStatus);e(t,27,0,n._customerKey);e(t,30,0,D._13(t,31)._disabled,D._13(t,36).ngClassUntouched,D._13(t,36).ngClassTouched,D._13(t,36).ngClassPristine,D._13(t,36).ngClassDirty,D._13(t,36).ngClassValid,D._13(t,36).ngClassInvalid,D._13(t,36).ngClassPending);e(t,55,0,D._13(t,56)._disabled,D._13(t,61).ngClassUntouched,D._13(t,61).ngClassTouched,D._13(t,61).ngClassPristine,D._13(t,61).ngClassDirty,D._13(t,61).ngClassValid,D._13(t,61).ngClassInvalid,D._13(t,61).ngClassPending);e(t,77,0,D._13(t,78).statusbarPadding,D._13(t,78)._hasRefresher)})}function b(e){return D._19(0,[(e()(),D.Z(0,0,null,null,36,"ion-header",[],null,null,null,null,null)),D.Y(1,16384,null,0,qe.a,[Oe.a,D.j,D.z,[2,we.a]],null,null),(e()(),D._18(-1,null,["\n  "])),(e()(),D.Z(3,0,null,null,32,"ion-toolbar",[["class","toolbar"],["color","primary"]],[[2,"statusbar-padding",null]],null,null,bt.b,bt.a)),D.Y(4,49152,null,0,We.a,[Oe.a,D.j,D.z],{color:[0,"color"]},null),(e()(),D._18(-1,3,["\n    "])),(e()(),D.Z(6,0,null,3,28,"ion-title",[],null,null,null,Fe.b,Fe.a)),D.Y(7,49152,null,0,Ge.a,[Oe.a,D.j,D.z,[2,We.a],[2,Be.a]],null,null),(e()(),D._18(-1,0,["\n      "])),(e()(),D.Z(9,0,null,0,24,"ion-grid",[["class","grid"]],null,null,null,null,null)),D.Y(10,16384,null,0,yt.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(12,0,null,null,20,"ion-row",[["class","row"]],null,null,null,null,null)),D.Y(13,16384,null,0,Ct.a,[],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(15,0,null,null,1,"ion-col",[["class","col"],["col-4",""]],null,null,null,null,null)),D.Y(16,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(18,0,null,null,3,"ion-col",[["class","col"],["col-4",""],["style","text-align: center"]],null,null,null,null,null)),D.Y(19,16384,null,0,St.a,[],null,null),(e()(),D.Z(20,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),D._18(-1,null,["VideoTalk"])),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(23,0,null,null,3,"ion-col",[["class","col"],["col-2",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.openHistory()&&l}return l},null,null)),D.Y(24,16384,null,0,St.a,[],null,null),(e()(),D.Z(25,0,null,null,1,"h6",[],null,null,null,null,null)),(e()(),D._18(-1,null,["版本更新详细"])),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(28,0,null,null,3,"ion-col",[["class","setting col"],["col-2",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.openSetting()&&l}return l},null,null)),D.Y(29,16384,null,0,St.a,[],null,null),(e()(),D.Z(30,0,null,null,1,"h6",[],null,null,null,null,null)),(e()(),D._18(-1,null,["设置"])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,0,["\n    "])),(e()(),D._18(-1,3,["\n  "])),(e()(),D._18(-1,null,["\n"])),(e()(),D._18(-1,null,["\n\n\n"])),(e()(),D.Z(38,0,null,null,267,"ion-content",[["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Je.b,Je.a)),D.Y(39,4374528,null,0,Qe.a,[Oe.a,De.a,Ye.a,D.j,D.z,ze.a,Ke.a,D.u,[2,we.a],[2,Ue.a]],null,null),(e()(),D._18(-1,1,["\n  "])),(e()(),D.Z(41,0,null,1,16,"ion-item",[["class","roomId item item-block"]],null,null,null,$e.b,$e.a)),D.Y(42,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,1,{contentLabel:0}),D._16(603979776,2,{_buttons:1}),D._16(603979776,3,{_icons:1}),D.Y(46,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(48,0,null,1,2,"ion-label",[["floating",""]],null,null,null,null,null)),D.Y(49,16384,[[1,4]],0,it.a,[Oe.a,D.j,D.z,[8,""],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["请输入房间号"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(52,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.roomId=n)&&l}return l},rt.b,rt.a)),D.Y(53,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(55,16384,null,0,st.g,[st.f],null,null),D.Y(56,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n\n  "])),(e()(),D.Z(59,0,null,1,16,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(60,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,4,{contentLabel:0}),D._16(603979776,5,{_buttons:1}),D._16(603979776,6,{_icons:1}),D.Y(64,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(66,0,null,1,2,"ion-label",[["floating",""]],null,null,null,null,null)),D.Y(67,16384,[[4,4]],0,it.a,[Oe.a,D.j,D.z,[8,""],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["appid"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(70,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.appId=n)&&l}return l},rt.b,rt.a)),D.Y(71,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(73,16384,null,0,st.g,[st.f],null,null),D.Y(74,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n\n  "])),(e()(),D.Z(77,0,null,1,16,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(78,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,7,{contentLabel:0}),D._16(603979776,8,{_buttons:1}),D._16(603979776,9,{_icons:1}),D.Y(82,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(84,0,null,1,2,"ion-label",[["floating",""]],null,null,null,null,null)),D.Y(85,16384,[[7,4]],0,it.a,[Oe.a,D.j,D.z,[8,""],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["请输入signUrl"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(88,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.signUrl=n)&&l}return l},rt.b,rt.a)),D.Y(89,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(91,16384,null,0,st.g,[st.f],null,null),D.Y(92,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n  "])),(e()(),D._18(-1,1,["\n  "])),(e()(),D._18(-1,1,["\n  "])),(e()(),D._18(-1,1,["\n  "])),(e()(),D._18(-1,1,["\n\n\n  "])),(e()(),D.Z(99,0,null,1,85,"ion-card",[],null,null,null,null,null)),D.Y(100,16384,null,0,At.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(102,0,null,null,2,"ion-card-header",[],null,null,null,null,null)),D.Y(103,16384,null,0,xt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n      推流\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(106,0,null,null,77,"ion-card-content",[],null,null,null,null,null)),D.Y(107,16384,null,0,Yt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(109,0,null,null,17,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(110,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,10,{contentLabel:0}),D._16(603979776,11,{_buttons:1}),D._16(603979776,12,{_icons:1}),D.Y(114,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(116,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(117,16384,[[10,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["是否推流"])),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(120,0,null,4,5,"ion-toggle",[["checked","true"]],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"]],function(e,t,n){var l=!0,i=e.component;if("keyup"===t){l=!1!==D._13(e,121)._keyup(n)&&l}if("ngModelChange"===t){l=!1!==(i.isPublish=n)&&l}return l},ct.b,ct.a)),D.Y(121,1228800,null,0,dt.a,[tt.a,Oe.a,De.a,D.j,D.z,ht.a,[2,et.a],Ne.l,Ye.a,D.u],{checked:[0,"checked"]},null),D._15(1024,null,st.e,function(e){return[e]},[dt.a]),D.Y(123,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(125,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D._18(-1,null,["\n\n      "])),(e()(),D.Z(128,0,null,null,17,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(129,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,13,{contentLabel:0}),D._16(603979776,14,{_buttons:1}),D._16(603979776,15,{_icons:1}),D.Y(133,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(135,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(136,16384,[[13,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["是否推音频"])),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(139,0,null,4,5,"ion-toggle",[["checked","true"]],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"]],function(e,t,n){var l=!0,i=e.component;if("keyup"===t){l=!1!==D._13(e,140)._keyup(n)&&l}if("ngModelChange"===t){l=!1!==(i.isPublishAudio=n)&&l}return l},ct.b,ct.a)),D.Y(140,1228800,null,0,dt.a,[tt.a,Oe.a,De.a,D.j,D.z,ht.a,[2,et.a],Ne.l,Ye.a,D.u],{checked:[0,"checked"]},null),D._15(1024,null,st.e,function(e){return[e]},[dt.a]),D.Y(142,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(144,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D._18(-1,null,["\n\n\n      "])),(e()(),D.Z(147,0,null,null,17,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(148,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,16,{contentLabel:0}),D._16(603979776,17,{_buttons:1}),D._16(603979776,18,{_icons:1}),D.Y(152,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(154,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(155,16384,[[16,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["是否推视频"])),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(158,0,null,4,5,"ion-toggle",[["checked","true"]],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"]],function(e,t,n){var l=!0,i=e.component;if("keyup"===t){l=!1!==D._13(e,159)._keyup(n)&&l}if("ngModelChange"===t){l=!1!==(i.isPublishVideo=n)&&l}return l},ct.b,ct.a)),D.Y(159,1228800,null,0,dt.a,[tt.a,Oe.a,De.a,D.j,D.z,ht.a,[2,et.a],Ne.l,Ye.a,D.u],{checked:[0,"checked"]},null),D._15(1024,null,st.e,function(e){return[e]},[dt.a]),D.Y(161,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(163,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D._18(-1,null,["\n\n      "])),(e()(),D.Z(166,0,null,null,16,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(167,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,19,{contentLabel:0}),D._16(603979776,20,{_buttons:1}),D._16(603979776,21,{_icons:1}),D.Y(171,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(173,0,null,1,2,"ion-label",[["floating",""]],null,null,null,null,null)),D.Y(174,16384,[[19,4]],0,it.a,[Oe.a,D.j,D.z,[8,""],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["推流ID"])),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(177,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.streamId=n)&&l}return l},rt.b,rt.a)),D.Y(178,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(180,16384,null,0,st.g,[st.f],null,null),D.Y(181,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n      "])),(e()(),D._18(-1,null,["\n    "])),(e()(),D._18(-1,null,["\n\n  "])),(e()(),D._18(-1,1,["\n\n\n  "])),(e()(),D.Z(186,0,null,1,66,"ion-card",[],null,null,null,null,null)),D.Y(187,16384,null,0,At.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(189,0,null,null,2,"ion-card-header",[],null,null,null,null,null)),D.Y(190,16384,null,0,xt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n      拉流\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(193,0,null,null,58,"ion-card-content",[],null,null,null,null,null)),D.Y(194,16384,null,0,Yt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(196,0,null,null,17,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(197,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,22,{contentLabel:0}),D._16(603979776,23,{_buttons:1}),D._16(603979776,24,{_icons:1}),D.Y(201,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(203,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(204,16384,[[22,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["是否拉音频"])),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(207,0,null,4,5,"ion-toggle",[["checked","true"]],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"]],function(e,t,n){var l=!0,i=e.component;if("keyup"===t){l=!1!==D._13(e,208)._keyup(n)&&l}if("ngModelChange"===t){l=!1!==(i.isPullAudio=n)&&l}return l},ct.b,ct.a)),D.Y(208,1228800,null,0,dt.a,[tt.a,Oe.a,De.a,D.j,D.z,ht.a,[2,et.a],Ne.l,Ye.a,D.u],{checked:[0,"checked"]},null),D._15(1024,null,st.e,function(e){return[e]},[dt.a]),D.Y(210,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(212,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D._18(-1,null,["\n\n\n      "])),(e()(),D.Z(215,0,null,null,17,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(216,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,25,{contentLabel:0}),D._16(603979776,26,{_buttons:1}),D._16(603979776,27,{_icons:1}),D.Y(220,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(222,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(223,16384,[[25,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["是否拉视频"])),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(226,0,null,4,5,"ion-toggle",[["checked","true"]],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"]],function(e,t,n){var l=!0,i=e.component;if("keyup"===t){l=!1!==D._13(e,227)._keyup(n)&&l}if("ngModelChange"===t){l=!1!==(i.isPullVideo=n)&&l}return l},ct.b,ct.a)),D.Y(227,1228800,null,0,dt.a,[tt.a,Oe.a,De.a,D.j,D.z,ht.a,[2,et.a],Ne.l,Ye.a,D.u],{checked:[0,"checked"]},null),D._15(1024,null,st.e,function(e){return[e]},[dt.a]),D.Y(229,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(231,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,2,["\n      "])),(e()(),D._18(-1,null,["\n\n\n      "])),(e()(),D.Z(234,0,null,null,16,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(235,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,28,{contentLabel:0}),D._16(603979776,29,{_buttons:1}),D._16(603979776,30,{_icons:1}),D.Y(239,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(241,0,null,1,2,"ion-label",[["floating",""]],null,null,null,null,null)),D.Y(242,16384,[[28,4]],0,it.a,[Oe.a,D.j,D.z,[8,""],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["拉流IDS(多个id请用','号隔开)"])),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(245,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.pullstreamId=n)&&l}return l},rt.b,rt.a)),D.Y(246,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(248,16384,null,0,st.g,[st.f],null,null),D.Y(249,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n      "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D._18(-1,null,["\n\n  "])),(e()(),D._18(-1,1,["\n\n  "])),(e()(),D.Z(254,0,null,1,46,"ion-card",[],null,null,null,null,null)),D.Y(255,16384,null,0,At.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(257,0,null,null,2,"ion-card-header",[],null,null,null,null,null)),D.Y(258,16384,null,0,xt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n      鉴权\n    "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.Z(261,0,null,null,38,"ion-card-content",[],null,null,null,null,null)),D.Y(262,16384,null,0,Yt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(264,0,null,null,16,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(265,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,31,{contentLabel:0}),D._16(603979776,32,{_buttons:1}),D._16(603979776,33,{_icons:1}),D.Y(269,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(271,0,null,1,2,"ion-label",[["floating",""]],null,null,null,null,null)),D.Y(272,16384,[[31,4]],0,it.a,[Oe.a,D.j,D.z,[8,""],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["请输入鉴权token地址"])),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(275,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.authTokenUrl=n)&&l}return l},rt.b,rt.a)),D.Y(276,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(278,16384,null,0,st.g,[st.f],null,null),D.Y(279,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n      "])),(e()(),D._18(-1,null,["\n\n      "])),(e()(),D.Z(282,0,null,null,16,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(283,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,34,{contentLabel:0}),D._16(603979776,35,{_buttons:1}),D._16(603979776,36,{_icons:1}),D.Y(287,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(289,0,null,1,2,"ion-label",[["floating",""]],null,null,null,null,null)),D.Y(290,16384,[[34,4]],0,it.a,[Oe.a,D.j,D.z,[8,""],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["请输入鉴权节点"])),(e()(),D._18(-1,2,["\n        "])),(e()(),D.Z(293,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.appNode=n)&&l}return l},rt.b,rt.a)),D.Y(294,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(296,16384,null,0,st.g,[st.f],null,null),D.Y(297,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n      "])),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D._18(-1,null,["\n\n  "])),(e()(),D._18(-1,1,["\n\n\n  "])),(e()(),D.Z(302,0,null,1,2,"button",[["full",""],["ion-button",""],["margin-top",""],["tappable",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.openRoom()&&l}return l},gt.b,gt.a)),D.Y(303,1097728,null,0,ft.a,[[8,""],Oe.a,D.j,D.z],{full:[0,"full"]},null),(e()(),D._18(-1,0,["开始视频通话"])),(e()(),D._18(-1,1,["\n\n"])),(e()(),D._18(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,"primary");e(t,53,0,n.roomId);e(t,56,0,"text");e(t,71,0,n.appId);e(t,74,0,"text");e(t,89,0,n.signUrl);e(t,92,0,"text");e(t,121,0,"true");e(t,123,0,n.isPublish);e(t,140,0,"true");e(t,142,0,n.isPublishAudio);e(t,159,0,"true");e(t,161,0,n.isPublishVideo);e(t,178,0,n.streamId);e(t,181,0,"text");e(t,208,0,"true");e(t,210,0,n.isPullAudio);e(t,227,0,"true");e(t,229,0,n.isPullVideo);e(t,246,0,n.pullstreamId);e(t,249,0,"text");e(t,276,0,n.authTokenUrl);e(t,279,0,"text");e(t,294,0,n.appNode);e(t,297,0,"text");e(t,303,0,"")},function(e,t){e(t,3,0,D._13(t,4)._sbPadding);e(t,38,0,D._13(t,39).statusbarPadding,D._13(t,39)._hasRefresher);e(t,52,0,D._13(t,55).ngClassUntouched,D._13(t,55).ngClassTouched,D._13(t,55).ngClassPristine,D._13(t,55).ngClassDirty,D._13(t,55).ngClassValid,D._13(t,55).ngClassInvalid,D._13(t,55).ngClassPending);e(t,70,0,D._13(t,73).ngClassUntouched,D._13(t,73).ngClassTouched,D._13(t,73).ngClassPristine,D._13(t,73).ngClassDirty,D._13(t,73).ngClassValid,D._13(t,73).ngClassInvalid,D._13(t,73).ngClassPending);e(t,88,0,D._13(t,91).ngClassUntouched,D._13(t,91).ngClassTouched,D._13(t,91).ngClassPristine,D._13(t,91).ngClassDirty,D._13(t,91).ngClassValid,D._13(t,91).ngClassInvalid,D._13(t,91).ngClassPending);e(t,120,0,D._13(t,121)._disabled,D._13(t,121)._value,D._13(t,121)._activated,D._13(t,125).ngClassUntouched,D._13(t,125).ngClassTouched,D._13(t,125).ngClassPristine,D._13(t,125).ngClassDirty,D._13(t,125).ngClassValid,D._13(t,125).ngClassInvalid,D._13(t,125).ngClassPending);e(t,139,0,D._13(t,140)._disabled,D._13(t,140)._value,D._13(t,140)._activated,D._13(t,144).ngClassUntouched,D._13(t,144).ngClassTouched,D._13(t,144).ngClassPristine,D._13(t,144).ngClassDirty,D._13(t,144).ngClassValid,D._13(t,144).ngClassInvalid,D._13(t,144).ngClassPending);e(t,158,0,D._13(t,159)._disabled,D._13(t,159)._value,D._13(t,159)._activated,D._13(t,163).ngClassUntouched,D._13(t,163).ngClassTouched,D._13(t,163).ngClassPristine,D._13(t,163).ngClassDirty,D._13(t,163).ngClassValid,D._13(t,163).ngClassInvalid,D._13(t,163).ngClassPending);e(t,177,0,D._13(t,180).ngClassUntouched,D._13(t,180).ngClassTouched,D._13(t,180).ngClassPristine,D._13(t,180).ngClassDirty,D._13(t,180).ngClassValid,D._13(t,180).ngClassInvalid,D._13(t,180).ngClassPending);e(t,207,0,D._13(t,208)._disabled,D._13(t,208)._value,D._13(t,208)._activated,D._13(t,212).ngClassUntouched,D._13(t,212).ngClassTouched,D._13(t,212).ngClassPristine,D._13(t,212).ngClassDirty,D._13(t,212).ngClassValid,D._13(t,212).ngClassInvalid,D._13(t,212).ngClassPending);e(t,226,0,D._13(t,227)._disabled,D._13(t,227)._value,D._13(t,227)._activated,D._13(t,231).ngClassUntouched,D._13(t,231).ngClassTouched,D._13(t,231).ngClassPristine,D._13(t,231).ngClassDirty,D._13(t,231).ngClassValid,D._13(t,231).ngClassInvalid,D._13(t,231).ngClassPending);e(t,245,0,D._13(t,248).ngClassUntouched,D._13(t,248).ngClassTouched,D._13(t,248).ngClassPristine,D._13(t,248).ngClassDirty,D._13(t,248).ngClassValid,D._13(t,248).ngClassInvalid,D._13(t,248).ngClassPending);e(t,275,0,D._13(t,278).ngClassUntouched,D._13(t,278).ngClassTouched,D._13(t,278).ngClassPristine,D._13(t,278).ngClassDirty,D._13(t,278).ngClassValid,D._13(t,278).ngClassInvalid,D._13(t,278).ngClassPending);e(t,293,0,D._13(t,296).ngClassUntouched,D._13(t,296).ngClassTouched,D._13(t,296).ngClassPristine,D._13(t,296).ngClassDirty,D._13(t,296).ngClassValid,D._13(t,296).ngClassInvalid,D._13(t,296).ngClassPending)})}function y(e){return D._19(0,[(e()(),D.Z(0,0,null,null,6,"ion-chip",[],null,null,null,null,null)),D.Y(1,16384,null,0,Pt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n            "])),(e()(),D.Z(3,0,null,null,2,"ion-label",[["color","secondary"]],null,null,null,null,null)),D.Y(4,16384,null,0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(e()(),D._18(5,null,["",""])),(e()(),D._18(-1,null,["\n          "]))],function(e,t){e(t,4,0,"secondary")},function(e,t){e(t,5,0,t.parent.context.$implicit.stream_id)})}function C(e){return D._19(0,[(e()(),D.Z(0,0,[[3,0],["subVideo",1]],null,1,"video",[["autoplay",""],["muted",""],["playsinline",""]],[[8,"id",0]],null,null,null,null)),(e()(),D._18(-1,null,["\n            您的浏览器不支持 video 标签。\n          "]))],null,function(e,t){e(t,0,0,D._2(1,"",t.parent.context.$implicit.stream_id,""))})}function S(e){return D._19(0,[(e()(),D.Z(0,0,null,null,8,"ion-col",[["class","col"],["col-sm-4",""]],null,null,null,null,null)),D.Y(1,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.U(16777216,null,null,1,null,y)),D.Y(4,16384,null,0,pt.i,[D.I,D.F],{ngIf:[0,"ngIf"]},null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.U(16777216,null,null,1,null,C)),D.Y(7,16384,null,0,pt.i,[D.I,D.F],{ngIf:[0,"ngIf"]},null),(e()(),D._18(-1,null,["\n        "]))],function(e,t){e(t,4,0,t.context.index<3);e(t,7,0,t.context.index<3)},null)}function T(e){return D._19(0,[D._16(402653184,1,{localVideo1:0}),D._16(402653184,2,{localVideo2:0}),D._16(671088640,3,{subVideoList:1}),(e()(),D.Z(3,0,null,null,103,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Je.b,Je.a)),D.Y(4,4374528,null,0,Qe.a,[Oe.a,De.a,Ye.a,D.j,D.z,ze.a,Ke.a,D.u,[2,we.a],[2,Ue.a]],null,null),(e()(),D._18(-1,1,["\n  "])),(e()(),D.Z(6,0,null,1,59,"ion-grid",[["class","topRow grid"]],null,null,null,null,null)),D.Y(7,16384,null,0,yt.a,[],null,null),(e()(),D._18(-1,null,["\n    "])),(e()(),D.Z(9,0,null,null,55,"ion-row",[["class","row"]],null,null,null,null,null)),D.Y(10,16384,null,0,Ct.a,[],null,null),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(12,0,null,null,33,"ion-col",[["class","col col"],["col-8",""]],null,null,null,null,null)),D.Y(13,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(15,0,null,null,6,"button",[["class","fab-in-list show"],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.toggleCam()&&l}return l},It.b,It.a)),D.Y(16,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(18,0,null,0,2,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(19,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,null,["\n          "])),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(23,0,null,null,5,"button",[["class","fab-in-list show"],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.toggleMic()&&l}return l},It.b,It.a)),D.Y(24,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(26,0,null,0,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(27,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(30,0,null,null,5,"button",[["class","fab-in-list show"],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.toggleVolume()&&l}return l},It.b,It.a)),D.Y(31,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n        "])),(e()(),D.Z(33,0,null,0,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(34,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(37,0,null,null,7,"button",[["class","fab-in-list show"],["ion-fab",""]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.changeUseCam()&&l}return l},It.b,It.a)),D.Y(38,278528,null,0,pt.g,[D.p,D.q,D.j,D.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),D._14(39,{cannotToggleCam:0}),D.Y(40,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(42,0,null,0,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(43,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(47,0,null,null,16,"ion-col",[["class","col col"],["col-4",""]],null,null,null,null,null)),D.Y(48,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(50,0,null,null,5,"button",[["class","fab-in-list show"],["float-start",""],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.showLogs()&&l}return l},It.b,It.a)),D.Y(51,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n                    "])),(e()(),D.Z(53,0,null,0,1,"span",[["class","button-inner"]],null,null,null,null,null)),(e()(),D._18(-1,null,["\n                        日志\n                    "])),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(57,0,null,null,5,"button",[["class","fab-in-list show"],["float-start",""],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.logoutRoom()&&l}return l},It.b,It.a)),D.Y(58,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(60,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(61,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n    "])),(e()(),D._18(-1,null,["\n  "])),(e()(),D._18(-1,1,["\n  "])),(e()(),D.Z(67,0,null,1,37,"ion-grid",[["class","subVideo grid"]],null,null,null,null,null)),D.Y(68,16384,null,0,yt.a,[],null,null),(e()(),D._18(-1,null,["\n    "])),(e()(),D.Z(70,0,null,null,33,"ion-row",[["class","row"]],null,null,null,null,null)),D.Y(71,16384,null,0,Ct.a,[],null,null),(e()(),D._18(-1,null,["\n\n      "])),(e()(),D.Z(73,0,null,null,12,"ion-col",[["class","col"],["col-sm-4",""]],null,null,null,null,null)),D.Y(74,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(76,0,null,null,6,"ion-chip",[],null,null,null,null,null)),D.Y(77,16384,null,0,Pt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(79,0,null,null,2,"ion-label",[["color","secondary"]],null,null,null,null,null)),D.Y(80,16384,null,0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(e()(),D._18(81,null,["",""])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(84,0,[[1,0],["localVideo1",1]],null,0,"video",[["autoplay",""],["muted",""],["playsinline",""]],null,null,null,null,null)),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n\n      "])),(e()(),D.Z(87,0,null,null,12,"ion-col",[["class","col"],["col-sm-4",""]],null,null,null,null,null)),D.Y(88,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(90,0,null,null,6,"ion-chip",[],null,null,null,null,null)),D.Y(91,16384,null,0,Pt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(93,0,null,null,2,"ion-label",[["color","secondary"]],null,null,null,null,null)),D.Y(94,16384,null,0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(e()(),D._18(95,null,["",""])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(98,0,[[2,0],["localVideo2",1]],null,0,"video",[["autoplay",""],["muted",""],["playsinline",""]],null,null,null,null,null)),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n\n\n        "])),(e()(),D.U(16777216,null,null,1,null,S)),D.Y(102,802816,null,0,pt.h,[D.I,D.F,D.p],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D._18(-1,null,["\n\n  "])),(e()(),D._18(-1,1,["\n  "])),(e()(),D._18(-1,1,["\n"])),(e()(),D._18(-1,null,["\n\n"])),(e()(),D.Z(108,0,null,null,9,"ion-list",[],null,null,null,null,null)),D.Y(109,16384,null,0,Xe.a,[Oe.a,D.j,D.z,De.a,Ne.l,Ye.a],null,null),(e()(),D._18(-1,null,["\n  "])),(e()(),D.Z(111,0,null,null,5,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(112,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,4,{contentLabel:0}),D._16(603979776,5,{_buttons:1}),D._16(603979776,6,{_icons:1}),D.Y(116,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,null,["\n"])),(e()(),D._18(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,19,0,n.offOnCam);e(t,27,0,n.offOnMic);e(t,34,0,n.offOnVolume);e(t,38,0,"fab-in-list show",e(t,39,0,!n.isSuportMultipCam));e(t,43,0,n.changeCam);e(t,61,0,"close");e(t,80,0,"secondary");e(t,94,0,"secondary");e(t,102,0,n.useLocalStreamList,null==n.item?null:n.item.stream_id)},function(e,t){var n=t.component;e(t,3,0,D._13(t,4).statusbarPadding,D._13(t,4)._hasRefresher);e(t,18,0,D._13(t,19)._hidden);e(t,26,0,D._13(t,27)._hidden);e(t,33,0,D._13(t,34)._hidden);e(t,37,0,!n.isSuportMultipCam);e(t,42,0,D._13(t,43)._hidden);e(t,60,0,D._13(t,61)._hidden);e(t,81,0,"me-share:"+n.publishStreamId);e(t,95,0,"me:"+n.publishStreamId)})}function E(e){return D._19(0,[(e()(),D.Z(0,0,null,null,38,"ion-header",[],null,null,null,null,null)),D.Y(1,16384,null,0,qe.a,[Oe.a,D.j,D.z,[2,we.a]],null,null),(e()(),D._18(-1,null,["\n  "])),(e()(),D.Z(3,0,null,null,34,"ion-toolbar",[["class","toolbar"],["color","primary"]],[[2,"statusbar-padding",null]],null,null,bt.b,bt.a)),D.Y(4,49152,null,0,We.a,[Oe.a,D.j,D.z],{color:[0,"color"]},null),(e()(),D._18(-1,3,["\n    "])),(e()(),D.Z(6,0,null,3,30,"ion-title",[],null,null,null,Fe.b,Fe.a)),D.Y(7,49152,null,0,Ge.a,[Oe.a,D.j,D.z,[2,We.a],[2,Be.a]],null,null),(e()(),D._18(-1,0,["\n      "])),(e()(),D.Z(9,0,null,0,26,"ion-grid",[["class","grid"]],null,null,null,null,null)),D.Y(10,16384,null,0,yt.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(12,0,null,null,22,"ion-row",[["class","row"]],null,null,null,null,null)),D.Y(13,16384,null,0,Ct.a,[],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(15,0,null,null,3,"ion-col",[["class","col"],["col-3",""],["style","text-align: left"]],null,null,null,null,null)),D.Y(16,16384,null,0,St.a,[],null,null),(e()(),D.Z(17,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),D._18(-1,null,["VideoTalk"])),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(20,0,null,null,3,"ion-col",[["class","col"],["col-3",""],["item-left",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.openToolConfig()&&l}return l},null,null)),D.Y(21,16384,null,0,St.a,[],null,null),(e()(),D.Z(22,0,null,null,1,"h6",[],null,null,null,null,null)),(e()(),D._18(-1,null,["demo配置工具"])),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(25,0,null,null,3,"ion-col",[["class","col"],["col-3",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.openHistory()&&l}return l},null,null)),D.Y(26,16384,null,0,St.a,[],null,null),(e()(),D.Z(27,0,null,null,1,"h6",[],null,null,null,null,null)),(e()(),D._18(-1,null,["版本更新详细"])),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(30,0,null,null,3,"ion-col",[["class","setting col"],["col-3",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.openSetting()&&l}return l},null,null)),D.Y(31,16384,null,0,St.a,[],null,null),(e()(),D.Z(32,0,null,null,1,"h6",[],null,null,null,null,null)),(e()(),D._18(-1,null,["设置"])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,0,["\n    "])),(e()(),D._18(-1,3,["\n  "])),(e()(),D._18(-1,null,["\n"])),(e()(),D._18(-1,null,["\n\n\n"])),(e()(),D.Z(40,0,null,null,155,"ion-content",[["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Je.b,Je.a)),D.Y(41,4374528,null,0,Qe.a,[Oe.a,De.a,Ye.a,D.j,D.z,ze.a,Ke.a,D.u,[2,we.a],[2,Ue.a]],null,null),(e()(),D._18(-1,1,["\n\n  "])),(e()(),D.Z(43,0,null,1,16,"ion-item",[["class","roomId item item-block"]],null,null,null,$e.b,$e.a)),D.Y(44,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,1,{contentLabel:0}),D._16(603979776,2,{_buttons:1}),D._16(603979776,3,{_icons:1}),D.Y(48,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(50,0,null,1,2,"ion-label",[["floating",""]],null,null,null,null,null)),D.Y(51,16384,[[1,4]],0,it.a,[Oe.a,D.j,D.z,[8,""],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["请输入房间号"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(54,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.roomId=n)&&l}return l},rt.b,rt.a)),D.Y(55,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(57,16384,null,0,st.g,[st.f],null,null),D.Y(58,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n\n  "])),(e()(),D.Z(61,0,null,1,16,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(62,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,4,{contentLabel:0}),D._16(603979776,5,{_buttons:1}),D._16(603979776,6,{_icons:1}),D.Y(66,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(68,0,null,1,2,"ion-label",[["floating",""]],null,null,null,null,null)),D.Y(69,16384,[[4,4]],0,it.a,[Oe.a,D.j,D.z,[8,""],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["appid"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(72,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.appId=n)&&l}return l},rt.b,rt.a)),D.Y(73,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(75,16384,null,0,st.g,[st.f],null,null),D.Y(76,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n\n  "])),(e()(),D.Z(79,0,null,1,16,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(80,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,7,{contentLabel:0}),D._16(603979776,8,{_buttons:1}),D._16(603979776,9,{_icons:1}),D.Y(84,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(86,0,null,1,2,"ion-label",[["floating",""]],null,null,null,null,null)),D.Y(87,16384,[[7,4]],0,it.a,[Oe.a,D.j,D.z,[8,""],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["请输入server"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(90,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.signUrl=n)&&l}return l},rt.b,rt.a)),D.Y(91,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(93,16384,null,0,st.g,[st.f],null,null),D.Y(94,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n\n  "])),(e()(),D.Z(97,0,null,1,17,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(98,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,10,{contentLabel:0}),D._16(603979776,11,{_buttons:1}),D._16(603979776,12,{_icons:1}),D.Y(102,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(104,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(105,16384,[[10,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["是否推流"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(108,0,null,4,5,"ion-toggle",[["checked","true"]],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"]],function(e,t,n){var l=!0,i=e.component;if("keyup"===t){l=!1!==D._13(e,109)._keyup(n)&&l}if("ngModelChange"===t){l=!1!==(i.isPublish=n)&&l}return l},ct.b,ct.a)),D.Y(109,1228800,null,0,dt.a,[tt.a,Oe.a,De.a,D.j,D.z,ht.a,[2,et.a],Ne.l,Ye.a,D.u],{checked:[0,"checked"]},null),D._15(1024,null,st.e,function(e){return[e]},[dt.a]),D.Y(111,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(113,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n\n\n  "])),(e()(),D.Z(116,0,null,1,17,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(117,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,13,{contentLabel:0}),D._16(603979776,14,{_buttons:1}),D._16(603979776,15,{_icons:1}),D.Y(121,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(123,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(124,16384,[[13,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["是否推音频"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(127,0,null,4,5,"ion-toggle",[["checked","true"]],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"]],function(e,t,n){var l=!0,i=e.component;if("keyup"===t){l=!1!==D._13(e,128)._keyup(n)&&l}if("ngModelChange"===t){l=!1!==(i.isPublishAudio=n)&&l}return l},ct.b,ct.a)),D.Y(128,1228800,null,0,dt.a,[tt.a,Oe.a,De.a,D.j,D.z,ht.a,[2,et.a],Ne.l,Ye.a,D.u],{checked:[0,"checked"]},null),D._15(1024,null,st.e,function(e){return[e]},[dt.a]),D.Y(130,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(132,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n\n\n  "])),(e()(),D.Z(135,0,null,1,17,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(136,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,16,{contentLabel:0}),D._16(603979776,17,{_buttons:1}),D._16(603979776,18,{_icons:1}),D.Y(140,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(142,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(143,16384,[[16,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["是否推视频"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(146,0,null,4,5,"ion-toggle",[["checked","true"]],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"]],function(e,t,n){var l=!0,i=e.component;if("keyup"===t){l=!1!==D._13(e,147)._keyup(n)&&l}if("ngModelChange"===t){l=!1!==(i.isPublishVideo=n)&&l}return l},ct.b,ct.a)),D.Y(147,1228800,null,0,dt.a,[tt.a,Oe.a,De.a,D.j,D.z,ht.a,[2,et.a],Ne.l,Ye.a,D.u],{checked:[0,"checked"]},null),D._15(1024,null,st.e,function(e){return[e]},[dt.a]),D.Y(149,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(151,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n\n  "])),(e()(),D.Z(154,0,null,1,17,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(155,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,19,{contentLabel:0}),D._16(603979776,20,{_buttons:1}),D._16(603979776,21,{_icons:1}),D.Y(159,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(161,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(162,16384,[[19,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["是否拉音频"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(165,0,null,4,5,"ion-toggle",[["checked","true"]],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"]],function(e,t,n){var l=!0,i=e.component;if("keyup"===t){l=!1!==D._13(e,166)._keyup(n)&&l}if("ngModelChange"===t){l=!1!==(i.isPullAudio=n)&&l}return l},ct.b,ct.a)),D.Y(166,1228800,null,0,dt.a,[tt.a,Oe.a,De.a,D.j,D.z,ht.a,[2,et.a],Ne.l,Ye.a,D.u],{checked:[0,"checked"]},null),D._15(1024,null,st.e,function(e){return[e]},[dt.a]),D.Y(168,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(170,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n\n\n  "])),(e()(),D.Z(173,0,null,1,17,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(174,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,22,{contentLabel:0}),D._16(603979776,23,{_buttons:1}),D._16(603979776,24,{_icons:1}),D.Y(178,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(180,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(181,16384,[[22,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["是否拉视频"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(184,0,null,4,5,"ion-toggle",[["checked","true"]],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"]],function(e,t,n){var l=!0,i=e.component;if("keyup"===t){l=!1!==D._13(e,185)._keyup(n)&&l}if("ngModelChange"===t){l=!1!==(i.isPullVideo=n)&&l}return l},ct.b,ct.a)),D.Y(185,1228800,null,0,dt.a,[tt.a,Oe.a,De.a,D.j,D.z,ht.a,[2,et.a],Ne.l,Ye.a,D.u],{checked:[0,"checked"]},null),D._15(1024,null,st.e,function(e){return[e]},[dt.a]),D.Y(187,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(189,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n\n\n\n  "])),(e()(),D.Z(192,0,null,1,2,"button",[["full",""],["ion-button",""],["margin-top",""],["tappable",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.openRoom()&&l}return l},gt.b,gt.a)),D.Y(193,1097728,null,0,ft.a,[[8,""],Oe.a,D.j,D.z],{full:[0,"full"]},null),(e()(),D._18(-1,0,["开始视频通话"])),(e()(),D._18(-1,1,["\n\n"])),(e()(),D._18(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,"primary");e(t,55,0,n.roomId);e(t,58,0,"text");e(t,73,0,n.appId);e(t,76,0,"text");e(t,91,0,n.signUrl);e(t,94,0,"text");e(t,109,0,"true");e(t,111,0,n.isPublish);e(t,128,0,"true");e(t,130,0,n.isPublishAudio);e(t,147,0,"true");e(t,149,0,n.isPublishVideo);e(t,166,0,"true");e(t,168,0,n.isPullAudio);e(t,185,0,"true");e(t,187,0,n.isPullVideo);e(t,193,0,"")},function(e,t){e(t,3,0,D._13(t,4)._sbPadding);e(t,40,0,D._13(t,41).statusbarPadding,D._13(t,41)._hasRefresher);e(t,54,0,D._13(t,57).ngClassUntouched,D._13(t,57).ngClassTouched,D._13(t,57).ngClassPristine,D._13(t,57).ngClassDirty,D._13(t,57).ngClassValid,D._13(t,57).ngClassInvalid,D._13(t,57).ngClassPending);e(t,72,0,D._13(t,75).ngClassUntouched,D._13(t,75).ngClassTouched,D._13(t,75).ngClassPristine,D._13(t,75).ngClassDirty,D._13(t,75).ngClassValid,D._13(t,75).ngClassInvalid,D._13(t,75).ngClassPending);e(t,90,0,D._13(t,93).ngClassUntouched,D._13(t,93).ngClassTouched,D._13(t,93).ngClassPristine,D._13(t,93).ngClassDirty,D._13(t,93).ngClassValid,D._13(t,93).ngClassInvalid,D._13(t,93).ngClassPending);e(t,108,0,D._13(t,109)._disabled,D._13(t,109)._value,D._13(t,109)._activated,D._13(t,113).ngClassUntouched,D._13(t,113).ngClassTouched,D._13(t,113).ngClassPristine,D._13(t,113).ngClassDirty,D._13(t,113).ngClassValid,D._13(t,113).ngClassInvalid,D._13(t,113).ngClassPending);e(t,127,0,D._13(t,128)._disabled,D._13(t,128)._value,D._13(t,128)._activated,D._13(t,132).ngClassUntouched,D._13(t,132).ngClassTouched,D._13(t,132).ngClassPristine,D._13(t,132).ngClassDirty,D._13(t,132).ngClassValid,D._13(t,132).ngClassInvalid,D._13(t,132).ngClassPending);e(t,146,0,D._13(t,147)._disabled,D._13(t,147)._value,D._13(t,147)._activated,D._13(t,151).ngClassUntouched,D._13(t,151).ngClassTouched,D._13(t,151).ngClassPristine,D._13(t,151).ngClassDirty,D._13(t,151).ngClassValid,D._13(t,151).ngClassInvalid,D._13(t,151).ngClassPending);e(t,165,0,D._13(t,166)._disabled,D._13(t,166)._value,D._13(t,166)._activated,D._13(t,170).ngClassUntouched,D._13(t,170).ngClassTouched,D._13(t,170).ngClassPristine,D._13(t,170).ngClassDirty,D._13(t,170).ngClassValid,D._13(t,170).ngClassInvalid,D._13(t,170).ngClassPending);e(t,184,0,D._13(t,185)._disabled,D._13(t,185)._value,D._13(t,185)._activated,D._13(t,189).ngClassUntouched,D._13(t,189).ngClassTouched,D._13(t,189).ngClassPristine,D._13(t,189).ngClassDirty,D._13(t,189).ngClassValid,D._13(t,189).ngClassInvalid,D._13(t,189).ngClassPending)})}function R(e){return D._19(0,[(e()(),D.Z(0,0,null,null,6,"ion-chip",[],null,null,null,null,null)),D.Y(1,16384,null,0,Pt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n            "])),(e()(),D.Z(3,0,null,null,2,"ion-label",[["color","secondary"]],null,null,null,null,null)),D.Y(4,16384,null,0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(e()(),D._18(5,null,["","(",")"])),(e()(),D._18(-1,null,["\n          "]))],function(e,t){e(t,4,0,"secondary")},function(e,t){e(t,5,0,t.parent.context.$implicit.stream_id,t.component.status[t.parent.context.$implicit.stream_id])})}function P(e){return D._19(0,[(e()(),D.Z(0,0,[[2,0],["subVideo",1]],null,1,"video",[["autoplay",""],["playsinline",""]],[[8,"id",0]],null,null,null,null)),(e()(),D._18(-1,null,["\n            您的浏览器不支持 video 标签。\n          "]))],null,function(e,t){e(t,0,0,D._2(1,"",t.parent.context.$implicit.stream_id,""))})}function I(e){return D._19(0,[(e()(),D.Z(0,0,null,null,8,"ion-col",[["class","col"],["col-sm-4",""]],null,null,null,null,null)),D.Y(1,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.U(16777216,null,null,1,null,R)),D.Y(4,16384,null,0,pt.i,[D.I,D.F],{ngIf:[0,"ngIf"]},null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.U(16777216,null,null,1,null,P)),D.Y(7,16384,null,0,pt.i,[D.I,D.F],{ngIf:[0,"ngIf"]},null),(e()(),D._18(-1,null,["\n        "]))],function(e,t){e(t,4,0,t.context.index<3);e(t,7,0,t.context.index<3)},null)}function k(e){return D._19(0,[D._16(402653184,1,{localVideo:0}),D._16(671088640,2,{subVideoList:1}),(e()(),D.Z(2,0,null,null,92,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Je.b,Je.a)),D.Y(3,4374528,null,0,Qe.a,[Oe.a,De.a,Ye.a,D.j,D.z,ze.a,Ke.a,D.u,[2,we.a],[2,Ue.a]],null,null),(e()(),D._18(-1,1,["\n  "])),(e()(),D.Z(5,0,null,1,62,"ion-grid",[["class","topRow grid"]],null,null,null,null,null)),D.Y(6,16384,null,0,yt.a,[],null,null),(e()(),D._18(-1,null,["\n    "])),(e()(),D.Z(8,0,null,null,58,"ion-row",[["class","row"]],null,null,null,null,null)),D.Y(9,16384,null,0,Ct.a,[],null,null),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(11,0,null,null,36,"ion-col",[["class","col col"],["col-8",""]],null,null,null,null,null)),D.Y(12,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(14,0,null,null,6,"button",[["class","fab-in-list show"],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.toggleCam()&&l}return l},It.b,It.a)),D.Y(15,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(17,0,null,0,2,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(18,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,null,["\n          "])),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(22,0,null,null,5,"button",[["class","fab-in-list show"],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.toggleMic()&&l}return l},It.b,It.a)),D.Y(23,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(25,0,null,0,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(26,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(29,0,null,null,5,"button",[["class","fab-in-list show"],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.toggleVolume()&&l}return l},It.b,It.a)),D.Y(30,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n        "])),(e()(),D.Z(32,0,null,0,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(33,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(36,0,null,null,7,"button",[["class","fab-in-list show"],["ion-fab",""]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.changeUseCam()&&l}return l},It.b,It.a)),D.Y(37,278528,null,0,pt.g,[D.p,D.q,D.j,D.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),D._14(38,{cannotToggleCam:0}),D.Y(39,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(41,0,null,0,1,"ion-icon",[["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(42,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n          "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(49,0,null,null,16,"ion-col",[["class","col col"],["col-4",""]],null,null,null,null,null)),D.Y(50,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(52,0,null,null,5,"button",[["class","fab-in-list show"],["float-start",""],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.showLogs()&&l}return l},It.b,It.a)),D.Y(53,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n                    "])),(e()(),D.Z(55,0,null,0,1,"span",[["class","button-inner"]],null,null,null,null,null)),(e()(),D._18(-1,null,["\n                        日志\n                    "])),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(59,0,null,null,5,"button",[["class","fab-in-list show"],["float-start",""],["ion-fab",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.logoutRoom()&&l}return l},It.b,It.a)),D.Y(60,49152,null,0,kt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D.Z(62,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),D.Y(63,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),(e()(),D._18(-1,0,["\n        "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n    "])),(e()(),D._18(-1,null,["\n\n\n\n  "])),(e()(),D._18(-1,1,["\n  "])),(e()(),D.Z(69,0,null,1,23,"ion-grid",[["class","subVideo grid"]],null,null,null,null,null)),D.Y(70,16384,null,0,yt.a,[],null,null),(e()(),D._18(-1,null,["\n    "])),(e()(),D.Z(72,0,null,null,19,"ion-row",[["class","row"]],null,null,null,null,null)),D.Y(73,16384,null,0,Ct.a,[],null,null),(e()(),D._18(-1,null,["\n\n      "])),(e()(),D.Z(75,0,null,null,12,"ion-col",[["class","col"],["col-sm-4",""]],null,null,null,null,null)),D.Y(76,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(78,0,null,null,6,"ion-chip",[],null,null,null,null,null)),D.Y(79,16384,null,0,Pt.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(81,0,null,null,2,"ion-label",[["color","secondary"]],null,null,null,null,null)),D.Y(82,16384,null,0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(e()(),D._18(83,null,["","(",")"])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(86,0,[[1,0],["localVideo",1]],null,0,"video",[["autoplay",""],["muted",""],["playsinline",""]],null,null,null,null,null)),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,null,["\n\n\n        "])),(e()(),D.U(16777216,null,null,1,null,I)),D.Y(90,802816,null,0,pt.h,[D.I,D.F,D.p],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D._18(-1,null,["\n\n  "])),(e()(),D._18(-1,1,["\n  "])),(e()(),D._18(-1,1,["\n"])),(e()(),D._18(-1,null,["\n\n\n"]))],function(e,t){var n=t.component;e(t,18,0,n.offOnCam);e(t,26,0,n.offOnMic);e(t,33,0,n.offOnVolume);e(t,37,0,"fab-in-list show",e(t,38,0,!n.isSuportMultipCam));e(t,42,0,n.changeCam);e(t,63,0,"close");e(t,82,0,"secondary");e(t,90,0,n.useLocalStreamList,n.identify)},function(e,t){var n=t.component;e(t,2,0,D._13(t,3).statusbarPadding,D._13(t,3)._hasRefresher);e(t,17,0,D._13(t,18)._hidden);e(t,25,0,D._13(t,26)._hidden);e(t,32,0,D._13(t,33)._hidden);e(t,36,0,!n.isSuportMultipCam);e(t,41,0,D._13(t,42)._hidden);e(t,62,0,D._13(t,63)._hidden);e(t,83,0,"me:"+n.publishStreamId,n.status[n.publishStreamId])})}function L(e){return D._19(0,[(e()(),D.Z(0,0,null,null,6,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(1,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,5,{contentLabel:0}),D._16(603979776,6,{_buttons:1}),D._16(603979776,7,{_icons:1}),D.Y(5,16384,null,0,lt.a,[],null,null),(e()(),D._18(6,2,["",""]))],null,function(e,t){e(t,6,0,t.context.$implicit)})}function M(e){return D._19(0,[(e()(),D.Z(0,0,null,null,12,null,null,null,null,null,null,null)),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(2,0,null,null,6,"ion-list-header",[["class","item"]],null,null,null,$e.b,$e.a)),D.Y(3,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,2,{contentLabel:0}),D._16(603979776,3,{_buttons:1}),D._16(603979776,4,{_icons:1}),D.Y(7,16384,null,0,Wt.a,[Oe.a,D.z,D.j,[8,null]],null,null),(e()(),D._18(8,2,["\n        ","\n      "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D.U(16777216,null,null,1,null,L)),D.Y(11,802816,null,0,pt.h,[D.I,D.F,D.p],{ngForOf:[0,"ngForOf"]},null),(e()(),D._18(-1,null,["\n    "]))],function(e,t){e(t,11,0,t.context.$implicit.details)},function(e,t){e(t,8,0,t.context.$implicit.version)})}function w(e){return D._19(0,[D._16(402653184,1,{navBar:0}),(e()(),D.Z(1,0,null,null,10,"ion-header",[],null,null,null,null,null)),D.Y(2,16384,null,0,qe.a,[Oe.a,D.j,D.z,[2,we.a]],null,null),(e()(),D._18(-1,null,["\n  "])),(e()(),D.Z(4,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,He.b,He.a)),D.Y(5,49152,[[1,4]],0,Be.a,[ze.a,[2,we.a],[2,Ue.a],Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,3,["\n    "])),(e()(),D.Z(7,0,null,3,2,"ion-title",[],null,null,null,Fe.b,Fe.a)),D.Y(8,49152,null,0,Ge.a,[Oe.a,D.j,D.z,[2,We.a],[2,Be.a]],null,null),(e()(),D._18(-1,0,["\n      sdk版本更新明细\n    "])),(e()(),D._18(-1,3,["\n  "])),(e()(),D._18(-1,null,["\n"])),(e()(),D._18(-1,null,["\n\n"])),(e()(),D.Z(13,0,null,null,9,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Je.b,Je.a)),D.Y(14,4374528,null,0,Qe.a,[Oe.a,De.a,Ye.a,D.j,D.z,ze.a,Ke.a,D.u,[2,we.a],[2,Ue.a]],null,null),(e()(),D._18(-1,1,["\n  "])),(e()(),D.Z(16,0,null,1,5,"ion-list",[],null,null,null,null,null)),D.Y(17,16384,null,0,Xe.a,[Oe.a,D.j,D.z,De.a,Ne.l,Ye.a],null,null),(e()(),D._18(-1,null,["\n\n    "])),(e()(),D.U(16777216,null,null,1,null,M)),D.Y(20,802816,null,0,pt.h,[D.I,D.F,D.p],{ngForOf:[0,"ngForOf"]},null),(e()(),D._18(-1,null,["\n\n  "])),(e()(),D._18(-1,1,["\n\n"])),(e()(),D._18(-1,null,["\n"]))],function(e,t){e(t,20,0,t.component.items)},function(e,t){e(t,4,0,D._13(t,5)._hidden,D._13(t,5)._sbPadding);e(t,13,0,D._13(t,14).statusbarPadding,D._13(t,14)._hasRefresher)})}function U(e){return D._19(0,[(e()(),D.Z(0,0,null,null,37,"ion-header",[],null,null,null,null,null)),D.Y(1,16384,null,0,qe.a,[Oe.a,D.j,D.z,[2,we.a]],null,null),(e()(),D._18(-1,null,["\n  "])),(e()(),D.Z(3,0,null,null,33,"ion-toolbar",[["class","toolbar"],["color","primary"]],[[2,"statusbar-padding",null]],null,null,bt.b,bt.a)),D.Y(4,49152,null,0,We.a,[Oe.a,D.j,D.z],{color:[0,"color"]},null),(e()(),D._18(-1,3,["\n    "])),(e()(),D.Z(6,0,null,3,29,"ion-title",[],null,null,null,Fe.b,Fe.a)),D.Y(7,49152,null,0,Ge.a,[Oe.a,D.j,D.z,[2,We.a],[2,Be.a]],null,null),(e()(),D._18(-1,0,["\n      "])),(e()(),D.Z(9,0,null,0,25,"ion-grid",[["class","grid"]],null,null,null,null,null)),D.Y(10,16384,null,0,yt.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(12,0,null,null,21,"ion-row",[["class","row"]],null,null,null,null,null)),D.Y(13,16384,null,0,Ct.a,[],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(15,0,null,null,2,"ion-col",[["class","col"],["col-4",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.goback()&&l}return l},null,null)),D.Y(16,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["返回"])),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(19,0,null,null,3,"ion-col",[["class","col"],["col-4",""],["style","text-align: center"]],null,null,null,null,null)),D.Y(20,16384,null,0,St.a,[],null,null),(e()(),D.Z(21,0,null,null,1,"h4",[],null,null,null,null,null)),(e()(),D._18(-1,null,["VideoTalk"])),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(24,0,null,null,3,"ion-col",[["class","col"],["col-2",""]],null,null,null,null,null)),D.Y(25,16384,null,0,St.a,[],null,null),(e()(),D.Z(26,0,null,null,1,"h6",[],null,null,null,null,null)),(e()(),D._18(-1,null,[" "])),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(29,0,null,null,3,"ion-col",[["class","col"],["col-2",""]],null,null,null,null,null)),D.Y(30,16384,null,0,St.a,[],null,null),(e()(),D.Z(31,0,null,null,1,"h6",[],null,null,null,null,null)),(e()(),D._18(-1,null,[" "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,0,["\n    "])),(e()(),D._18(-1,3,["\n  "])),(e()(),D._18(-1,null,["\n"])),(e()(),D._18(-1,null,["\n\n\n"])),(e()(),D.Z(39,0,null,null,97,"ion-content",[["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Je.b,Je.a)),D.Y(40,4374528,null,0,Qe.a,[Oe.a,De.a,Ye.a,D.j,D.z,ze.a,Ke.a,D.u,[2,we.a],[2,Ue.a]],null,null),(e()(),D._18(-1,1,["\n\n  "])),(e()(),D.Z(42,0,null,1,16,"ion-item",[["class","roomId item item-block"]],null,null,null,$e.b,$e.a)),D.Y(43,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,1,{contentLabel:0}),D._16(603979776,2,{_buttons:1}),D._16(603979776,3,{_icons:1}),D.Y(47,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(49,0,null,1,2,"ion-label",[["floating",""]],null,null,null,null,null)),D.Y(50,16384,[[1,4]],0,it.a,[Oe.a,D.j,D.z,[8,""],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["配置标题"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(53,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.title=n)&&l}return l},rt.b,rt.a)),D.Y(54,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(56,16384,null,0,st.g,[st.f],null,null),D.Y(57,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n\n  "])),(e()(),D.Z(60,0,null,1,16,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(61,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,4,{contentLabel:0}),D._16(603979776,5,{_buttons:1}),D._16(603979776,6,{_icons:1}),D.Y(65,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(67,0,null,1,2,"ion-label",[["floating",""]],null,null,null,null,null)),D.Y(68,16384,[[4,4]],0,it.a,[Oe.a,D.j,D.z,[8,""],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["appid"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(71,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.appId=n)&&l}return l},rt.b,rt.a)),D.Y(72,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(74,16384,null,0,st.g,[st.f],null,null),D.Y(75,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n\n  "])),(e()(),D.Z(78,0,null,1,16,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(79,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,7,{contentLabel:0}),D._16(603979776,8,{_buttons:1}),D._16(603979776,9,{_icons:1}),D.Y(83,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(85,0,null,1,2,"ion-label",[["floating",""]],null,null,null,null,null)),D.Y(86,16384,[[7,4]],0,it.a,[Oe.a,D.j,D.z,[8,""],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["appKey"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(89,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.appKey=n)&&l}return l},rt.b,rt.a)),D.Y(90,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(92,16384,null,0,st.g,[st.f],null,null),D.Y(93,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n\n  "])),(e()(),D.Z(96,0,null,1,17,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(97,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,10,{contentLabel:0}),D._16(603979776,11,{_buttons:1}),D._16(603979776,12,{_icons:1}),D.Y(101,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(103,0,null,1,2,"ion-label",[],null,null,null,null,null)),D.Y(104,16384,[[10,4]],0,it.a,[Oe.a,D.j,D.z,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["测试环境"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(107,0,null,4,5,"ion-toggle",[["checked","false"]],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"]],function(e,t,n){var l=!0,i=e.component;if("keyup"===t){l=!1!==D._13(e,108)._keyup(n)&&l}if("ngModelChange"===t){l=!1!==(i.testenv=n)&&l}return l},ct.b,ct.a)),D.Y(108,1228800,null,0,dt.a,[tt.a,Oe.a,De.a,D.j,D.z,ht.a,[2,et.a],Ne.l,Ye.a,D.u],{checked:[0,"checked"]},null),D._15(1024,null,st.e,function(e){return[e]},[dt.a]),D.Y(110,671744,null,0,st.h,[[8,null],[8,null],[8,null],[2,st.e]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(112,16384,null,0,st.g,[st.f],null,null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n\n  "])),(e()(),D.Z(115,0,null,1,16,"ion-item",[["class","item item-block"]],null,null,null,$e.b,$e.a)),D.Y(116,1097728,null,3,et.a,[tt.a,Oe.a,D.j,D.z,[2,nt.a]],null,null),D._16(335544320,13,{contentLabel:0}),D._16(603979776,14,{_buttons:1}),D._16(603979776,15,{_icons:1}),D.Y(120,16384,null,0,lt.a,[],null,null),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(122,0,null,1,2,"ion-label",[["floating",""]],null,null,null,null,null)),D.Y(123,16384,[[13,4]],0,it.a,[Oe.a,D.j,D.z,[8,""],[8,null],[8,null],[8,null]],null,null),(e()(),D._18(-1,null,["businessType"])),(e()(),D._18(-1,2,["\n    "])),(e()(),D.Z(126,0,null,3,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,t,n){var l=!0;if("ngModelChange"===t){l=!1!==(e.component.businessType=n)&&l}return l},rt.b,rt.a)),D.Y(127,671744,null,0,st.h,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),D._15(2048,null,st.f,null,[st.h]),D.Y(129,16384,null,0,st.g,[st.f],null,null),D.Y(130,5423104,null,0,ot.a,[Oe.a,De.a,tt.a,ze.a,D.j,D.z,[2,Qe.a],[2,et.a],[2,st.f],Ye.a],{type:[0,"type"]},null),(e()(),D._18(-1,2,["\n  "])),(e()(),D._18(-1,1,["\n\n\n\n\n\n\n  "])),(e()(),D.Z(133,0,null,1,2,"button",[["full",""],["ion-button",""],["margin-top",""],["tappable",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.openQRCode()&&l}return l},gt.b,gt.a)),D.Y(134,1097728,null,0,ft.a,[[8,""],Oe.a,D.j,D.z],{full:[0,"full"]},null),(e()(),D._18(-1,0,["获取二维码"])),(e()(),D._18(-1,1,["\n\n"])),(e()(),D._18(-1,null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,"primary");e(t,54,0,n.title);e(t,57,0,"text");e(t,72,0,n.appId);e(t,75,0,"text");e(t,90,0,n.appKey);e(t,93,0,"text");e(t,108,0,"false");e(t,110,0,n.testenv);e(t,127,0,n.businessType);e(t,130,0,"text");e(t,134,0,"")},function(e,t){e(t,3,0,D._13(t,4)._sbPadding);e(t,39,0,D._13(t,40).statusbarPadding,D._13(t,40)._hasRefresher);e(t,53,0,D._13(t,56).ngClassUntouched,D._13(t,56).ngClassTouched,D._13(t,56).ngClassPristine,D._13(t,56).ngClassDirty,D._13(t,56).ngClassValid,D._13(t,56).ngClassInvalid,D._13(t,56).ngClassPending);e(t,71,0,D._13(t,74).ngClassUntouched,D._13(t,74).ngClassTouched,D._13(t,74).ngClassPristine,D._13(t,74).ngClassDirty,D._13(t,74).ngClassValid,D._13(t,74).ngClassInvalid,D._13(t,74).ngClassPending);e(t,89,0,D._13(t,92).ngClassUntouched,D._13(t,92).ngClassTouched,D._13(t,92).ngClassPristine,D._13(t,92).ngClassDirty,D._13(t,92).ngClassValid,D._13(t,92).ngClassInvalid,D._13(t,92).ngClassPending);e(t,107,0,D._13(t,108)._disabled,D._13(t,108)._value,D._13(t,108)._activated,D._13(t,112).ngClassUntouched,D._13(t,112).ngClassTouched,D._13(t,112).ngClassPristine,D._13(t,112).ngClassDirty,D._13(t,112).ngClassValid,D._13(t,112).ngClassInvalid,D._13(t,112).ngClassPending);e(t,126,0,D._13(t,129).ngClassUntouched,D._13(t,129).ngClassTouched,D._13(t,129).ngClassPristine,D._13(t,129).ngClassDirty,D._13(t,129).ngClassValid,D._13(t,129).ngClassInvalid,D._13(t,129).ngClassPending)})}function z(e){return D._19(0,[D._16(402653184,1,{qrData:0}),(e()(),D._18(-1,null,["\n    "])),(e()(),D.Z(2,0,null,null,28,"ion-header",[],null,null,null,null,null)),D.Y(3,16384,null,0,qe.a,[Oe.a,D.j,D.z,[2,we.a]],null,null),(e()(),D._18(-1,null,["\n      "])),(e()(),D.Z(5,0,null,null,24,"ion-toolbar",[["class","toolbar"]],[[2,"statusbar-padding",null]],null,null,bt.b,bt.a)),D.Y(6,49152,null,0,We.a,[Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,3,["\n        "])),(e()(),D.Z(8,0,null,3,2,"ion-title",[],null,null,null,Fe.b,Fe.a)),D.Y(9,49152,null,0,Ge.a,[Oe.a,D.j,D.z,[2,We.a],[2,Be.a]],null,null),(e()(),D._18(-1,0,["\n           demo设置页面配置参数（ios，android）\n        "])),(e()(),D._18(-1,3,["\n        "])),(e()(),D.Z(12,0,null,1,16,"ion-buttons",[["start",""]],null,null,null,null,null)),D.Y(13,16384,null,1,en.a,[Oe.a,D.j,D.z,[2,We.a],[2,Be.a]],null,null),D._16(603979776,2,{_buttons:1}),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(16,0,null,null,11,"button",[["ion-button",""]],null,[[null,"click"]],function(e,t,n){var l=!0;if("click"===t){l=!1!==e.component.dismiss()&&l}return l},gt.b,gt.a)),D.Y(17,1097728,[[2,4]],0,ft.a,[[8,""],Oe.a,D.j,D.z],null,null),(e()(),D._18(-1,0,["\n            "])),(e()(),D.Z(19,0,null,0,3,"span",[["color","primary"],["ion-text",""],["showWhen","ios"]],[[2,"hidden-show-when",null]],null,null,null,null)),D.Y(20,147456,null,0,tn.a,[[8,"ios"],De.a,D.u],null,null),D.Y(21,16384,null,0,nn.a,[Oe.a,D.j,D.z],{color:[0,"color"]},null),(e()(),D._18(-1,null,["取消"])),(e()(),D._18(-1,0,["\n            "])),(e()(),D.Z(24,0,null,0,2,"ion-icon",[["name","md-close"],["role","img"],["showWhen","android, windows"]],[[2,"hide",null],[2,"hidden-show-when",null]],null,null,null,null)),D.Y(25,147456,null,0,Lt.a,[Oe.a,D.j,D.z],{name:[0,"name"]},null),D.Y(26,147456,null,0,tn.a,[[8,"android, windows"],De.a,D.u],null,null),(e()(),D._18(-1,0,["\n          "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,3,["\n      "])),(e()(),D._18(-1,null,["\n    "])),(e()(),D._18(-1,null,["\n    "])),(e()(),D.Z(32,0,null,null,45,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Je.b,Je.a)),D.Y(33,4374528,null,0,Qe.a,[Oe.a,De.a,Ye.a,D.j,D.z,ze.a,Ke.a,D.u,[2,we.a],[2,Ue.a]],null,null),(e()(),D._18(-1,1,["\n      "])),(e()(),D.Z(35,0,null,1,41,"ion-grid",[["class","grid"]],null,null,null,null,null)),D.Y(36,16384,null,0,yt.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(38,0,null,null,12,"ion-row",[["class","row"]],null,null,null,null,null)),D.Y(39,16384,null,0,Ct.a,[],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(41,0,null,null,1,"ion-col",[["class","col"]],null,null,null,null,null)),D.Y(42,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(44,0,null,null,2,"ion-col",[["class","col"]],null,null,null,null,null)),D.Y(45,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,[" 扫一扫"])),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(48,0,null,null,1,"ion-col",[["class","col"]],null,null,null,null,null)),D.Y(49,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D.Z(52,0,null,null,14,"ion-row",[["class","row"]],null,null,null,null,null)),D.Y(53,16384,null,0,Ct.a,[],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(55,0,null,null,1,"ion-col",[["class","col"]],null,null,null,null,null)),D.Y(56,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(58,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),D.Y(59,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n            "])),(e()(),D.Z(61,0,[[1,0],["qrData",1]],null,0,"div",[],null,null,null,null,null)),(e()(),D._18(-1,null,["\n          "])),(e()(),D._18(-1,null,["\n          "])),(e()(),D.Z(64,0,null,null,1,"ion-col",[["class","col"]],null,null,null,null,null)),D.Y(65,16384,null,0,St.a,[],null,null),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n          "])),(e()(),D._18(-1,null,["\n          "])),(e()(),D._18(-1,null,["\n            "])),(e()(),D._18(-1,null,["\n            "])),(e()(),D._18(-1,null,["\n          "])),(e()(),D._18(-1,null,["\n          "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n        "])),(e()(),D._18(-1,null,["\n      "])),(e()(),D._18(-1,1,["\n    \n    "])),(e()(),D._18(-1,null,["\n  "]))],function(e,t){e(t,21,0,"primary");e(t,25,0,"md-close")},function(e,t){e(t,5,0,D._13(t,6)._sbPadding);e(t,19,0,!D._13(t,20).isMatch);e(t,24,0,D._13(t,25)._hidden,!D._13(t,26).isMatch);e(t,32,0,D._13(t,33).statusbarPadding,D._13(t,33)._hasRefresher)})}Object.defineProperty(t,"__esModule",{value:!0});var O=n(52),D=n(0),N=(n(3),n(25),n(92)),A=n(93),x=n(94),Y=function(){function e(){}return e.isSupportWebRtc=function(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&RTCPeerConnection)},e.isPC=function(){var e={win:!1,mac:!1,xll:!1},t=navigator.platform;return e.win=0==t.indexOf("Win"),e.mac=0==t.indexOf("Mac"),e.xll="X11"==t||0==t.indexOf("Linux"),!!(e.win||e.mac||e.xll)},e.isIphone=function(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("ipad")||-1!=e.indexOf("iphone os")},e.isSafari=function(){var e=navigator.userAgent;return-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version")},e.generateTokenInfo=function(e){var t=(new Date).getTime()/1e3+3600;t=Number.parseInt(t+"");var n=md5(Math.random()+""),l=e+"a053dc0e074cf8e283128c326d018179"+n+t,i={ver:1,hash:md5(l),nonce:n,expired:t};return Base64.encode(JSON.stringify(i))},e.utf16to8=function(e){var t,n,l,i;for(t="",l=e.length,n=0;n<l;n++)(i=e.charCodeAt(n))>=1&&i<=127?t+=e.charAt(n):i>2047?(t+=String.fromCharCode(224|i>>12&15),t+=String.fromCharCode(128|i>>6&63),t+=String.fromCharCode(128|i>>0&63)):(t+=String.fromCharCode(192|i>>6&31),t+=String.fromCharCode(128|i>>0&63));return t},e}(),j=n(56),Z=function(){function e(e){this.http=e,this.config={appId:229059616,idName:"",nickName:"",server:"",loginTokenUrl:"",loginAuthTokenUrl:"",logUrl:"",videoQuality:2,logLevel:0,audienceCreateRoom:!1,audio:!0,audioInput:null,video:!0,videoInput:null,horizontal:!0,muted:!1},this.count=0,this.audioInputList=[],this.videoInputList=[],this.init()}return e.prototype.init=function(){var e=this;void 0!==j.ZegoClient?this.initEnumDevices():setTimeout(function(){e.init()},1e3)},Object.defineProperty(e.prototype,"appId",{get:function(){return this.config.appId||229059616},set:function(e){e&&(this.config.appId=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idName",{get:function(){return this.config.idName||(this.config.idName=""+(new Date).getTime()+Math.floor(1e5*Math.random())),this.config.idName},set:function(e){this.config.idName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nickName",{get:function(){return this.config.nickName||"u"+this.idName},set:function(e){e&&(this.config.nickName=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"server",{get:function(){return this.config.server||"wss://wsliveroom"+this.appId+"-api.zego.im:8282/ws"},set:function(e){e&&(this.config.server=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loginTokenUrl",{get:function(){return this.config.loginTokenUrl||"https://wsliveroom"+this.appId+"-api.zego.im:8282/token"},set:function(e){e&&(this.config.loginTokenUrl=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loginAuthTokenUrl",{get:function(){return this.config.loginAuthTokenUrl},set:function(e){e&&(this.config.loginAuthTokenUrl=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logUrl",{get:function(){return this.config.logUrl||""},set:function(e){e&&(this.config.logUrl=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logLevel",{get:function(){return this.config.logLevel},set:function(e){e&&(this.config.logLevel=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audienceCreateRoom",{get:function(){return this.config.audienceCreateRoom},set:function(e){this.config.audienceCreateRoom=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audio",{get:function(){return this.config.audio},set:function(e){this.config.audio=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioInput",{get:function(){return this.config.audioInput},set:function(e){e&&(this.config.audioInput=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"video",{get:function(){return this.config.video},set:function(e){this.config.video=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"videoInput",{get:function(){return this.config.videoInput},set:function(e){e&&(this.config.videoInput=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontal",{get:function(){return this.config.horizontal},set:function(e){this.config.horizontal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this.config.muted},set:function(e){this.config.muted=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"videoQuality",{get:function(){return this.config.videoQuality||2},set:function(e){e&&(this.config.videoQuality=e)},enumerable:!0,configurable:!0}),e.prototype.getParameterByName=function(e,t){t||(t=window.location.href);var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},e.prototype.getToken=function(e){var t="";return e&&(t=Y.generateTokenInfo(this.appId),this.loginTokenUrl="https://wsliveroom-demo.zego.im:8282/token"),this.http.get(this.loginTokenUrl,{params:{app_id:this.appId+"",id_name:this.idName,cgi_token:t},responseType:"text"})},e.prototype.getAuthToken=function(e,t,n){return this.http.get(this.loginAuthTokenUrl,{params:{app:e,stream:t,public:n?"0":"1"}})},e.prototype.initEnumDevices=function(){var e=this;this.audioInputList=[],this.videoInputList=[];var t=0;j.ZegoClient.enumDevices(function(n){if(console.log("enumDevices"+JSON.stringify(n)),n.microphones)for(var l=0;l<n.microphones.length;l++)0===l&&(e.audioInput=n.microphones[l].deviceId),n.microphones[l].label||(n.microphones[l].label="microphone"+l),e.audioInputList.push(n.microphones[l]),console.log("microphone: "+n.microphones[l].label);if(n.cameras){Y.isIphone()&&Y.isSafari()&&n.cameras.length>0&&(t=n.cameras.length-1),e.videoInput=n.cameras[t].deviceId;for(l=0;l<n.cameras.length;l++)n.cameras[l].label||(n.cameras[l].label="camera"+l),e.videoInputList.push(n.cameras[l]),console.log("camera: "+n.cameras[l].label)}},function(e){console.error("enum device error: "+e)})},e.prototype.toggleVideo=function(e){return this.videoInputList&&this.videoInputList[e]?this.videoInputList[e].deviceId:1===this.videoInputList.length?this.videoInputList[0].deviceId:null},e}(),V=function(){function e(){}return e.prototype.transform=function(e,t){if(!e||e.length<1||!t)return e;for(var n=[],l=[],i=0;i<e.length;i++)l.push(e[i]),i%t!=t-1&&i!==e.length-1||(n.push(l.slice()),l=[]);return n},e}(),q=n(237),H=function(){function e(){}return e.format=function(e,t){t||(t=new Date);var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var l in n)new RegExp("("+l+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[l]:("00"+n[l]).substr((""+n[l]).length)));return e},e}(),B=function(){function e(e,t){var n=this;this.http=e,this.config=t,this.statck=[],this.sub=new q.BehaviorSubject("0"),this._set=new Set([]),this._reg=/#.+#/,console.log("Hello LogfigProvider Provider"),this.sub.subscribe(function(e){n.statck.length>500?n.statck.shift():n.statck.push(e)});var l=this;this.nativeConsole={log:window.console.log.bind(window),debug:window.console.debug.bind(window),warn:window.console.warn.bind(window),error:window.console.error.bind(window)};var i=function(e,t){return function(){var n=[];Array.prototype.slice.call(arguments).slice().forEach(function(t){if("string"==typeof t)n.push(t);else if("object"==typeof t)try{n.push(JSON.stringify(t))}catch(n){l.nativeConsole[e](t)}else l.nativeConsole[e](t)}),l[t](n.join(","))}};window.console.debug=i("debug","debug"),window.console.info=i("log","info"),window.console.log=i("log","info"),window.console.warn=i("warn","warning"),window.console.error=i("error","errors")}return e.prototype.sendLog=function(){return this.http.post(this.config.logUrl,this.statck.join(","))},e.prototype.debug=function(e){this.typeLog(e),100!=this.config.logLevel&&this.config.logLevel<=0&&e&&this.sub.next(H.format("hh:mm:ss S")+"|debug|"+e),this.nativeConsole.debug(e)},e.prototype.info=function(e){this.typeLog(e),100!=this.config.logLevel&&this.config.logLevel<=1&&e&&this.sub.next(H.format("hh:mm:ss S")+"|info|"+e),this.nativeConsole.log(e)},e.prototype.warning=function(e){this.typeLog(e),100!=this.config.logLevel&&this.config.logLevel<=2&&e&&this.sub.next(H.format("hh:mm:ss S")+"|warning|"+e),this.nativeConsole.warn(e)},e.prototype.errors=function(e){this.typeLog(e),100!=this.config.logLevel&&this.config.logLevel<=3&&e&&this.sub.next(H.format("hh:mm:ss S")+"|errors|"+e),this.nativeConsole.error(e)},e.prototype.typeLog=function(e){if(e&&100!=this.config.logLevel){var t=this._reg.exec(e);t&&t.length>0&&this._set.add(t[0].replace(/#/g,""))}},e}(),F=function(){function e(e,t,n,l){this.navCtrl=e,this.log=t,this.config=n,this.alertCtrl=l,this.logArray=[],this.typeArray=[],this.selectOption={},this._typeID="",this._customerKey="",this._levelID="debug",this.refreshStatus="stop",this.myInit()}return e.prototype.myInit=function(){var e=this;this.subscription=this.log.sub.subscribe(function(t){"info"===e.levelID&&t.indexOf("|debug|")>-1||"warning"===e.levelID&&(t.indexOf("|debug|")>-1||t.indexOf("|info|")>-1)||"errors"===e.levelID&&t.indexOf("|errors|")<0||(e._customerKey?t.indexOf(e._customerKey)>-1&&e.logArray.unshift(t):"###"===e.typeID?e.isOther(t)&&e.logArray.unshift(t):e.typeID?t.indexOf("#"+e.typeID+"#")>-1&&e.logArray.unshift(t):e.logArray.unshift(t))})},e.prototype.ngAfterViewInit=function(){this.logArray=this.log.statck.slice(),this.logArray.reverse(),this.typeArray=Array.from(this.log._set)},e.prototype.toggleRefresh=function(){"stop"===this.refreshStatus?(this.refreshStatus="refresh",this.subscription.unsubscribe()):(this.refreshStatus="stop",this.typeID=this._typeID,this.levelID=this._levelID,this.myInit())},Object.defineProperty(e.prototype,"typeID",{get:function(){return this._typeID},set:function(e){var t=this;this._typeID=e,this._customerKey="","###"===e?(this.logArray=this.log.statck.filter(function(e){return t.isOther(e)}),this.logArray.reverse()):e?(this.logArray=this.log.statck.filter(function(t){return t.indexOf("#"+e+"#")>-1}),this.logArray.reverse()):this.ngAfterViewInit()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"levelID",{get:function(){return this._levelID},set:function(e){this._levelID=e,"debug"===e?this.logArray=this.log.statck:"info"===e?this.logArray=this.log.statck.filter(function(e){return e.indexOf("|debug|")<0}):"warning"===e?this.logArray=this.log.statck.filter(function(e){return e.indexOf("|warning|")>-1||e.indexOf("|errors|")>-1}):"errors"===e&&(this.logArray=this.log.statck.filter(function(e){return e.indexOf("|errors|")>-1})),this.logArray.reverse()},enumerable:!0,configurable:!0}),e.prototype.isOther=function(e){for(var t=!0,n=0;n<this.typeArray.length;n++)if(e.indexOf("#"+this.typeArray[n]+"#")>-1){t=!1;break}return t},e.prototype.showPrompt=function(){var e=this;this.alertCtrl.create({title:"自定义过滤",inputs:[{name:"key",placeholder:"关键字",value:this._customerKey}],buttons:[{text:"取消",handler:function(e){console.log("Cancel clicked")}},{text:"确定",handler:function(t){t.key&&e._customerKey!==t.key&&(e._typeID="",e._customerKey=t.key,e.logArray=e.log.statck.filter(function(e){return e.indexOf(t.key)>-1}),e.logArray.reverse())}}]}).present()},e.prototype.showDetail=function(e){this.alertCtrl.create({message:e}).present()},e.prototype.sendLog=function(){var e=this;this.config.logUrl?this.log.sendLog().subscribe(function(t){e.logArray=[],e.log.statck=[]}):this.alertCtrl.create({title:"请先配置日志服务器",message:"",buttons:[{text:"确定",handler:function(){console.log("Disagree clicked")}}]}).present()},e.prototype.ionViewWillUnload=function(){this.subscription.unsubscribe()},e}(),G=0,W=1,J=function(){function e(e,t,n,l,i,r){this.navCtrl=e,this.navParams=t,this.config=n,this.slide=l,this.logger=i,this.alertCtrl=r,this.useLocalStreamList=[],this.isSuportMultipCam=!1,this.offOnCam="md-videocam",this.offOnMic="md-mic",this.offOnVolume="md-volume-up",this.changeCam="md-sync",this.addedVideo=[],this.roomId=this.navParams.get("roomId")||this.config.getParameterByName("roomId"),this.publishStreamId=this.navParams.get("publishStreamId")||"s"+this.config.idName,this.roomId||(this.logger.warning("#"+this.publishStreamId+"#roomId is empty,force to go back"),this.logoutRoom())}return e.prototype.ngAfterViewInit=function(){var e=this;void 0!==j.ZegoClient?this.init():setTimeout(function(){e.ngAfterViewInit()},1e3)},e.prototype.init=function(){var e=this;this.zg=new j.ZegoClient,this.configZego(),this.isSuportMultipCam=this.config.videoInputList.length>1,this.subVideoList.changes.subscribe(function(t){if(t.length>0){t.forEach(function(t){var n;e.addedVideo.some(function(e){return t.nativeElement.id==e.stream_id})&&(t.nativeElement.muted="md-volume-off"===e.offOnVolume,(n=e.zg.startPlayingStream(t.nativeElement.id,t.nativeElement))||(e.alertCtrl.create({title:"哎呀，播放失败啦！"}).present(),t.nativeElement.style="display:none",console.error("play "+t.nativeElement.id+" return "+n))),0}),e.addedVideo=[]}});var t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)?"pagehide":"beforeunload";window.addEventListener(t,function(t){window.event.cancelBubble=!0,console.log("beafore unload"),e.loginRoom&&(e.logoutRoom(),e.loginRoom=!1)})},e.prototype.configZego=function(){if(this.roomId){var e={appid:this.config.appId,idName:this.config.idName,nickName:this.config.nickName,server:this.config.server,logLevel:this.config.logLevel,logUrl:this.config.logUrl,remoteLogLevel:0};this.logger.info("#"+this.publishStreamId+"#config param:"+JSON.stringify(e)),this.zg.config(e),this.zg.setUserStateUpdate(!0),this.login()}},e.prototype.login=function(){var e=this;this.logger.info("#"+this.publishStreamId+"#get token start"),this.config.getToken().subscribe(function(t){e.loginToken=t,e.logger.info("#"+e.publishStreamId+"#get token success:"+t),e.logger.info("#"+e.publishStreamId+"#start login"),e.zg.login(e.roomId,2,e.loginToken,function(t){if(t.length>=4)return e.alertCtrl.create({title:"房间太拥挤，换一个吧！"}).present(),void e.logoutRoom();e.logger.info("#"+e.publishStreamId+"#login success"),e.loginRoom=!0,e.listen(),e.useLocalStreamList=e.useLocalStreamList.concat(t),e.addedVideo=e.useLocalStreamList.slice(),e.doPreviewPublish()},function(t){e.alertCtrl.create({title:"登录失败:"+t.msg}).present(),e.logger.errors("#"+e.publishStreamId+"login failed:"+t.msg)})},function(t){e.alertCtrl.create({title:"获取token失败"}).present(),e.logger.errors("#"+e.publishStreamId+"#get token failed")})},e.prototype.doPreviewPublish=function(){var e=this;this.logger.info("#"+this.publishStreamId+"#start Preview");var t={audio:this.config.audio,audioInput:this.config.audioInput,video:this.config.video,videoInput:this.config.videoInput,videoQuality:this.config.videoQuality,horizontal:this.config.horizontal};this.logger.info("#"+this.publishStreamId+"#  Preview  config "+JSON.stringify(t)),this.zg.startPreview(this.localVideo.nativeElement,t,function(){e.logger.info("#"+e.publishStreamId+"#preview success"),e.zg.startPublishingStream(e.publishStreamId,e.localVideo.nativeElement),e.localVideo.nativeElement.muted=!e.config.muted;var t=0;e.config.videoInputList&&e.config.videoInputList.forEach(function(n,l){n.deviceId==e.config.videoInput&&(t=l)}),e.changeCam=0===t?"md-sync":"ios-sync-outline",e.config.initEnumDevices()},function(t){e.logger.errors("#"+e.publishStreamId+"#Preview  error "+JSON.stringify(t));e.alertCtrl.create({title:("NotAllowedError"===t?"请打开允许使用摄像头使用权限":"请检查摄像设备是否可用，再试试吧！")+"("+t+")"}).present(),e.logoutRoom()})},e.prototype.toggleCam=function(){"md-videocam"===this.offOnCam?(this.offOnCam="ios-videocam-outline",this.logger.info("#"+this.publishStreamId+"#close camera"),this.zg.enableCamera(this.localVideo.nativeElement,!1)):(this.offOnCam="md-videocam",this.logger.info("#"+this.publishStreamId+"#open camera"),this.zg.enableCamera(this.localVideo.nativeElement,!0))},e.prototype.toggleMic=function(){"md-mic"===this.offOnMic?(this.offOnMic="ios-mic-outline",this.logger.info("#"+this.publishStreamId+"#close micphone"),this.zg.enableMicrophone(this.localVideo.nativeElement,!1)):(this.offOnMic="md-mic",this.logger.info("#"+this.publishStreamId+"#open micphone"),this.zg.enableMicrophone(this.localVideo.nativeElement,!0))},e.prototype.toggleVolume=function(){"md-volume-up"===this.offOnVolume?(this.offOnVolume="md-volume-off",this.subVideoList.forEach(function(e){e.nativeElement.muted=!0})):(this.offOnVolume="md-volume-up",this.subVideoList.forEach(function(e){e.nativeElement.muted=!1}))},e.prototype.changeUseCam=function(){var e=this;this.changeCam="md-sync"===this.changeCam?"ios-sync-outline":"md-sync",this.logger.info("#"+this.publishStreamId+"#change camera"),this.zg.stopPreview(this.localVideo.nativeElement),this.zg.stopPublishingStream(this.publishStreamId);var t={audio:"md-mic"===this.offOnMic,audioInput:this.config.audioInput,video:"md-videocam"===this.offOnCam,videoInput:this.config.toggleVideo("md-sync"===this.changeCam?0:1),videoQuality:this.config.videoQuality,horizontal:this.config.horizontal};this.logger.info("#"+this.publishStreamId+"#  Preview  config "+JSON.stringify(t)),this.zg.startPreview(this.localVideo.nativeElement,t,function(){e.logger.info("#"+e.publishStreamId+"#preview success"),e.zg.startPublishingStream(e.publishStreamId,e.localVideo.nativeElement),e.localVideo.nativeElement.muted=!e.config.muted},function(t){e.logger.errors("#"+e.publishStreamId+"#Preview  error "+JSON.stringify(t))})},e.prototype.listen=function(){var e=this,t={onPlayStateUpdate:function(t,n,l){if(0==t)e.logger.info("#"+n+"# play  success");else if(2==t)e.logger.info("#"+n+"# play retry");else{e.logger.errors("#"+n+"# play error "+l.msg);var i=l.msg;if(l.msg.indexOf("server session closed, reason: ")>-1){var r=l.msg.replace("server session closed, reason: ","");21==r?i="音频编解码不支持(opus)":22==r?i="视频编解码不支持(H264)":20==r&&(i="sdp 解释错误")}e.alertCtrl.create({title:"拉流"+n+"失败，"+i}).present()}},onPublishStateUpdate:function(t,n,l){if(0==t)e.logger.info("#"+n+"# publish  success");else if(2==t)e.logger.info("#"+n+"# publish  retry");else{e.logger.errors("#"+n+"# publish error "+l.msg);var i=l.msg;if(l.msg.indexOf("server session closed, reason: ")>-1){var r=l.msg.replace("server session closed, reason: ","");21==r?i="音频编解码不支持(opus)":22==r?i="视频编解码不支持(H264)":20==r&&(i="sdp 解释错误")}e.alertCtrl.create({title:"推流"+n+"失败，"+i}).present()}},onPublishQualityUpdate:function(t,n){e.logger.info("#"+t+"#publish  audio: "+n.audioBitrate+" video: "+n.videoBitrate+" fps: "+n.videoFPS)},onPlayQualityUpdate:function(t,n){e.logger.info("#"+t+"#play  audio: "+n.audioBitrate+" video: "+n.videoBitrate+" fps: "+n.videoFPS)},onDisconnect:function(t){e.logger.errors("onDisconnect "+JSON.stringify(t)),e.alertCtrl.create({title:"网络连接已断开："+JSON.stringify(t)}).present(),e.logoutRoom()},onKickOut:function(t){e.logger.errors("onKickOut "+JSON.stringify(t))},onStreamExtraInfoUpdated:function(e){},onVideoSizeChanged:function(t,n,l){e.logger.info("#"+t+"#play  : "+n+"x"+l)},onStreamUpdated:function(t,n){if(t==G)for(var l=0;l<n.length;l++)e.logger.info("#"+n[l].stream_id+"# was added"),e.useLocalStreamList.push(n[l]),e.addedVideo.push(n[l]);else if(t==W)for(var i=0;i<e.useLocalStreamList.length;i++)for(var r=0;r<n.length;r++)if(e.useLocalStreamList[i].stream_id===n[r].stream_id){e.zg.stopPlayingStream(e.useLocalStreamList[i].stream_id),e.logger.info("#"+e.useLocalStreamList[i].stream_id+"# was deleted "),e.useLocalStreamList.splice(i,1);break}},onUserStateUpdate:function(t,n){e.logger.info("onUserStateUpdate = "+t+JSON.stringify(n))}};for(var n in t)this.zg[n]=t[n]},e.prototype.ionViewWillUnload=function(){this.logger.info("beafore unload"),this.loginRoom&&(this.leaveRoom(),this.loginRoom=!1)},e.prototype.leaveRoom=function(){this.logger.info("leave room  and close stream"),this.zg.stopPreview(this.localVideo.nativeElement),this.zg.stopPublishingStream(this.publishStreamId);for(var e=0;e<this.useLocalStreamList.length;e++)this.zg.stopPlayingStream(this.useLocalStreamList[e].stream_id);this.zg.logout()},e.prototype.logoutRoom=function(){if(this.logger.info("#"+this.publishStreamId+"# logout"),this.loginRoom){try{this.leaveRoom()}catch(e){console.error(e)}this.loginRoom=!1}this.navCtrl.canGoBack()?this.navCtrl.pop():this.navCtrl.goToRoot({animate:!0})},e.prototype.showLogs=function(){this.navCtrl.push(F)},e.prototype.identify=function(e,t){return t.stream_id},e}(),Q=function(){function e(e,t,n){this.navCtrl=e,this.config=t,this.alertCtrl=n,this.audioInputList=[],this.videoInputList=[],this.idName=this.config.idName,this.appId=this.config.appId,this.nickName=this.config.nickName,this.logLevel=this.config.logLevel,this.logUrl=this.config.logUrl,this.audio=this.config.audio,this.audienceCreateRoom=this.config.audienceCreateRoom,this.audioInput=this.config.audioInput,this.video=this.config.video,this.videoInput=this.config.videoInput,this.videoQuality=this.config.videoQuality,this.horizontal=this.config.horizontal,this.muted=this.config.muted}return e.prototype.ngAfterViewInit=function(){var e=this;void 0!==j.ZegoClient?(this.zg=new j.ZegoClient,this.audioInputList=this.config.audioInputList,this.videoInputList=this.config.videoInputList,this.navBar.backButtonClick=function(t){e.isChange()?e.showConfirm():e.navCtrl.pop()}):setTimeout(function(){e.ngAfterViewInit()},1e3)},e.prototype.showConfirm=function(){var e=this;this.alertCtrl.create({title:"确定修改么?",message:"",buttons:[{text:"取消",handler:function(){e.navCtrl.canGoBack()?e.navCtrl.pop():e.navCtrl.goToRoot({animate:!0})}},{text:"确定",handler:function(){e.sure()}}]}).present()},e.prototype.sure=function(){this.config.idName=this.idName,this.config.appId=this.appId,this.config.nickName=this.nickName,this.config.logLevel=this.logLevel,this.config.logUrl=this.logUrl,this.config.audienceCreateRoom=this.audienceCreateRoom,this.config.audio=this.audio,this.config.audioInput=this.audioInput,this.config.video=this.video,this.config.videoInput=this.videoInput,this.config.videoQuality=1*this.videoQuality,this.config.horizontal=this.horizontal,this.config.muted=this.muted,this.navCtrl.canGoBack()?this.navCtrl.pop():this.navCtrl.goToRoot({animate:!0})},e.prototype.isChange=function(){return this.config.idName!==this.idName||this.config.appId!==this.appId||this.config.nickName!==this.nickName||this.config.logLevel!==this.logLevel||this.config.logUrl!==this.logUrl||this.config.audienceCreateRoom!==this.audienceCreateRoom||this.config.audio!==this.audio||this.config.audioInput!==this.audioInput||this.config.video!==this.video||this.config.videoInput!==this.videoInput||this.config.videoQuality!=this.videoQuality||this.config.horizontal!==this.horizontal||this.config.muted!==this.muted},e}(),K=n(62),X=this&&this.__assign||Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},$=0,ee=1,te=function(){function e(e,t,n,l,i,r){this.navCtrl=e,this.navParams=t,this.config=n,this.slide=l,this.logger=i,this.alertCtrl=r,this.useLocalStreamList=[],this.isSuportMultipCam=!1,this.isPublish=!0,this.offOnCam="md-videocam",this.offOnMic="md-mic",this.offOnVolume="md-volume-up",this.changeCam="md-sync",this.addedVideo=[],this.roomId=this.navParams.get("roomId")||this.config.getParameterByName("roomId"),this.isTest=this.navParams.get("isTest"),this.signUrl=this.navParams.get("signUrl"),this.pullstreamId=this.navParams.get("pullstreamId"),this.isPublish=!1!==this.navParams.get("isPublish"),this.publishStreamId=this.navParams.get("publishStreamId")||"s-"+this.config.idName,this.roomId||(this.logger.warning("#"+this.publishStreamId+"#roomId is empty,force to go back"),this.logoutRoom())}return e.prototype.ngAfterViewInit=function(){var e=this;void 0!==j.ZegoClient?this.init():setTimeout(function(){e.ngAfterViewInit()},1e3)},e.prototype.init=function(){var e=this;this.screenshare(),this.isSuportMultipCam=this.config.videoInputList.length>1,this.subVideoList.changes.subscribe(function(t){if(t.length>0){t.forEach(function(t){var n;e.addedVideo.some(function(e){return t.nativeElement.id==e.stream_id})&&(t.nativeElement.muted="md-volume-off"===e.offOnVolume,(n=e.zg.startPlayingStream(t.nativeElement.id,t.nativeElement))||(e.alertCtrl.create({title:"哎呀，播放失败啦！"}).present(),t.nativeElement.style="display:none",console.error("play "+t.nativeElement.id+" return "+n))),0}),e.addedVideo=[]}}),window.onbeforeunload=function(){console.log("beafore unload"),e.loginRoom&&(e.leaveRoom(),e.loginRoom=!1)},window.addEventListener("message",function(t){var n=t.data;"SS_DIALOG_SUCCESS"===n.type&&e.startScreenStreamFrom(n.streamId)})},e.prototype.configZego=function(){if(this.roomId){var e={appid:this.config.appId,idName:this.config.idName,nickName:this.config.nickName,server:this.config.server,logLevel:this.config.logLevel,logUrl:this.config.logUrl,remoteLogLevel:0};this.logger.info("#"+this.publishStreamId+"#config param:"+JSON.stringify(e)),this.zg.config(e),this.login(),this.signUrl&&this.zg.setCustomSignalUrl(this.signUrl)}},e.prototype.screenshare=function(){window.extensionInstalled||this.alertCtrl.create({title:'\n        Please install the extension:\n        1. Go to chrome://extensions\n        2. Check: "Enable Developer mode\n        3. Click: "Load the unpacked extension...\n        4. Choose "extension" folder from the repository\n        5. Reload this page\n      '}).present(),window.postMessage({type:"SS_UI_REQUEST",text:"start"},"*")},e.prototype.startScreenStreamFrom=function(e){var t=this,n={chromeMediaSource:"desktop",chromeMediaSourceId:e,maxWidth:window.screen.width,maxHeight:window.screen.height},l={};l.audio=!1,l.video={mandatory:n},navigator.mediaDevices.getUserMedia(l).then(function(e){t.localVideo1.nativeElement.srcObject=e,t.zg=new j.ZegoClient,t.configZego()}).catch(console.error)},e.prototype.login=function(){var e=this;this.logger.info("#"+this.publishStreamId+"#get token start"),this.config.getToken().subscribe(function(t){e.loginToken=t,e.logger.info("#"+e.publishStreamId+"#get token success:"+t),e.logger.info("#"+e.publishStreamId+"#start login"),e.zg.login(e.roomId,2,e.loginToken,function(t){if(e.pullstreamId&&(t=[{stream_id:e.pullstreamId}]),t.length>=4)return e.alertCtrl.create({title:"房间太拥挤，换一个吧！"}).present(),void e.logoutRoom();e.logger.info("#"+e.publishStreamId+"#login success"),e.loginRoom=!0,e.listen(),e.useLocalStreamList=e.useLocalStreamList.concat(t),e.addedVideo=e.useLocalStreamList.slice(),e.doPreviewPublish()},function(t){e.logger.errors("#"+e.publishStreamId+"login failed:err.msg")})},function(t){e.logger.errors("#"+e.publishStreamId+"#get token failed")})},e.prototype.doPreviewPublish=function(){var e=this;this.logger.info("#"+this.publishStreamId+"#start Preview");var t={audio:this.config.audio,audioInput:this.config.audioInput,video:this.config.video,videoInput:this.config.videoInput,videoQuality:this.config.videoQuality,horizontal:this.config.horizontal,externalCapture:!0};this.logger.info("#"+this.publishStreamId+"#  Preview  config "+JSON.stringify(t)),this.zg.startPreview(this.localVideo1.nativeElement,t,function(){e.logger.info("#"+e.publishStreamId+"#preview success"),e.isPublish&&e.zg.startPublishingStream("s"+e.publishStreamId,e.localVideo1.nativeElement),e.localVideo1.nativeElement.muted=!e.config.muted,e.config.initEnumDevices()},function(t){e.logger.errors("#"+e.publishStreamId+"#Preview  error "+JSON.stringify(t));e.alertCtrl.create({title:("NotAllowedError"===t?"请打开允许使用摄像头使用权限":"请检查摄像设备是否可用，再试试吧！")+"("+t+")"}).present(),e.logoutRoom()}),this.zg.startPreview(this.localVideo2.nativeElement,X({},t,{externalCapture:!1}),function(){e.logger.info("#"+e.publishStreamId+"#preview success"),e.isPublish&&e.zg.startPublishingStream(e.publishStreamId,e.localVideo2.nativeElement),e.localVideo2.nativeElement.muted=!e.config.muted,e.config.initEnumDevices()},function(t){e.logger.errors("#"+e.publishStreamId+"#Preview  error "+JSON.stringify(t));e.alertCtrl.create({title:("NotAllowedError"===t?"请打开允许使用摄像头使用权限":"请检查摄像设备是否可用，再试试吧！")+"("+t+")"}).present(),e.logoutRoom()})},e.prototype.toggleCam=function(){"md-videocam"===this.offOnCam?(this.offOnCam="ios-videocam-outline",this.logger.info("#"+this.publishStreamId+"#close camera"),this.zg.enableCamera(this.localVideo2.nativeElement,!1)):(this.offOnCam="md-videocam",this.logger.info("#"+this.publishStreamId+"#open camera"),this.zg.enableCamera(this.localVideo2.nativeElement,!0))},e.prototype.toggleMic=function(){"md-mic"===this.offOnMic?(this.offOnMic="ios-mic-outline",this.logger.info("#"+this.publishStreamId+"#close micphone"),this.zg.enableMicrophone(this.localVideo2.nativeElement,!1)):(this.offOnMic="md-mic",this.logger.info("#"+this.publishStreamId+"#open micphone"),this.zg.enableMicrophone(this.localVideo2.nativeElement,!0))},e.prototype.toggleVolume=function(){"md-volume-up"===this.offOnVolume?(this.offOnVolume="md-volume-off",this.subVideoList.forEach(function(e){e.nativeElement.muted=!0})):(this.offOnVolume="md-volume-up",this.subVideoList.forEach(function(e){e.nativeElement.muted=!1}))},e.prototype.changeUseCam=function(){var e=this;this.changeCam="md-sync"===this.changeCam?"ios-sync-outline":"md-sync",this.logger.info("#"+this.publishStreamId+"#change camera"),this.zg.stopPreview(this.localVideo2.nativeElement),this.zg.stopPublishingStream(this.publishStreamId);var t={audio:"md-mic"===this.offOnMic,audioInput:this.config.audioInput,video:"md-videocam"===this.offOnCam,videoInput:this.config.toggleVideo("md-sync"===this.changeCam?0:1),videoQuality:this.config.videoQuality,horizontal:this.config.horizontal};this.logger.info("#"+this.publishStreamId+"#  Preview  config "+JSON.stringify(t)),this.zg.startPreview(this.localVideo2.nativeElement,t,function(){e.logger.info("#"+e.publishStreamId+"#preview success"),e.zg.startPublishingStream(e.publishStreamId,e.localVideo2.nativeElement),e.localVideo2.nativeElement.muted=!e.config.muted},function(t){e.logger.errors("#"+e.publishStreamId+"#Preview  error "+JSON.stringify(t))})},e.prototype.listen=function(){var e=this,t={onPlayStateUpdate:function(t,n,l){0==t?e.logger.info("#"+n+"# play  success"):2==t?e.logger.info("#"+n+"# play retry"):e.logger.errors("#"+n+"# play error "+l.msg)},onPublishStateUpdate:function(t,n,l){0==t?e.logger.info("#"+n+"# publish  success"):2==t?e.logger.info("#"+n+"# publish  retry"):(e.logger.errors("#"+n+"# publish error "+l.msg),e.alertCtrl.create({title:"推流"+n+"失败，"+l.msg}).present())},onPublishQualityUpdate:function(t,n){e.logger.info("#"+t+"#publish  audio: "+n.audioBitrate+" video: "+n.videoBitrate+" fps: "+n.videoFPS)},onPlayQualityUpdate:function(t,n){e.logger.info("#"+t+"#play  audio: "+n.audioBitrate+" video: "+n.videoBitrate+" fps: "+n.videoFPS)},onDisconnect:function(t){e.logger.errors("onDisconnect "+JSON.stringify(t))},onKickOut:function(t){e.logger.errors("onKickOut "+JSON.stringify(t))},onStreamExtraInfoUpdated:function(e){},onVideoSizeChanged:function(t,n,l){e.logger.info("#"+t+"#play  : "+n+"x"+l)},onStreamUpdated:function(t,n){if(t==$)for(var l=0;l<n.length;l++)e.logger.info("#"+n[l].stream_id+"# was added"),e.useLocalStreamList.push(n[l]),e.addedVideo.push(n[l]);else if(t==ee)for(var i=0;i<e.useLocalStreamList.length;i++)for(var r=0;r<n.length;r++)if(e.useLocalStreamList[i].stream_id===n[r].stream_id){e.zg.stopPlayingStream(e.useLocalStreamList[i].stream_id),e.logger.info("#"+e.useLocalStreamList[i].stream_id+"# was deleted "),e.useLocalStreamList.splice(i,1);break}},onUserStateUpdate:function(t,n){e.logger.info("onUserStateUpdate = "+t+JSON.stringify(n))}};for(var n in t)this.zg[n]=t[n]},e.prototype.ionViewWillUnload=function(){this.logger.info("beafore unload"),this.loginRoom&&(this.leaveRoom(),this.loginRoom=!1)},e.prototype.leaveRoom=function(){this.logger.info("leave room  and close stream"),this.zg.stopPreview(this.localVideo1.nativeElement),this.zg.stopPreview(this.localVideo2.nativeElement),this.zg.stopPublishingStream(this.publishStreamId),this.zg.stopPublishingStream("s"+this.publishStreamId);for(var e=0;e<this.useLocalStreamList.length;e++)this.zg.stopPlayingStream(this.useLocalStreamList[e].stream_id);this.zg.logout()},e.prototype.logoutRoom=function(){if(this.logger.info("#"+this.publishStreamId+"# logout"),this.loginRoom){try{this.leaveRoom()}catch(e){console.error(e)}this.loginRoom=!1}this.navCtrl.canGoBack()?this.navCtrl.pop():this.navCtrl.goToRoot({animate:!0})},e.prototype.showLogs=function(){this.navCtrl.push(F)},e}(),ne=function(){function e(e,t,n,l){this.navCtrl=e,this.logger=t,this.storage=n,this.alertCtr=l,this.isSupport=!0,this.roomId=""}return e.prototype.ngOnInit=function(){var e=this;j.ZegoClient.isSupportWebrtc()||(this.isSupport=!1,this.alertCtr.create({title:"哎呀，浏览器暂不支持体验webrtc哦！"}).present()),j.ZegoClient.isSupportH264(function(t){t||(e.isSupport=!1,e.alertCtr.create({title:"浏览器不支持H264编码，换一个浏览器试试吧"}).present())},function(t){e.logger.errors(t)}),this.storage.get("homepage_roomid").then(function(t){e.roomId=t})},e.prototype.openRoom=function(e){var t=this;if(void 0===e&&(e=0),this.roomId=this.roomId&&this.roomId.replace(/^\s+|\s+$/gm,""),!this.roomId)return this.logger.info("iuput roomId is empty!"),void this.alertCtr.create({title:"请输入房间号"}).present();var n="screen"===this.roomId?te:J;n=J,this.storage.set("homepage_roomid",this.roomId).then(function(){t.navCtrl.push(n,{roomId:t.roomId,test:e},{animate:!1})},function(e){console.log(e)}).catch(function(e){console.log(e)})},e.prototype.openSetting=function(){this.navCtrl.push(Q,{},{animate:!0})},e}(),le=function(){return function(e,t,n){this.rootPage=ne,e.ready().then(function(){t.styleDefault(),n.hide()})}}(),ie=this&&this.__assign||Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},re=0,oe=1,se=function(){function e(e,t,n,l,i,r){var o=this;this.navCtrl=e,this.navParams=t,this.config=n,this.slide=l,this.logger=i,this.alertCtrl=r,this.useLocalStreamList=[],this.pullstreamId=[],this.isSuportMultipCam=!1,this.isPublish=!0,this.isLogin=!0,this.status={},this.isPublishAudio=!0,this.isPublishVideo=!0,this.isPullAudio=!0,this.isPullVideo=!0,this.authTokenUrl="",this.appNode="",this.offOnCam="md-videocam",this.offOnMic="md-mic",this.offOnVolume="md-volume-up",this.changeCam="md-sync",this.addedVideo=[],this.roomId=this.navParams.get("roomId")||this.config.getParameterByName("roomId"),this.isTest=this.navParams.get("isTest"),this.signUrl=this.navParams.get("signUrl");var s=this.navParams.get("pullstreamIds");s&&s.split(",").forEach(function(e){o.pullstreamId.push({stream_id:e,anchor_id_name:"",anchor_nick_name:"",extra_info:""})}),this.isPublish=!1!==this.navParams.get("isPublish"),this.isLogin=!1!==this.navParams.get("isLogin"),this.publishStreamId=this.navParams.get("publishStreamId")||"s"+this.config.idName,this.isPublishAudio=this.navParams.get("isPublishAudio"),this.isPublishVideo=this.navParams.get("isPublishVideo"),this.isPullAudio=this.navParams.get("isPullAudio"),this.isPullVideo=this.navParams.get("isPullVideo"),this.authTokenUrl=this.navParams.get("authTokenUrl"),this.appNode=this.navParams.get("appNode"),this.roomId||(this.logger.warning("#"+this.publishStreamId+"#roomId is empty,force to go back"),this.logoutRoom())}return e.prototype.ngAfterViewInit=function(){var e=this;void 0!==j.ZegoClient?this.init():setTimeout(function(){e.ngAfterViewInit()},1e3)},e.prototype.init=function(){var e=this;this.zg=new j.ZegoClient,this.configZego(),this.isSuportMultipCam=this.config.videoInputList.length>1,this.subVideoList.changes.subscribe(function(t){if(t.length>0){t.forEach(function(t){if(e.addedVideo.some(function(e){return t.nativeElement.id==e.stream_id})){t.nativeElement.muted="md-volume-off"===e.offOnVolume;var n=null;n=e.isPullVideo?"video":n,n=e.isPullAudio?"audio":n,(n=e.isPullVideo&&e.isPullAudio?"all":n)?e.playStream(t.nativeElement.id,t.nativeElement,n):e.logger.errors("#"+t.nativeElement.id+"# do not pull")}0}),e.addedVideo=[]}});var t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)?"pagehide":"beforeunload";window.addEventListener(t,function(t){window.event.cancelBubble=!0,console.log("beafore unload"),e.loginRoom&&(e.logoutRoom(),e.loginRoom=!1)})},e.prototype.playStream=function(e,t,n){var l=this;if(this.authTokenUrl&&this.appNode)this.config.loginAuthTokenUrl=this.authTokenUrl,this.config.getAuthToken(this.appNode,e,!0).subscribe(function(i){var r=l.zg.startPlayingStream(e,t,null,{playType:n,streamParams:"expired="+i.expired+"&nonce="+i.nonce+"&token="+i.token});r||(l.alertCtrl.create({title:"哎呀，播放失败啦！"}).present(),t.style="display:none",console.error("play "+t.id+" return "+r))});else{var i=this.zg.startPlayingStream(e,t,null,{playType:n});i||(this.alertCtrl.create({title:"哎呀，播放失败啦！"}).present(),t.style="display:none",console.error("play "+t.id+" return "+i))}},e.prototype.configZego=function(){if(this.roomId){var e={appid:this.config.appId,idName:this.config.idName,nickName:this.config.nickName,server:this.config.server,logLevel:this.config.logLevel,logUrl:this.config.logUrl,remoteLogLevel:0,audienceCreateRoom:!0};this.logger.info("#"+this.publishStreamId+"#config param:"+JSON.stringify(e)),this.zg.config(e),this.zg.setUserStateUpdate(!0),this.signUrl&&this.zg.setCustomSignalUrl(this.signUrl),this.login()}},e.prototype.login=function(){var e=this;this.logger.info("#"+this.publishStreamId+"#get token start"),this.status["push"+this.publishStreamId]="logging",this.status=ie({},this.status),this.config.getToken("test").subscribe(function(t){e.loginToken=t,e.logger.info("#"+e.publishStreamId+"#get token success:"+t),e.logger.info("#"+e.publishStreamId+"#start login"),e.zg.login(e.roomId,2,e.loginToken,function(t){if(e.status["push"+e.publishStreamId]="login",e.pullstreamId.length>0&&(t=e.pullstreamId),t.length>=4)return e.alertCtrl.create({title:"房间太拥挤，换一个吧！"}).present(),void e.logoutRoom();e.logger.info("#"+e.publishStreamId+"#login success"),e.loginRoom=!0,e.listen(),e.useLocalStreamList=e.useLocalStreamList.concat(t),e.addedVideo=e.useLocalStreamList.slice(),e.useLocalStreamList.forEach(function(t){e.status["pull"+t.stream_id]="pulling"}),e.status=ie({},e.status),e.isPublish&&e.doPreviewPublish(),e.isPublish||(e.offOnVolume="md-volume-off")},function(t){e.alertCtrl.create({title:"登录失败:"+t.msg}).present(),e.logger.errors("#"+e.publishStreamId+"login failed:"+t.msg)})},function(t){e.alertCtrl.create({title:"获取token失败"}).present(),e.logger.errors("#"+e.publishStreamId+"#get token failed")})},e.prototype.doPreviewPublish=function(){var e=this;this.logger.info("#"+this.publishStreamId+"#start Preview");var t={audio:this.config.audio&&this.isPublishAudio,audioInput:this.config.audioInput,video:this.config.video&&this.isPublishVideo,videoInput:this.config.videoInput,videoQuality:this.config.videoQuality,horizontal:this.config.horizontal};this.logger.info("#"+this.publishStreamId+"#  Preview  config "+JSON.stringify(t)),this.zg.startPreview(this.localVideo.nativeElement,t,function(){e.logger.info("#"+e.publishStreamId+"#preview success"),e.status["push"+e.publishStreamId]="previewed",e.status=ie({},e.status),e.publishStream(),e.localVideo.nativeElement.muted=!e.config.muted;var t=0;e.config.videoInputList&&e.config.videoInputList.forEach(function(n,l){n.deviceId==e.config.videoInput&&(t=l)}),e.changeCam=0===t?"md-sync":"ios-sync-outline",e.config.initEnumDevices()},function(t){e.logger.errors("#"+e.publishStreamId+"#Preview  error "+JSON.stringify(t));e.alertCtrl.create({title:("NotAllowedError"===t?"请打开允许使用摄像头使用权限":"请检查摄像设备是否可用，再试试吧！")+"("+t+")"}).present(),e.logoutRoom()})},e.prototype.publishStream=function(){var e=this;if(this.authTokenUrl&&this.appNode&&this.isPublish)this.config.loginAuthTokenUrl=this.authTokenUrl,this.config.getAuthToken(this.appNode,this.publishStreamId,!1).subscribe(function(t){var n=e.zg.startPublishingStream(e.publishStreamId,e.localVideo.nativeElement,null,{streamParams:"expired="+t.expired+"&nonce="+t.nonce+"&token="+t.token});e.status["push"+e.publishStreamId]=n?"publish suc":"publish fail"});else if(this.isPublish){var t=this.zg.startPublishingStream(this.publishStreamId,this.localVideo.nativeElement);this.status["push"+this.publishStreamId]=t?"publish suc":"publish fail"}},e.prototype.toggleCam=function(){"md-videocam"===this.offOnCam?(this.offOnCam="ios-videocam-outline",this.logger.info("#"+this.publishStreamId+"#close camera"),this.zg.enableCamera(this.localVideo.nativeElement,!1)):(this.offOnCam="md-videocam",this.logger.info("#"+this.publishStreamId+"#open camera"),this.zg.enableCamera(this.localVideo.nativeElement,!0))},e.prototype.toggleMic=function(){"md-mic"===this.offOnMic?(this.offOnMic="ios-mic-outline",this.logger.info("#"+this.publishStreamId+"#close micphone"),this.zg.enableMicrophone(this.localVideo.nativeElement,!1)):(this.offOnMic="md-mic",this.logger.info("#"+this.publishStreamId+"#open micphone"),this.zg.enableMicrophone(this.localVideo.nativeElement,!0))},e.prototype.toggleVolume=function(){"md-volume-up"===this.offOnVolume?(this.offOnVolume="md-volume-off",this.subVideoList.forEach(function(e){e.nativeElement.muted=!0})):(this.offOnVolume="md-volume-up",this.subVideoList.forEach(function(e){e.nativeElement.muted=!1}))},e.prototype.changeUseCam=function(){var e=this;this.changeCam="md-sync"===this.changeCam?"ios-sync-outline":"md-sync",this.logger.info("#"+this.publishStreamId+"#change camera"),this.zg.stopPreview(this.localVideo.nativeElement),this.zg.stopPublishingStream(this.publishStreamId);var t={audio:"md-mic"===this.offOnMic,audioInput:this.config.audioInput,video:"md-videocam"===this.offOnCam,videoInput:this.config.toggleVideo("md-sync"===this.changeCam?0:1),videoQuality:this.config.videoQuality,horizontal:this.config.horizontal};this.logger.info("#"+this.publishStreamId+"#  Preview  config "+JSON.stringify(t)),this.zg.startPreview(this.localVideo.nativeElement,t,function(){e.logger.info("#"+e.publishStreamId+"#preview success"),e.publishStream(),e.localVideo.nativeElement.muted=!e.config.muted},function(t){e.logger.errors("#"+e.publishStreamId+"#Preview  error "+JSON.stringify(t))})},e.prototype.togglePullStream=function(){var e=this;this.alertCtrl.create({title:"",message:"请输入拉流ID，多个流用逗号隔开",inputs:[{name:"pullStreamIds",placeholder:"Title"}],buttons:[{text:"取消",handler:function(e){console.log("Cancel clicked")}},{text:"确定",handler:function(t){for(var n=0;n<e.useLocalStreamList.length;n++)e.zg.stopPlayingStream(e.useLocalStreamList[n].stream_id);e.useLocalStreamList=[],t.pullStreamIds.split(",").forEach(function(t){e.useLocalStreamList.push({stream_id:t})}),e.useLocalStreamList=e.useLocalStreamList.slice(),e.addedVideo=e.useLocalStreamList.slice()}}]}).present()},e.prototype.listen=function(){var e=this,t={onPlayStateUpdate:function(t,n,l){if(0==t)e.logger.info("#"+n+"# play  success"),e.status["pull"+n]="play suc";else if(2==t)e.logger.info("#"+n+"# play retry");else{e.status["pull"+n]="play err",e.logger.errors("#"+n+"# play error "+l.msg);var i=l.msg;if(l.msg&&l.msg.indexOf("server session closed, reason: ")>-1){var r=l.msg.replace("server session closed, reason: ","");21==r?i="音频编解码不支持(opus)":22==r?i="视频编解码不支持(H264)":20==r&&(i="sdp 解释错误")}e.alertCtrl.create({title:"拉流"+n+"失败，"+i}).present()}e.status=ie({},e.status)},onPublishStateUpdate:function(t,n,l){if(0==t)e.status["push"+n]="publish suc",e.logger.info("#"+n+"# publish  success");else if(2==t)e.logger.info("#"+n+"# publish  retry");else{e.status["push"+n]="publish err",e.logger.errors("#"+n+"# publish error "+l.msg);var i=l.msg;if(l.msg&&l.msg.indexOf("server session closed, reason: ")>-1){var r=l.msg.replace("server session closed, reason: ","");21==r?i="音频编解码不支持(opus)":22==r?i="视频编解码不支持(H264)":20==r&&(i="sdp 解释错误")}e.alertCtrl.create({title:"推流"+n+"失败，"+i}).present()}e.status=ie({},e.status)},onPublishQualityUpdate:function(t,n){e.logger.info("#"+t+"#publish  audio: "+n.audioBitrate+" video: "+n.videoBitrate+" fps: "+n.videoFPS)},onPlayQualityUpdate:function(t,n){e.logger.info("#"+t+"#play  audio: "+n.audioBitrate+" video: "+n.videoBitrate+" fps: "+n.videoFPS)},onDisconnect:function(t){e.logger.errors("onDisconnect "+JSON.stringify(t)),e.alertCtrl.create({title:"网络连接已断开："+JSON.stringify(t)}).present(),e.logoutRoom()},onKickOut:function(t){e.logger.errors("onKickOut "+JSON.stringify(t))},onStreamExtraInfoUpdated:function(e){},onVideoSizeChanged:function(t,n,l){e.logger.info("#"+t+"#play  : "+n+"x"+l)},onStreamUpdated:function(t,n){if(t==re){for(var l=0;l<n.length;l++)e.logger.info("#"+n[l].stream_id+"# was added"),e.useLocalStreamList.push(n[l]),e.addedVideo.push(n[l]);e.addedVideo.forEach(function(t){e.status["pull"+t.stream_id]="pulling"}),e.status=ie({},e.status)}else if(t==oe)for(var i=0;i<e.useLocalStreamList.length;i++)for(var r=0;r<n.length;r++)if(e.useLocalStreamList[i].stream_id===n[r].stream_id){e.zg.stopPlayingStream(e.useLocalStreamList[i].stream_id),e.logger.info("#"+e.useLocalStreamList[i].stream_id+"# was deleted "),e.useLocalStreamList.splice(i,1);break}},onUserStateUpdate:function(t,n){e.logger.info("onUserStateUpdate = "+t+JSON.stringify(n))}};for(var n in t)this.zg[n]=t[n]},e.prototype.ionViewWillUnload=function(){this.logger.info("beafore unload"),this.loginRoom&&(this.leaveRoom(),this.loginRoom=!1)},e.prototype.leaveRoom=function(){this.logger.info("leave room  and close stream"),this.zg.stopPreview(this.localVideo.nativeElement),this.zg.stopPublishingStream(this.publishStreamId);for(var e=0;e<this.useLocalStreamList.length;e++)this.zg.stopPlayingStream(this.useLocalStreamList[e].stream_id);this.zg.logout()},e.prototype.logoutRoom=function(){if(this.logger.info("#"+this.publishStreamId+"# logout"),this.loginRoom){try{this.leaveRoom()}catch(e){console.error(e)}this.loginRoom=!1}this.navCtrl.canGoBack()?this.navCtrl.pop():this.navCtrl.goToRoot({animate:!0})},e.prototype.showLogs=function(){this.navCtrl.push(F)},e.prototype.identify=function(e,t){return t.stream_id},e}(),ae=function(){function e(e,t){this.navCtrl=e,this.alertCtrl=t,this.items=[{version:"1.1.4",details:["火狐浏览器在预览途中，退出预览；导致后续不能再退出","解决房间名称为no name问题","混流接口优化","推拉流添加鉴权","拉流创建session参数type纠正","消息category改为与native一致","预览接口兼容火狐最新版","同房间流名冲突，拉流不报错，内部直接重新拉流","gw服务重试次数5次调整为3次"]},{version:"1.1.3",details:["解决测试环境推流成功回调失败问题"]},{version:"1.1.2",details:["拉流改为offer模式"]}]}return e.prototype.ngAfterViewInit=function(){var e=this;this.navBar.backButtonClick=function(t){e.navCtrl.pop()}},e}(),ue=function(){function e(e,t,n,l,i){this.navCtrl=e,this.logger=t,this.config=n,this.alertCtr=l,this.storage=i,this.roomId="",this.isPublish=!0,this.isLogin=!1,this.streamId="",this.pullstreamId="",this.signUrl="",this.authTokenUrl="",this.appNode="",this.isPublishAudio=!0,this.isPublishVideo=!0,this.isPullAudio=!0,this.isPullVideo=!0,console.log("DeveloperPage start"),this.appId=this.config.appId}return e.prototype.ngOnInit=function(){var e=this;this.storage.get("develop_setting").then(function(t){t?(e.roomId=t.roomId,e.isPublish=t.isPublish,e.isLogin=t.isLogin,e.streamId=t.publishStreamId,e.pullstreamId=t.pullstreamIds,e.signUrl=t.signUrl||"wss://webrtctest.zego.im/ws?a=webrtc-demo",e.authTokenUrl=t.authTokenUrl||"",e.appNode=t.appNode||"",e.isPublishAudio=void 0===t.isPublishAudio||t.isPublishAudio,e.isPublishVideo=void 0===t.isPublishVideo||t.isPublishVideo,e.isPullAudio=void 0===t.isPullAudio||t.isPullAudio,e.isPullVideo=void 0===t.isPullVideo||t.isPullVideo):e.signUrl="wss://webrtctest.zego.im/ws?a=webrtc-demo"})},e.prototype.openRoom=function(){var e=this,t={roomId:this.roomId,publishStreamId:this.streamId,pullstreamIds:this.pullstreamId,isPublish:this.isPublish,isLogin:this.isLogin,signUrl:this.signUrl,isTest:1,isPublishAudio:this.isPublishAudio,isPublishVideo:this.isPublishVideo,isPullAudio:this.isPullAudio,isPullVideo:this.isPullVideo,authTokenUrl:this.authTokenUrl,appNode:this.appNode};return this.roomId=this.roomId&&this.roomId.replace(/^\s+|\s+$/gm,""),this.roomId?"number"!=typeof(1*this.appId)?(this.logger.info("input appid is not number!"),void this.alertCtr.create({title:"appid只能是数字"}).present()):this.signUrl&&this.signUrl.indexOf("wss")<0?(this.logger.info("signUrl   is not correct!"),void this.alertCtr.create({title:"signUrl必须是wss开头"}).present()):(this.config.appId=1*this.appId,void this.storage.set("develop_setting",t).then(function(){t.signUrl&&(t.roomId="zego-developement"+t.roomId),e.navCtrl.push(se,t,{animate:!1})})):(this.logger.info("input roomId is empty!"),void this.alertCtr.create({title:"请输入房间号"}).present())},e.prototype.openSetting=function(){this.navCtrl.push(Q,{},{animate:!0})},e.prototype.openHistory=function(){this.navCtrl.push(ae,{},{animate:!0})},e}(),ce=this&&this.__assign||Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},de=0,he=1,pe=function(){function e(e,t,n,l,i,r){this.navCtrl=e,this.navParams=t,this.config=n,this.slide=l,this.logger=i,this.alertCtrl=r,this.useLocalStreamList=[],this.pullstreamId=[],this.isSuportMultipCam=!1,this.isPublish=!0,this.isLogin=!0,this.isPublishAudio=!0,this.isPublishVideo=!0,this.isPullAudio=!0,this.isPullVideo=!0,this.status={},this.offOnCam="md-videocam",this.offOnMic="md-mic",this.offOnVolume="md-volume-up",this.changeCam="md-sync",this.addedVideo=[],this.roomId=this.navParams.get("roomId")||this.config.getParameterByName("roomId"),this.publishStreamId=this.navParams.get("publishStreamId")||"s"+this.config.idName,this.signUrl=this.navParams.get("signUrl"),this.isPublish=this.navParams.get("isPublish"),this.isPublishAudio=this.navParams.get("isPublishAudio"),this.isPublishVideo=this.navParams.get("isPublishVideo"),this.isPullAudio=this.navParams.get("isPullAudio"),this.isPullVideo=this.navParams.get("isPullVideo"),this.roomId||(this.logger.warning("#"+this.publishStreamId+"#roomId is empty,force to go back"),this.logoutRoom())}return e.prototype.ngAfterViewInit=function(){var e=this;void 0!==j.ZegoClient?this.init():setTimeout(function(){e.ngAfterViewInit()},1e3)},e.prototype.init=function(){var e=this;this.zg=new j.ZegoClient,this.configZego(),this.isSuportMultipCam=this.config.videoInputList.length>1,this.subVideoList.changes.subscribe(function(t){if(t.length>0){t.forEach(function(t){var n;if(e.addedVideo.some(function(e){return t.nativeElement.id==e.stream_id})){t.nativeElement.muted="md-volume-off"===e.offOnVolume;var l="";l=e.isPullVideo?"video":l,l=e.isPullAudio?"audio":l,(l=e.isPullVideo&&e.isPullAudio?"all":l)?(n=e.zg.startPlayingStream(t.nativeElement.id,t.nativeElement,null,{playType:l}))||(e.alertCtrl.create({title:"哎呀，播放失败啦！"}).present(),t.nativeElement.style="display:none",console.error("play "+t.nativeElement.id+" return "+n)):e.logger.errors("#"+t.nativeElement.id+"# do not pull")}0}),e.addedVideo=[]}});var t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)?"pagehide":"beforeunload";window.addEventListener(t,function(t){window.event.cancelBubble=!0,console.log("beafore unload"),e.loginRoom&&(e.logoutRoom(),e.loginRoom=!1)})},e.prototype.configZego=function(){if(this.roomId){var e={appid:this.config.appId,idName:this.config.idName,nickName:this.config.nickName,server:this.config.server,logLevel:this.config.logLevel,logUrl:this.config.logUrl,remoteLogLevel:0};this.logger.info("#"+this.publishStreamId+"#config param:"+JSON.stringify(e)),this.zg.config(e),this.zg.setUserStateUpdate(!0),this.login()}},e.prototype.login=function(){var e=this;this.logger.info("#"+this.publishStreamId+"#get token start"),this.status[this.publishStreamId]="logging",this.status=ce({},this.status),this.config.getToken("support").subscribe(function(t){e.loginToken=t,e.logger.info("#"+e.publishStreamId+"#get token success:"+t),e.logger.info("#"+e.publishStreamId+"#start login"),e.zg.login(e.roomId,2,e.loginToken,function(t){if(e.status[e.publishStreamId]="login",e.pullstreamId.length>0&&(t=e.pullstreamId),t.length>=4)return e.alertCtrl.create({title:"房间太拥挤，换一个吧！"}).present(),void e.logoutRoom();e.logger.info("#"+e.publishStreamId+"#login success"),e.loginRoom=!0,e.listen(),e.useLocalStreamList=e.useLocalStreamList.concat(t),e.addedVideo=e.useLocalStreamList.slice(),e.useLocalStreamList.forEach(function(t){e.status[t.stream_id]="pulling"}),e.status=ce({},e.status),e.isPublish&&e.doPreviewPublish(),e.isPublish||(e.offOnVolume="md-volume-off")},function(t){e.alertCtrl.create({title:"登录失败:"+t.msg}).present(),e.logger.errors("#"+e.publishStreamId+"login failed:"+t.msg)})},function(t){e.alertCtrl.create({title:"获取token失败"}).present(),e.logger.errors("#"+e.publishStreamId+"#get token failed")})},e.prototype.doPreviewPublish=function(){var e=this;this.logger.info("#"+this.publishStreamId+"#start Preview");var t={audio:this.config.audio&&this.isPublishAudio,audioInput:this.config.audioInput,video:this.config.video&&this.isPublishVideo,videoInput:this.config.videoInput,videoQuality:this.config.videoQuality,horizontal:this.config.horizontal};this.logger.info("#"+this.publishStreamId+"#  Preview  config "+JSON.stringify(t)),this.zg.startPreview(this.localVideo.nativeElement,t,function(){e.logger.info("#"+e.publishStreamId+"#preview success"),e.status[e.publishStreamId]="previewed",e.status=ce({},e.status),e.isPublish&&e.zg.startPublishingStream(e.publishStreamId,e.localVideo.nativeElement),e.localVideo.nativeElement.muted=!e.config.muted;var t=0;e.config.videoInputList&&e.config.videoInputList.forEach(function(n,l){n.deviceId==e.config.videoInput&&(t=l)}),e.changeCam=0===t?"md-sync":"ios-sync-outline",e.config.initEnumDevices()},function(t){e.logger.errors("#"+e.publishStreamId+"#Preview  error "+JSON.stringify(t));e.alertCtrl.create({title:("NotAllowedError"===t?"请打开允许使用摄像头使用权限":"请检查摄像设备是否可用，再试试吧！")+"("+t+")"}).present(),e.logoutRoom()})},e.prototype.toggleCam=function(){"md-videocam"===this.offOnCam?(this.offOnCam="ios-videocam-outline",this.logger.info("#"+this.publishStreamId+"#close camera"),this.zg.enableCamera(this.localVideo.nativeElement,!1)):(this.offOnCam="md-videocam",this.logger.info("#"+this.publishStreamId+"#open camera"),this.zg.enableCamera(this.localVideo.nativeElement,!0))},e.prototype.toggleMic=function(){"md-mic"===this.offOnMic?(this.offOnMic="ios-mic-outline",this.logger.info("#"+this.publishStreamId+"#close micphone"),this.zg.enableMicrophone(this.localVideo.nativeElement,!1)):(this.offOnMic="md-mic",this.logger.info("#"+this.publishStreamId+"#open micphone"),this.zg.enableMicrophone(this.localVideo.nativeElement,!0))},e.prototype.toggleVolume=function(){"md-volume-up"===this.offOnVolume?(this.offOnVolume="md-volume-off",this.subVideoList.forEach(function(e){e.nativeElement.muted=!0})):(this.offOnVolume="md-volume-up",this.subVideoList.forEach(function(e){e.nativeElement.muted=!1}))},e.prototype.changeUseCam=function(){var e=this;this.changeCam="md-sync"===this.changeCam?"ios-sync-outline":"md-sync",this.logger.info("#"+this.publishStreamId+"#change camera"),this.zg.stopPreview(this.localVideo.nativeElement),this.zg.stopPublishingStream(this.publishStreamId);var t={audio:"md-mic"===this.offOnMic,audioInput:this.config.audioInput,video:"md-videocam"===this.offOnCam,videoInput:this.config.toggleVideo("md-sync"===this.changeCam?0:1),videoQuality:this.config.videoQuality,horizontal:this.config.horizontal};this.logger.info("#"+this.publishStreamId+"#  Preview  config "+JSON.stringify(t)),this.zg.startPreview(this.localVideo.nativeElement,t,function(){e.logger.info("#"+e.publishStreamId+"#preview success"),e.zg.startPublishingStream(e.publishStreamId,e.localVideo.nativeElement),e.localVideo.nativeElement.muted=!e.config.muted},function(t){e.logger.errors("#"+e.publishStreamId+"#Preview  error "+JSON.stringify(t))})},e.prototype.togglePullStream=function(){var e=this;this.alertCtrl.create({title:"",message:"请输入拉流ID，多个流用逗号隔开",inputs:[{name:"pullStreamIds",placeholder:"Title"}],buttons:[{text:"取消",handler:function(e){console.log("Cancel clicked")}},{text:"确定",handler:function(t){for(var n=0;n<e.useLocalStreamList.length;n++)e.zg.stopPlayingStream(e.useLocalStreamList[n].stream_id);e.useLocalStreamList=[],t.pullStreamIds.split(",").forEach(function(t){e.useLocalStreamList.push({stream_id:t})}),e.useLocalStreamList=e.useLocalStreamList.slice(),e.addedVideo=e.useLocalStreamList.slice()}}]}).present()},e.prototype.listen=function(){var e=this,t={onPlayStateUpdate:function(t,n,l){if(0==t)e.logger.info("#"+n+"# play  success"),e.status[n]="play suc";else if(2==t)e.logger.info("#"+n+"# play retry");else{e.status[n]="play err",e.logger.errors("#"+n+"# play error "+l.msg);var i=l.msg;if(l.msg.indexOf("server session closed, reason: ")>-1){var r=l.msg.replace("server session closed, reason: ","");21==r?i="音频编解码不支持(opus)":22==r?i="视频编解码不支持(H264)":20==r&&(i="sdp 解释错误")}e.alertCtrl.create({title:"拉流"+n+"失败，"+i}).present()}e.status=ce({},e.status)},onPublishStateUpdate:function(t,n,l){if(0==t)e.status[n]="publish suc",e.logger.info("#"+n+"# publish  success");else if(2==t)e.logger.info("#"+n+"# publish  retry");else{e.status[n]="publish err",e.logger.errors("#"+n+"# publish error "+l.msg);var i=l.msg;if(l.msg.indexOf("server session closed, reason: ")>-1){var r=l.msg.replace("server session closed, reason: ","");21==r?i="音频编解码不支持(opus)":22==r?i="视频编解码不支持(H264)":20==r&&(i="sdp 解释错误")}e.alertCtrl.create({title:"推流"+n+"失败，"+i}).present()}e.status=ce({},e.status)},onPublishQualityUpdate:function(t,n){e.logger.info("#"+t+"#publish  audio: "+n.audioBitrate+" video: "+n.videoBitrate+" fps: "+n.videoFPS)},onPlayQualityUpdate:function(t,n){e.logger.info("#"+t+"#play  audio: "+n.audioBitrate+" video: "+n.videoBitrate+" fps: "+n.videoFPS)},onDisconnect:function(t){e.logger.errors("onDisconnect "+JSON.stringify(t)),e.alertCtrl.create({title:"网络连接已断开："+JSON.stringify(t)}).present(),e.logoutRoom()},onKickOut:function(t){e.logger.errors("onKickOut "+JSON.stringify(t))},onStreamExtraInfoUpdated:function(e){},onVideoSizeChanged:function(t,n,l){e.logger.info("#"+t+"#play  : "+n+"x"+l)},onStreamUpdated:function(t,n){if(t==de){for(var l=0;l<n.length;l++)e.logger.info("#"+n[l].stream_id+"# was added"),e.useLocalStreamList.push(n[l]),e.addedVideo.push(n[l]);e.addedVideo.forEach(function(t){e.status[t.stream_id]="pulling"}),e.status=ce({},e.status)}else if(t==he)for(var i=0;i<e.useLocalStreamList.length;i++)for(var r=0;r<n.length;r++)if(e.useLocalStreamList[i].stream_id===n[r].stream_id){e.zg.stopPlayingStream(e.useLocalStreamList[i].stream_id),e.logger.info("#"+e.useLocalStreamList[i].stream_id+"# was deleted "),e.useLocalStreamList.splice(i,1);break}},onUserStateUpdate:function(t,n){e.logger.info("onUserStateUpdate = "+t+JSON.stringify(n))}};for(var n in t)this.zg[n]=t[n]},e.prototype.ionViewWillUnload=function(){this.logger.info("beafore unload"),this.loginRoom&&(this.leaveRoom(),this.loginRoom=!1)},e.prototype.leaveRoom=function(){this.logger.info("leave room  and close stream"),this.zg.stopPreview(this.localVideo.nativeElement),this.zg.stopPublishingStream(this.publishStreamId);for(var e=0;e<this.useLocalStreamList.length;e++)this.zg.stopPlayingStream(this.useLocalStreamList[e].stream_id);this.zg.logout()},e.prototype.logoutRoom=function(){if(this.logger.info("#"+this.publishStreamId+"# logout"),this.loginRoom){try{this.leaveRoom()}catch(e){console.error(e)}this.loginRoom=!1}this.navCtrl.canGoBack()?this.navCtrl.pop():this.navCtrl.goToRoot({animate:!0})},e.prototype.showLogs=function(){this.navCtrl.push(F)},e.prototype.identify=function(e,t){return t.stream_id},e}(),ge=function(){function e(e,t){this.params=e,this.viewCtrl=t}return e.prototype.ngAfterViewInit=function(){jQuery(this.qrData.nativeElement).qrcode({text:this.params.get("text"),width:200,height:200,colorDark:"#000000",colorLight:"#ffffff"})},e.prototype.dismiss=function(){this.viewCtrl.dismiss()},e}(),fe=function(){function e(e,t,n,l,i,r){this.navCtrl=e,this.logger=t,this.config=n,this.alertCtr=l,this.storage=i,this.modalCtrl=r,this.title="",this.appKey="",this.testenv=!1,console.log("ToolConfigPage start")}return e.prototype.ngOnInit=function(){var e=this;this.storage.get("toolConfig").then(function(t){t&&(e.appId=t.appid,e.appKey=t.appkey,e.testenv=t.testenv,e.businessType=t.businesstype,e.title=t.title)})},e.prototype.openQRCode=function(){var e=this,t={data:{appid:1*this.appId,businesstype:1*this.businessType,appkey:this.appKey,testenv:this.testenv,title:this.title},type:"ac"};this.storage.set("toolConfig",t.data).then(function(){var n=Y.utf16to8(JSON.stringify(t));e.logger.info("toolconfig:"+n);e.modalCtrl.create(ge,{text:decodeURIComponent(n)},{showBackdrop:!0,enableBackdropDismiss:!0}).present()})},e.prototype.goback=function(){this.navCtrl.canGoBack()?this.navCtrl.pop():this.navCtrl.push(pe)},e}(),me=function(){function e(e,t,n,l,i){this.navCtrl=e,this.logger=t,this.config=n,this.alertCtr=l,this.storage=i,this.roomId="",this.isPublish=!0,this.isLogin=!1,this.streamId="",this.pullstreamId="",this.signUrl="",this.isPublishAudio=!0,this.isPublishVideo=!0,this.isPullAudio=!0,this.isPullVideo=!0,console.log("SupportPage start"),this.appId=this.config.appId}return e.prototype.ngOnInit=function(){var e=this;this.storage.get("support_setting").then(function(t){t&&(e.appId=t.appId,e.roomId=t.roomId,e.isPublish=t.isPublish,e.isLogin=t.isLogin,e.streamId=t.publishStreamId,e.pullstreamId=t.pullstreamIds,e.signUrl=t.signUrl,e.isPublishAudio=void 0===t.isPublishAudio||t.isPublishAudio,e.isPublishVideo=void 0===t.isPublishVideo||t.isPublishVideo,e.isPullAudio=void 0===t.isPullAudio||t.isPullAudio,e.isPullVideo=void 0===t.isPullVideo||t.isPullVideo)})},e.prototype.openRoom=function(){var e=this,t={roomId:this.roomId,publishStreamId:this.streamId,pullstreamIds:this.pullstreamId,isPublish:this.isPublish,isLogin:this.isLogin,signUrl:this.signUrl,isTest:1,appId:this.appId,isPublishAudio:this.isPublishAudio,isPublishVideo:this.isPublishVideo,isPullAudio:this.isPullAudio,isPullVideo:this.isPullVideo};return this.roomId=this.roomId&&this.roomId.replace(/^\s+|\s+$/gm,""),this.roomId?"number"!=typeof(1*this.appId)?(this.logger.info("input appid is not number!"),void this.alertCtr.create({title:"appid只能是数字"}).present()):(this.config.appId=1*this.appId,this.config.server=this.signUrl,void this.storage.set("support_setting",t).then(function(){e.navCtrl.push(pe,t,{animate:!1})})):(this.logger.info("input roomId is empty!"),void this.alertCtr.create({title:"请输入房间号"}).present())},e.prototype.openSetting=function(){this.navCtrl.push(Q,{},{animate:!0})},e.prototype.openHistory=function(){this.navCtrl.push(ae,{},{animate:!0})},e.prototype.openToolConfig=function(){this.navCtrl.push(fe,{},{animate:!0})},e}(),ve=function(){return function(){}}(),_e=n(65),be=n(240),ye=n(241),Ce=n(242),Se=n(243),Te=n(244),Ee=n(245),Re=n(246),Pe=n(247),Ie=n(248),ke=n(249),Le=n(54),Me=n(69),we=n(5),Ue=n(13),ze=n(6),Oe=n(1),De=n(4),Ne=n(8),Ae=n(47),xe=n(19),Ye=n(7),je=D.X({encapsulation:2,styles:[],data:{}}),Ze=D.V("ng-component",le,function(e){return D._19(0,[(e()(),D.Z(0,0,null,null,1,"ng-component",[],null,null,null,l,je)),D.Y(1,49152,null,0,le,[De.a,N.a,A.a],null,null)],null,null)},{},{},[]),Ve=n(70),qe=n(39),He=n(137),Be=n(24),Fe=n(51),Ge=n(37),We=n(28),Je=n(32),Qe=n(15),Ke=n(18),Xe=n(50),$e=n(42),et=n(14),tt=n(11),nt=n(29),lt=n(36),it=n(23),rt=n(73),ot=n(49),st=n(17),at=n(200),ut=n(72),ct=n(95),dt=n(55),ht=n(30),pt=n(10),gt=n(22),ft=n(16),mt=n(27),vt=D.X({encapsulation:2,styles:[],data:{}}),_t=D.V("page-setting",Q,function(e){return D._19(0,[(e()(),D.Z(0,0,null,null,1,"page-setting",[],null,null,null,o,vt)),D.Y(1,4243456,null,0,Q,[Ue.a,Z,mt.a],null,null)],null,null)},{},{},[]),bt=n(74),yt=n(34),Ct=n(35),St=n(33),Tt=n(63),Et=D.X({encapsulation:2,styles:[],data:{}}),Rt=D.V("page-home",ne,function(e){return D._19(0,[(e()(),D.Z(0,0,null,null,1,"page-home",[],null,null,null,s,Et)),D.Y(1,114688,null,0,ne,[Ue.a,B,Tt.a,mt.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),Pt=n(60),It=n(75),kt=n(38),Lt=n(31),Mt=n(12),wt=D.X({encapsulation:2,styles:[],data:{}}),Ut=D.V("page-room",J,function(e){return D._19(0,[(e()(),D.Z(0,0,null,null,1,"page-room",[],null,null,null,d,wt)),D.Y(1,4243456,null,0,J,[Ue.a,Mt.a,Z,V,B,mt.a],null,null)],null,null)},{},{},[]),zt=D.X({encapsulation:2,styles:[],data:{}}),Ot=D.V("page-devroom",se,function(e){return D._19(0,[(e()(),D.Z(0,0,null,null,1,"page-devroom",[],null,null,null,f,zt)),D.Y(1,4243456,null,0,se,[Ue.a,Mt.a,Z,V,B,mt.a],null,null)],null,null)},{},{},[]),Dt=D.X({encapsulation:2,styles:[],data:{}}),Nt=D.V("page-setting",F,function(e){return D._19(0,[(e()(),D.Z(0,0,null,null,1,"page-setting",[],null,null,null,_,Dt)),D.Y(1,4243456,null,0,F,[Ue.a,B,Z,mt.a],null,null)],null,null)},{},{},[]),At=n(107),xt=n(109),Yt=n(108),jt=D.X({encapsulation:2,styles:[],data:{}}),Zt=D.V("page-developer",ue,function(e){return D._19(0,[(e()(),D.Z(0,0,null,null,1,"page-developer",[],null,null,null,b,jt)),D.Y(1,114688,null,0,ue,[Ue.a,B,Z,mt.a,Tt.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),Vt=D.X({encapsulation:2,styles:[],data:{}}),qt=D.V("screenshare-room",te,function(e){return D._19(0,[(e()(),D.Z(0,0,null,null,1,"screenshare-room",[],null,null,null,T,Vt)),D.Y(1,4243456,null,0,te,[Ue.a,Mt.a,Z,V,B,mt.a],null,null)],null,null)},{},{},[]),Ht=D.X({encapsulation:2,styles:[],data:{}}),Bt=D.V("page-support",me,function(e){return D._19(0,[(e()(),D.Z(0,0,null,null,1,"page-support",[],null,null,null,E,Ht)),D.Y(1,114688,null,0,me,[Ue.a,B,Z,mt.a,Tt.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),Ft=D.X({encapsulation:2,styles:[],data:{}}),Gt=D.V("page-supportroom",pe,function(e){return D._19(0,[(e()(),D.Z(0,0,null,null,1,"page-supportroom",[],null,null,null,k,Ft)),D.Y(1,4243456,null,0,pe,[Ue.a,Mt.a,Z,V,B,mt.a],null,null)],null,null)},{},{},[]),Wt=n(83),Jt=D.X({encapsulation:2,styles:[],data:{}}),Qt=D.V("page-history",ae,function(e){return D._19(0,[(e()(),D.Z(0,0,null,null,1,"page-history",[],null,null,null,w,Jt)),D.Y(1,4243456,null,0,ae,[Ue.a,mt.a],null,null)],null,null)},{},{},[]),Kt=n(86),Xt=D.X({encapsulation:2,styles:[],data:{}}),$t=D.V("page-tool",fe,function(e){return D._19(0,[(e()(),D.Z(0,0,null,null,1,"page-tool",[],null,null,null,U,Xt)),D.Y(1,114688,null,0,fe,[Ue.a,B,Z,mt.a,Tt.a,Kt.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),en=n(127),tn=n(121),nn=n(128),ln=D.X({encapsulation:0,styles:["ion-content[_ngcontent-%COMP%] {\n      background: white;\n    }\n    \n    img[_ngcontent-%COMP%] {\n      margin-top: 10%;\n    }"],data:{}}),rn=D.V("ng-component",ge,function(e){return D._19(0,[(e()(),D.Z(0,0,null,null,1,"ng-component",[],null,null,null,z,ln)),D.Y(1,4243456,null,0,ge,[Mt.a,we.a],null,null)],null,null)},{},{},[]),on=n(136),sn=n(105),an=n(133),un=n(113),cn=n(197),dn=n(67),hn=n(61),pn=n(80),gn=n(118),fn=n(132),mn=n(126),vn=n(196),_n=n(134),bn=n(45),yn=n(114),Cn=n(135),Sn=D.W(ve,[_e.b],function(e){return D._10([D._11(512,D.i,D.S,[[8,[be.a,ye.a,Ce.a,Se.a,Te.a,Ee.a,Re.a,Pe.a,Ie.a,Ze,_t,Rt,Ut,Ot,Nt,Zt,qt,Bt,Gt,Qt,$t,rn]],[3,D.i],D.s]),D._11(5120,D.r,D._9,[[3,D.r]]),D._11(4608,pt.k,pt.j,[D.r,[2,pt.s]]),D._11(5120,D.b,D._0,[]),D._11(5120,D.p,D._6,[]),D._11(5120,D.q,D._7,[]),D._11(4608,O.c,O.q,[pt.c]),D._11(6144,D.D,null,[O.c]),D._11(4608,O.f,on.a,[]),D._11(5120,O.d,function(e,t,n,l,i){return[new O.k(e,t),new O.o(n),new O.n(l,i)]},[pt.c,D.u,pt.c,pt.c,O.f]),D._11(4608,O.e,O.e,[O.d,D.u]),D._11(135680,O.m,O.m,[pt.c]),D._11(4608,O.l,O.l,[O.e,O.m]),D._11(6144,D.B,null,[O.l]),D._11(6144,O.p,null,[O.m]),D._11(4608,D.G,D.G,[D.u]),D._11(4608,O.h,O.h,[pt.c]),D._11(4608,O.i,O.i,[pt.c]),D._11(4608,x.h,x.m,[pt.c,D.w,x.k]),D._11(4608,x.n,x.n,[x.h,x.l]),D._11(5120,x.a,function(e){return[e]},[x.n]),D._11(4608,x.j,x.j,[]),D._11(6144,x.i,null,[x.j]),D._11(4608,x.g,x.g,[x.i]),D._11(6144,x.b,null,[x.g]),D._11(5120,x.f,x.o,[x.b,[2,x.a]]),D._11(4608,x.c,x.c,[x.f]),D._11(4608,st.k,st.k,[]),D._11(4608,st.c,st.c,[]),D._11(5120,Tt.a,Tt.c,[Tt.b]),D._11(4608,sn.a,sn.a,[ze.a,Oe.a]),D._11(4608,mt.a,mt.a,[ze.a,Oe.a]),D._11(4608,an.a,an.a,[]),D._11(4608,tt.a,tt.a,[]),D._11(4608,ht.a,ht.a,[De.a]),D._11(4608,Ke.a,Ke.a,[Oe.a,De.a,D.u,Ye.a]),D._11(4608,un.a,un.a,[ze.a,Oe.a]),D._11(5120,pt.f,cn.b,[pt.q,[2,pt.a],Oe.a]),D._11(4608,pt.e,pt.e,[pt.f]),D._11(5120,dn.b,dn.d,[ze.a,dn.a]),D._11(5120,xe.a,xe.b,[ze.a,dn.b,pt.e,hn.b,D.i]),D._11(4608,Kt.a,Kt.a,[ze.a,Oe.a,xe.a]),D._11(4608,pn.a,pn.a,[ze.a,Oe.a]),D._11(4608,gn.a,gn.a,[ze.a,Oe.a,xe.a]),D._11(4608,fn.a,fn.a,[Oe.a,De.a,Ye.a,ze.a,Ne.l]),D._11(4608,mn.a,mn.a,[ze.a,Oe.a]),D._11(4608,Ae.a,Ae.a,[De.a,Oe.a]),D._11(4608,N.a,N.a,[]),D._11(4608,A.a,A.a,[]),D._11(4608,Z,Z,[x.c]),D._11(4608,B,B,[x.c,Z]),D._11(4608,V,V,[]),D._11(512,pt.b,pt.b,[]),D._11(512,D.k,vn.a,[]),D._11(256,Oe.b,{},[]),D._11(1024,_n.a,_n.b,[]),D._11(1024,De.a,De.b,[O.b,_n.a,D.u]),D._11(1024,Oe.a,Oe.c,[Oe.b,De.a]),D._11(512,Ye.a,Ye.a,[De.a]),D._11(512,bn.a,bn.a,[]),D._11(512,ze.a,ze.a,[Oe.a,De.a,[2,bn.a]]),D._11(512,Ne.l,Ne.l,[ze.a]),D._11(256,dn.a,{links:[{component:ue,name:"developer",segment:"test"},{component:me,name:"support",segment:"support"}]},[]),D._11(512,D.h,D.h,[]),D._11(512,yn.a,yn.a,[D.h]),D._11(1024,hn.b,hn.c,[yn.a,D.o]),D._11(1024,D.c,function(e,t,n,l,i,r,o,s,a,u,c,d,h){return[O.s(e),Cn.a(t),an.b(n,l),fn.b(i,r,o,s,a),hn.d(u,c,d,h)]},[[2,D.t],Oe.a,De.a,Ye.a,Oe.a,De.a,Ye.a,ze.a,Ne.l,Oe.a,dn.a,hn.b,D.u]),D._11(512,D.d,D.d,[[2,D.c]]),D._11(131584,D.f,D.f,[D.u,D.T,D.o,D.k,D.i,D.d]),D._11(512,D.e,D.e,[D.f]),D._11(512,O.a,O.a,[[3,O.a]]),D._11(512,x.e,x.e,[]),D._11(512,x.d,x.d,[]),D._11(512,K.a,K.a,[]),D._11(512,st.j,st.j,[]),D._11(512,st.d,st.d,[]),D._11(512,st.i,st.i,[]),D._11(512,cn.a,cn.a,[]),D._11(512,ve,ve,[]),D._11(256,x.k,"XSRF-TOKEN",[]),D._11(256,x.l,"X-XSRF-TOKEN",[]),D._11(256,Tt.b,null,[]),D._11(256,_e.a,le,[]),D._11(256,pt.a,"/",[])])});Object(D.M)(),Object(O.j)().bootstrapModuleFactory(Sn)},56:function(e,t,n){!function(t,n){e.exports=n()}("undefined"!=typeof self&&self,function(){return function(e){function t(l){if(n[l])return n[l].exports;var i=n[l]={i:l,l:!1,exports:{}};return e[l].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,l){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:l})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(t.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(l,i,function(t){return e[t]}.bind(null,i));return l},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=23)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.debug=0]="debug",e[e.info=1]="info",e[e.warn=2]="warn",e[e.error=3]="error",e[e.report=99]="report",e[e.disable=100]="disable"}(t.ENUM_LOG_LEVEL||(t.ENUM_LOG_LEVEL={})),function(e){e[e.disable=0]="disable",e[e.websocket=1]="websocket",e[e.https=2]="https"}(t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={})),t.PROTO_VERSION="1.0.3";var l=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this._id=null,this.next=null,this.prev=null,this._id=e,this._data=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),e.prototype.hasNext=function(){return this.next&&this.next.id},e.prototype.hasPrev=function(){return this.prev&&this.prev.id},e}();t.ListNode=l;var i=function(){function e(){this.start=new l,this.end=new l,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}return e.prototype.insertBefore=function(e,t){var n=new l(this._idCounter,t);return n.next=e,n.prev=e.prev,e.prev.next=n,e.prev=n,++this._idCounter,++this._numNodes,n},e.prototype.addLast=function(e){return this.insertBefore(this.end,e)},e.prototype.add=function(e){return this.addLast(e)},e.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},e.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},e.prototype.size=function(){return this._numNodes},e.prototype.getFromFirst=function(e){var t=0,n=this.start.next;if(e>=0)for(;t<e&&null!==n;)n=n.next,++t;else n=null;if(null===n)throw"Index out of bounds.";return n},e.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},e.prototype.remove=function(e){return e.prev.next=e.next,e.next.prev=e.prev,--this._numNodes,e},e.prototype.removeFirst=function(){var e=null;return this._numNodes>0&&(e=this.remove(this.start.next)),e},e.prototype.removeLast=function(){var e=null;return this._numNodes>0&&(e=this.remove(this.end.prev)),e},e.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},e.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},e.prototype.find=function(e){for(var t=this.start,n=!1,l=null;t.hasNext()&&!n;)e(t=t.next)&&(l=t,n=!0);return l},e.prototype.map=function(e){for(var t=this.start,n=[];t.hasNext();)e(t=t.next)&&n.push(t);return n},e.prototype.push=function(e){return this.addLast(e)},e.prototype.unshift=function(e){this.insertBefore(this._numNodes>0?this.start.next:this.end,e)},e.prototype.pop=function(){return this.removeLast()},e.prototype.shift=function(){return this.removeFirst()},e}();t.LinkedList=i,t.sdkErrorList={SUCCESS:{code:"ZegoClient.Success",msg:"success."},PARAM:{code:"ZegoClient.Error.Param",msg:"input error."},HEARTBEAT_TIMEOUT:{code:"ZegoClient.Error.Timeout",msg:"heartbeat timeout."},LOGIN_TIMEOUT:{code:"ZegoClient.Error.Timeout",msg:"login timeout."},SEND_MSG_TIMEOUT:{code:"ZegoClient.Error.Timeout",msg:"send customsg timeout."},RESET_QUEUE:{code:"ZegoClient.Error.Timeout",msg:"msg waiting ack is clear when reset."},LOGIN_DISCONNECT:{code:"ZegoClient.Error.Network",msg:"network is broken and login fail."},KICK_OUT:{code:"ZegoClient.Error.Kickout",msg:"kickout reason="},UNKNOWN:{code:"ZegoClient.Error.Unknown",msg:"unknown error."},FREQ_LIMITED:{code:"ZegoClient.Error.requencyLimited",msg:"Frequency Limited."}},function(e){e[e.disconnected=0]="disconnected",e[e.connecting=1]="connecting",e[e.connected=2]="connected"}(t.ENUM_SIGNAL_STATE||(t.ENUM_SIGNAL_STATE={})),t.ENUM_RESOLUTION_TYPE={LOW:{width:240,height:320,frameRate:15,bitRate:300},MEDIUM:{width:480,height:640,frameRate:15,bitRate:800},HIGH:{width:720,height:1280,frameRate:20,bitRate:1500}},t.ENUM_RETRY_STATE={didNotStart:0,retrying:1,finished:2},t.ENUM_PUBLISH_STATE={start:0,waitingSessionRsp:1,waitingOffserRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,publishing:6,stop:7,didNotStart:8},t.ENUM_PLAY_STATE={start:0,waitingSessionRsp:1,waitingOffserRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,playing:6,stop:7,didNotStart:8},t.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},t.MAX_TRY_CONNECT_COUNT=3,t.SEND_MSG_RESET=2,t.SEND_MSG_TIMEOUT=1,t.MAX_TRY_HEARTBEAT_COUNT=5,t.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5},t.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},t.ENUM_STREAM_UPDATE_TYPE={added:0,deleted:1},function(e){e[e.logout=0]="logout",e[e.trylogin=1]="trylogin",e[e.login=2]="login"}(t.ENUM_RUN_STATE||(t.ENUM_RUN_STATE={})),t.ENUM_PUBLISH_STATE_UPDATE={start:0,error:1,retry:2},t.ENUM_PLAY_STATE_UPDATE={start:0,error:1,retry:2},t.MAX_TRY_LOGIN_COUNT=5,t.TRY_LOGIN_INTERVAL=[2e3,2e3,3e3,3e3,4e3],t.MINIUM_HEARTBEAT_INTERVAL=3e3,t.ENUM_STREAM_UPDATE_CMD={added:12001,deleted:12002,updated:12003},t.SERVER_ERROR_CODE=1e4,t.MIXSTREAM_ERROR_CODE=1e4,function(e){e[e.low=1]="low",e[e.stantard=2]="stantard",e[e.hight=3]="hight",e[e.custome=4]="custome"}(t.QUALITYLEVEL||(t.QUALITYLEVEL={})),t.ENUM_SIGNAL_SUB_CMD={none:0,joinLiveRequest:1001,joinLiveResult:1002,joinLiveInvite:1003,joinLiveStop:1004},t.ENUM_PUSH_SIGNAL_SUB_CMD={none:0,pushJoinLiveRequest:11001,pushJoinLiveResult:11002,pushJoinLiveInvite:11003,pushJoinLiveStop:11004},t.ENUM_PLAY_SOURCE_TYPE={auto:0,ultra:1},t.ENUM_DISPATCH_TYPE={cdn:0,ultra:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(){}return e.checkConfigParam=function(e,t){return e.appid?e.server?(e.idName||t.error("ccp.0 idName must be string and not empty"),!0):(t.error("ccp.0 server must be string and not empty"),!1):(t.error("ccp.0 appid must be number"),!1)},e.checkLoginParam=function(e,t){return!0},e.registerCallback=function(e,t,n){var l,i;t.success&&(l=t.success),t.error&&(i=t.error),n[e+"SuccessCallback"]=l,n[e+"ErrorCallback"]=i},e.actionErrorCallback=function(e,t){return t[e+"ErrorCallback"]},e.actionSuccessCallback=function(e,t){return t[e+"SuccessCallback"]},e.getServerError=function(e){var t={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",2002:"biz channel error",1e9:"liveroom cmd error, result="};if(0===e)return{code:"ZegoClient.Success",msg:"success"};var n={code:"ZegoClient.Error.Server",msg:""};return n.msg=e>1e9?t[1e9]+e:t[e]?"unknown error code:"+e:t[e],n},e.isKeepTryLogin=function(e){switch(e){case 1002:case 1003:return!0;default:return!1}},e.mergeStreamList=function(e,t,n,l,i){e.debug("msl.0 call");for(var r,o=[],s=[],a=[],u=0;u<l.length;u++)if(l[u].anchor_id_name!=t){r=!1;for(var c=0;c<n.length;c++)if(l[u].stream_id===n[c].stream_id){l[u].extra_info!==n[c].extra_info&&a.push(l[u]),r=!0;break}r||o.push(l[u])}else e.debug("msl.0 have self stream added");for(var d=0;d<n.length;d++){r=!1;for(var h=0;h<l.length;h++)if(l[h].anchor_id_name!=t){if(n[d].stream_id===l[h].stream_id){r=!0;break}}else e.debug("msl.0 have self stream deleted");r||s.push(n[d])}n=l,i(o,s,a),e.debug("msl.0 call success")},e.checkCustomCommandParam=function(e){return!0},e.generateRandumNumber=function(e){return parseInt(Math.random()*(e+1)+"",10)},e.isSupportWebrtc=function(){var e=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,n=window.WebSocket;return!!e&&!!t&&!!n},e.isSupportH264=function(e,t){new RTCPeerConnection(null).createOffer({offerToReceiveAudio:1,offerToReceiveVideo:1}).then(function(t){if(t&&t.sdp){var n=t.sdp.split("\r\n").some(function(e){return e.startsWith("a=rtpmap:")&&e.indexOf("H264/")>-1});e(n)}},function(e){t(e)})},e}();t.ClientUtil=l},function(e,t,n){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),t.playErrorList={DISPATCH_ERROR:{code:"ZegoPlayWeb.Error.Dispatch",msg:"dispatch request error"},DISPATCH_TIMEOUT:{code:"ZegoPlayWeb.Timeout.Dispatch",msg:"dispatch request timeout"},TOKEN_ERROR:{code:"ZegoPlayWeb.Error.Token",msg:"login token error"},SEND_SESSION_TIMEOUT:{code:"ZegoPlayWeb.Timeout.Session",msg:"send session request timeout"},CREATE_SESSION_ERROR:{code:"ZegoPlayWeb.Error.Session",msg:"create session error"},CREATE_OFFER_ERROR:{code:"ZegoPublish.Error.CreateOffer",msg:"create offer error"},SERVER_MEDIA_DESC_TIMEOUT:{code:"ZegoPlayWeb.Timeout.RemoteOffer",msg:"wating server mediaDesc timeout"},SET_REMOTE_DESC_ERROR:{code:"ZegoPlayWeb.Error.RemoteOffer",msg:"other side offer error"},CREATE_ANSWER_ERROR:{code:"ZegoPlayWeb.Error.CreateAnswer",msg:"create offer error"},SET_LOCAL_DESC_ERROR:{code:"ZegoPlayWeb.Error.LocalDesc",msg:"setLocalDescription error"},SEND_MEDIA_DESC_TIMEOUT:{code:"ZegoPlayWeb.Timeout.Desc",msg:"send mediaDesc timeout"},SEND_CANDIDATE_ERROR:{code:"ZegoPlayWeb.Error.Candidate",msg:"send candidate error"},SEND_CANDIDATE_TIMEOUT:{code:"ZegoPlayWeb.Timeout.Candidate",msg:"send candidate timeout"},SERVER_CANDIDATE_TIMEOUT:{code:"ZegoPlayWeb.Timeout.ServerCandidate",msg:"waiting candidate timeout"},SERVER_CANDIDATE_ERROR:{code:"ZegoPlayWeb.Error.ServerCandidate",msg:"recv candidate error"},MEDIA_CONNECTION_FAILED:{code:"ZegoPlayWeb.Error.ConnectionFailed",msg:"ice Connection state failed"},MEDIA_CONNECTION_CLOSED:{code:"ZegoPlayWeb.Error.ConnectionClosed",msg:"ice connection state closed"},SESSION_CLOSED:{code:"ZegoPlayWeb.Error.SessionClosed",msg:"server session closed"},WEBSOCKET_ERROR:{code:"ZegoPlayWeb.Error.SocketError",msg:"network error"}},t.publishErrorList={DISPATCH_ERROR:{code:"ZegoPublish.Error.Dispatch",msg:"dispatch request error"},DISPATCH_TIMEOUT:{code:"ZegoPublish.Timeout.Dispatch",msg:"dispatch request timeout"},TOKEN_ERROR:{code:"ZegoPublish.Error.Token",msg:"login token error"},SEND_SESSION_TIMEOUT:{code:"ZegoPublish.Timeout.Session",msg:"send session request timeout"},CREATE_SESSION_ERROR:{code:"ZegoPublish.Error.Session",msg:"create session error"},CREATE_OFFER_ERROR:{code:"ZegoPublish.Error.CreateOffer",msg:"create offer error"},SET_LOCAL_DESC_ERROR:{code:"ZegoPublish.Error.LocalDesc",msg:"setLocalDescription error"},SEND_MEDIA_DESC_TIMEOUT:{code:"ZegoPublish.Timeout.Desc",msg:"send mediaDesc timeout"},SERVER_MEDIA_DESC_TIMEOUT:{code:"ZegoPublish.Timeout.ServerAnswer",msg:"waiting server mediaDesc timeout"},SERVER_MEDIA_DESC_ERROR:{code:"ZegoPublish.Error.ServerAnswer",msg:"server mediaDesc type error"},SET_REMOTE_DESC_ERROR:{code:"ZegoPublish.Error.RemoteDesc",msg:"other side offer error"},SEND_CANDIDATE_TIMEOUT:{code:"ZegoPublish.Timeout.Candidate",msg:"sendIceCandidate error"},SERVER_CANDIDATE_TIMEOUT:{code:"ZegoPublish.Timeout.ServerCandidate",msg:"waiting candidate timeout"},SERVER_CANDIDATE_ERROR:{code:"ZegoPublish.Error.ServerCandidate",msg:"recv candidate error"},SESSION_CLOSED:{code:"ZegoPublish.Error.SessionClosed",msg:"server session closed"},MEDIA_CONNECTION_FAILED:{code:"ZegoPublish.Error.IConnectionFailed",msg:"Iice Connection state failed"},MEDIA_CONNECTION_CLOSED:{code:"ZegoPublish.Error.ConnectionClosed",msg:"ice connection state closed"},WEBSOCKET_ERROR:{code:"ZegoPublish.Error.SocketError",msg:"network error"}},t.ENUM_PUBLISH_STATE_UPDATE={start:0,error:1,retry:2},t.ENUM_PLAY_STATE_UPDATE={start:0,error:1,retry:2,stop:3},t.ENUM_RETRY_STATE={didNotStart:0,retrying:1,finished:2},t.getSeq=(l=1,function(){return l++})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),i=function(){function e(e,t,n){this.logger=e,this.socketCenter=n,this.stateCenter=t}return e.prototype.requestJoinLive=function(e,t,n,i){this.logger.debug("zb.lh.rjl call");var r=this.stateCenter.getRequestId(),o=this.stateCenter.getSignalCmdContent(r,e);return void 0!=i&&(this.stateCenter.joinLiveCallbackMap[r]=i,this.sendSignalCmd(l.ENUM_SIGNAL_SUB_CMD.joinLiveRequest,o,e,t,n),!0)},e.prototype.inviteJoinLive=function(e,t,n,i){this.logger.debug("zb.lh.ijl call");var r=this.stateCenter.getRequestId(),o=this.stateCenter.getSignalCmdContent(r,e);return void 0!=i&&(this.stateCenter.joinLiveCallbackMap[r]=i,this.sendSignalCmd(l.ENUM_SIGNAL_SUB_CMD.joinLiveInvite,o,e,t,n),!0)},e.prototype.endJoinLive=function(e,t,n){this.logger.debug("zb.lh.ejl call");var i=this.stateCenter.getRequestId(),r=this.stateCenter.getSignalCmdContent(i,e);return this.sendSignalCmd(l.ENUM_SIGNAL_SUB_CMD.joinLiveStop,r,e,t,n),!0},e.prototype.respondJoinLive=function(e,t,n,i){this.logger.debug("zb.lh.rpjl call");var r=this.stateCenter.joinLiveRequestMap[e];if(!r)return this.logger.info("zb.lh.rpjl no dest id name"),!1;var o=0;!0===t&&(o=1);var s=this.stateCenter.getSignalCmdContent(e,r,o);return this.sendSignalCmd(l.ENUM_SIGNAL_SUB_CMD.joinLiveResult,s,r,n,i),delete this.stateCenter.joinLiveRequestMap[e],!0},e.prototype.sendSignalCmd=function(e,t,n,l,i){if(this.logger.debug("zb.lh.ssc call"),this.stateCenter.isLogin()){this.logger.debug("zb.lh.ssc send signal cmd "+e);this.socketCenter.sendMessage("signal",{sub_cmd:e,signal_msg:t,dest_id_name:[n]},l,i),this.logger.info("zb.lh.ssc call success")}else this.logger.error("zb.lh.ssc state error")},e.prototype.handlePushSignalMsg=function(e){if(this.stateCenter.isLogin()){var t=JSON.parse(e.body.signal_msg);switch(this.logger.debug("zb.lh.hpcm hpsm= ",t),e.body.sub_cmd){case l.ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveRequest:this.handlePushJoinLiveRequestMsg(t);break;case l.ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveResult:this.handlePushJoinLiveResultMsg(t);break;case l.ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveInvite:this.handlePushJoinLiveInviteMsg(t);break;case l.ENUM_PUSH_SIGNAL_SUB_CMD.pushJoinLiveStop:this.handlePushJoinLiveStopMsg(t)}this.logger.debug("zb.lh.hpsm call end")}else this.logger.warn("zb.lh.hpsm not login")},e.prototype.handlePushJoinLiveRequestMsg=function(e){var t=e.request_id;if("string"==typeof t){var n=e.from_userid;"string"==typeof n?(this.stateCenter.joinLiveRequestMap[t]=n,this.logger.info("zb.lh.hpjlrm onRecvJoinLiveRequest "+n),this.onRecvJoinLiveRequest(t,e.from_userid,e.from_username,e.room_id)):this.logger.error("zb.lh.hpjlrm no from user")}else this.logger.error("zb.lh.hpjlrm no requestId")},e.prototype.onRecvJoinLiveRequest=function(e,t,n,l){},e.prototype.handlePushJoinLiveInviteMsg=function(e){var t=e.request_id;if("string"==typeof t){var n=e.from_userid;"string"==typeof n?(this.stateCenter.joinLiveRequestMap[t]=n,this.logger.info("zb.lh.hpjlim onRecvInviteJoinLiveRequest "+n),this.onRecvInviteJoinLiveRequest(t,e.from_userid,e.from_username,e.room_id)):this.logger.error("zb.lh.hpjlim no from user")}else this.logger.error("zb.lh.hpjlim no requestId")},e.prototype.onRecvInviteJoinLiveRequest=function(e,t,n,l){},e.prototype.handlePushJoinLiveResultMsg=function(e){var t=e.request_id;if("string"==typeof t){var n=e.result;if(void 0!=n){var l=1==n;if(this.stateCenter.joinLiveCallbackMap[t]){var i=this.stateCenter.joinLiveCallbackMap[t];if(!i)return void this.logger.info("hpjlrm.o no callback");this.logger.info("zb.lh.hpjlrm joinLiveRequest/invite result "+l),delete this.stateCenter.joinLiveCallbackMap[t],i(l,e.from_userid,e.from_username)}}else this.logger.info("zb.lh.hpjlrm no result")}else this.logger.error("zb.lh.hpjlrm no requestId")},e.prototype.handlePushJoinLiveStopMsg=function(e){var t=e.request_id;"string"==typeof t?(this.logger.info("zb.lh.hpjlsm onRecvEndJoinLiveCommand "+e.from_userid),this.onRecvEndJoinLiveCommand(t,e.from_userid,e.from_username,e.room_id)):this.logger.error("zb.lh.hpjlsm no requestId")},e.prototype.onRecvEndJoinLiveCommand=function(e,t,n,l){},e}();t.LiveHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),i=n(1),r=function(){function e(e,t,n){this.logger=e,this.socketCenter=n,this.stateCenter=t}return e.prototype.sendCustomCommand=function(e,t,n,l){var r=this;if(this.logger.debug("zb.mh.scc call"),!this.stateCenter.isLogin())return this.logger.error("zb.mh.scc state error"),!1;if(!e||0==e.length)return this.logger.error("zb.mh.scc dstMembers error"),!1;var o={from_userid:this.stateCenter.idName,from_username:this.stateCenter.nickName,custom_content:t||""},s={dest_id_name:e,custom_msg:JSON.stringify(o)};return i.ClientUtil.checkCustomCommandParam(s)?(this.socketCenter.registerRouter("custommsg",function(e){r.handleSendCustomMsgRsp(e)}),this.socketCenter.sendCustomMessage("custommsg",s,n,l),this.logger.info("zb.mh.scc call success"),!0):(this.logger.info("zb.mh.scc param error"),!1)},e.prototype.handleSendCustomMsgRsp=function(e){this.logger.debug("zb.mh.hscmrcall");var t,n=this.stateCenter.sendDataMap[e.header.seq];null!=n?("custommsg"!=(t=n._data).data.header.cmd?this.logger.error("zb.mh.hscmrcmd wrong"+t.data.header.cmd):0===e.body.err_code?null!=t.success&&t.success(e.header.seq,t.data.body.custom_msg):null!=t.error&&t.error(i.ClientUtil.getServerError(e.body.err_code),e.header.seq,t.data.body.custom_msg),delete this.stateCenter.sendDataMap[e.header.seq],this.stateCenter.sendDataList.remove(n)):this.logger.error("zb.mh.hscmrno found seq="+e.header.seq),this.logger.debug("zb.mh.hscmr  call success")},e.prototype.handlePushCustomMsg=function(e){var t=JSON.parse(e.body.custommsg);this.logger.debug("zb.mh.hpcm submsg=",t),this.onRecvCustomCommand(t.from_userid,t.from_username,t.custom_content)},e.prototype.onRecvCustomCommand=function(e,t,n){},e.prototype.sendRoomMsg=function(e,t,n,i,r){var o=this;if(this.logger.debug("zb.mh.srm call"),this.stateCenter.isLogin()){var s=Date.parse(new Date+"");if(this.stateCenter.sendRoomMsgTime>0&&this.stateCenter.sendRoomMsgTime+this.stateCenter.SendRoomMsgInterval>s)return this.logger.info("zb.mh.srm freq error"),void(r&&r(l.sdkErrorList.FREQ_LIMITED,0,e,t,n));this.stateCenter.sendRoomMsgTime=s,this.logger.debug("zb.mh.srm send fetch request");var a={msg_category:e,msg_type:t,msg_content:n};this.socketCenter.registerRouter("im_chat",function(e){o.handleSendRoomMsgRsp(e)}),this.socketCenter.sendCustomMessage("im_chat",a,i,r),this.logger.info("zb.mh.srm call success")}else this.logger.error("zb.mh.srm state error")},e.prototype.handleSendRoomMsgRsp=function(e){this.logger.debug("zb.mh.hsrmr call");var t,n=this.stateCenter.sendDataMap[e.header.seq];null!=n?("im_chat"!=(t=n._data).data.header.cmd?this.logger.error("zb.mh.hsrmr cmd wrong"+t.data.header.cmd):0===e.body.err_code?t.success&&t.success(e.header.seq,e.body.msg_id,t.data.body.msg_category,t.data.body.msg_type,t.data.body.msg_content):t.error&&t.error(i.ClientUtil.getServerError(e.body.err_code),e.header.seq,t.data.body.msg_category,t.data.body.msg_type,t.data.body.msg_content),delete this.stateCenter.sendDataMap[e.header.seq],this.stateCenter.sendDataList.remove(n)):this.logger.error("hzb.mh.hsrmr no found seq="+e.header.seq),this.logger.info("zb.mh.hsrmr call success")},e.prototype.onRecvRoomMsg=function(e,t,n){},e.prototype.sendReliableMessage=function(e,t,n,l){this.logger.debug("zb.mh.srirm call"),this.stateCenter.transSeqMap[e]&&delete this.stateCenter.transSeqMap[e],this.stateCenter.transSeqMap[e]={seq:0};this.socketCenter.sendMessage("trans",{trans_type:e,trans_data:t},n,l)},e.prototype.sendBigRoomMessage=function(e,t,n,l,i){var r=this;this.logger.debug("zb.mh.sbim call");var o=this.stateCenter.bigimTimeWindow,s=this.stateCenter.serverTimeOffset,a=(new Date).getTime()+s,u=(++this.stateCenter.cmdSeq).toString();if(void 0==l&&(l=null),void 0==i&&(i=null),this.stateCenter.bigImCallbackMap[u]={success:l,error:i},0==o){var c={msg_category:e,msg_type:t,msg_content:n,bigmsg_client_id:u};this.logger.debug("zb.mh.sbim no time window"),this.sendBigRoomMessageInternal([c],function(e){r.handleBigImMsgRsp(e)},i)}else{var d=Math.floor(a/o);if(this.logger.debug("currentIndex "+d+" lastTimeIndex "+this.stateCenter.bigImLastTimeIndex),this.stateCenter.bigImLastTimeIndex<d&&0==this.stateCenter.bigImMessageList.length){this.stateCenter.bigImLastTimeIndex=d;this.sendBigRoomMessageInternal([{msg_category:e,msg_type:t,msg_content:n,bigmsg_client_id:u}],function(e){r.handleBigImMsgRsp(e)},i)}else this.stateCenter.bigImMessageList.push({msg_category:e,msg_type:t,msg_content:n,bigmsg_client_id:u}),1==this.stateCenter.bigImMessageList.length&&this.setBigImTimer(s,o)}},e.prototype.handlePushMergeMsg=function(e){if(this.stateCenter.isLogin()){for(var t=0;t<e.body.messages.length;t++)14001===e.body.messages[t].sub_cmd&&this.handlePushBigRooMsg(e.body.messages[t].msg_body);this.logger.debug("zb.mh.hpmm call success")}else this.logger.error("zb.mh.hpmmnot login")},e.prototype.handlePushBigRooMsg=function(e){var t;try{t=JSON.parse(e)}catch(e){return void this.logger.warn("zb.mh.hpbrm parse json error")}if(t){for(var n=t.room_id,l=[],i=0;i<t.msg_data.length;i++){var r=t.msg_data[i];r.id_name!=this.stateCenter.idName?l.push({idName:r.id_name,nickName:r.nick_name,messageId:r.bigmsg_id,category:r.msg_category,type:r.msg_type,content:r.msg_content,time:r.send_time}):this.logger.debug("zb.mh.hpbrm self message")}0==l.length?this.logger.debug("zb.mh.hpbrm no other pushData except self"):this.onRecvBigRoomMessage(l,n),this.logger.debug("zb.mh.hpbrm call success")}else this.logger.warn("zb.mh.hpbrm cann't find message body")},e.prototype.onRecvBigRoomMessage=function(e,t){},e.prototype.sendBigRoomMessageInternal=function(e,t,n){this.logger.debug("zb.mh.sbim call");this.socketCenter.sendMessage("bigim_chat",{msgs:e},t,n)},e.prototype.handleBigImMsgRsp=function(e){if(this.stateCenter.isLogin()){this.stateCenter.bigimTimeWindow!=e.body.bigim_time_window&&(this.stateCenter.bigimTimeWindow=e.body.bigim_time_window);for(var t=0;t<e.body.msgs.length;t++){var n=e.body.msgs[t].bigmsg_client_id;if(this.stateCenter.bigImCallbackMap[n]){var l=this.stateCenter.bigImCallbackMap[n].success;null!=l&&l(e.header.seq,e.body.msgs[t].bigmsg_id),delete this.stateCenter.bigImCallbackMap[n]}}}else this.logger.info("zb.mh.hbmr not login")},e.prototype.setBigImTimer=function(e,t){var n=this,l=t-((new Date).getTime()+e)%t,r=i.ClientUtil.generateRandumNumber(t)+l;this.logger.info("zb.mh.sbt setTimer "+r),this.stateCenter.bigImTimer=setTimeout(function(){n.onBigImTimer()},r)},e.prototype.onBigImTimer=function(){var e=this,t=(new Date).getTime()+this.stateCenter.serverTimeOffset;this.stateCenter.bigImLastTimeIndex=Math.floor(t/this.stateCenter.bigimTimeWindow);for(var n=[],l=[],i=0;i<this.stateCenter.bigImMessageList.length&&!(i>=20);i++){var r=this.stateCenter.bigImMessageList[i];n.push({msg_category:r.msg_category,msg_type:r.msg_type,msg_content:r.msg_content,bigmsg_client_id:r.bigmsg_client_id}),l.push(r.bigmsg_client_id)}this.stateCenter.bigImMessageList.length>20?this.stateCenter.bigImMessageList.splice(0,20):this.stateCenter.bigImMessageList=[],this.sendBigRoomMessageInternal(n,function(t){e.handleBigImMsgRsp(t)},function(t,n){for(var i=0;i<l.length;i++){var r=l[i],o=e.stateCenter.bigImCallbackMap[r];o&&(null!=o.error&&o.error(t,n),delete e.stateCenter.bigImCallbackMap[r])}}),clearTimeout(this.stateCenter.bigImTimer),this.stateCenter.bigImTimer=null,this.stateCenter.bigImMessageList.length>0&&this.setBigImTimer(this.stateCenter.serverTimeOffset,this.stateCenter.bigimTimeWindow)},e.prototype.sendRelayMessage=function(e,t,n,l){this.logger.debug("zb.mh.srm call");var i=this.stateCenter.datiTimeWindow,r=this.stateCenter.serverTimeOffset;i>0?(this.stateCenter.realyMessageList.push({type:e,data:t,success:n,error:l}),1==this.stateCenter.realyMessageList.length&&this.setRelayTimer(r,i)):this.sendRelayMessageInternal(e,t,n,l)},e.prototype.sendRelayMessageInternal=function(e,t,n,l){this.logger.debug("zb.mh.srmi call");this.socketCenter.sendMessage("relay",{relay_type:e,relay_data:t},n,l)},e.prototype.setRelayTimer=function(e,t){var n=this,l=2*t-((new Date).getTime()+e)%t,r=i.ClientUtil.generateRandumNumber(l);this.logger.info("zb.mh.srt setTimer "+r),this.stateCenter.relayTimer=setTimeout(function(){n.onRelayTimer()},r)},e.prototype.onRelayTimer=function(){if(0!=this.stateCenter.realyMessageList.length){var e=this.stateCenter.realyMessageList[0];this.sendRelayMessageInternal(e.type,e.data,e.success,e.error),clearTimeout(this.stateCenter.relayTimer),this.stateCenter.relayTimer=null,this.stateCenter.realyMessageList.splice(0,1),this.stateCenter.realyMessageList.length>0&&this.setRelayTimer(this.stateCenter.serverTimeOffset,this.stateCenter.datiTimeWindow)}else this.logger.info("zb.mh.ort no relay data")},e.prototype.handlePushTransMsg=function(e){if(this.stateCenter.isLogin()){var t=e.body.trans_type,n=e.body.trans_seq;this.stateCenter.transSeqMap[t]?this.stateCenter.transSeqMap[t].seq=n:this.stateCenter.transSeqMap[t]={seq:n},e.body.trans_user_idname!=this.stateCenter.idName?this.onRecvReliableMessage(t,n,e.body.trans_data):this.logger.debug("zb.mh.hptr receive self trans message"),this.logger.info("zb.mh.hptr trans "+t+" seq "+n)}else this.logger.error("zb.mh.hptr not login")},e.prototype.onRecvReliableMessage=function(e,t,n){},e}();t.MessageHandler=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),i=n(1),r=function(){function e(e,t,n){this.logger=e,this.socketCenter=n,this.stateCenter=t}return e.prototype.resetHeartbeat=function(){this.logger.debug("zb.hb.rht call"),clearTimeout(this.stateCenter.heartbeatTimer),this.stateCenter.heartbeatTimer=null,this.stateCenter.tryHeartbeatCount=0,this.logger.debug("zb.hb.rht call success")},e.prototype.hbLogout=function(e){},e.prototype.start=function(e){var t=this;if(this.logger.debug("zb.hb.sht call"),this.stateCenter.isLogin()){if(++this.stateCenter.tryHeartbeatCount>3)return this.logger.error("zb.hb.sht come to try limit"),void this.hbLogout(l.sdkErrorList.HEARTBEAT_TIMEOUT);this.logger.debug("zb.hb.sht send packet"),this.socketCenter.registerRouter("hb",function(e){t.handleHeartbeatRsp(e)}),this.socketCenter.sendMessage("hb",{reserve:0}),this.logger.debug("zb.hb.sht call success"),this.stateCenter.heartbeatInterval=e,this.stateCenter.heartbeatTimer=setTimeout(function(){t.start(t.stateCenter.heartbeatInterval)},this.stateCenter.heartbeatInterval)}else this.logger.error("zb.hb.sht state error")},e.prototype.handleHeartbeatRsp=function(e){if(this.logger.debug("zb.hb.hhbr call"),0!==e.body.err_code)return this.logger.error("zb.hb.hhbr call disconnect, server error=",e.body.err_code),void this.hbLogout(i.ClientUtil.getServerError(e.body.err_code));for(var t in this.stateCenter.tryHeartbeatCount=0,this.stateCenter.heartbeatInterval=e.body.hearbeat_interval,this.stateCenter.heartbeatInterval<l.MINIUM_HEARTBEAT_INTERVAL&&(this.stateCenter.heartbeatInterval=l.MINIUM_HEARTBEAT_INTERVAL),e.body.bigim_time_window&&"number"==typeof e.body.bigim_time_window&&(this.stateCenter.bigimTimeWindow=e.body.bigim_time_window),e.body.dati_time_window&&"number"==typeof e.body.dati_time_window&&(this.stateCenter.datiTimeWindow=e.body.dati_time_window),this.ReliableMessageHandler(e),this.fetchStreamList(e),e.body.server_user_seq!==this.stateCenter.userSeq&&this.stateCenter.userStateUpdate&&(this.logger.info("zb.hb.hhbr call update user "+e.body.server_user_seq,this.stateCenter.userSeq),this.fetchUserList()),this.stateCenter.publishStreamList)this.stateCenter.publishStreamList[t].state==l.ENUM_PUBLISH_STREAM_STATE.update_info&&(this.logger.info("zb.hb.hhbr try to update stream info"),this.updateStreamInfo(t,l.ENUM_STREAM_SUB_CMD.liveBegin,this.stateCenter.publishStreamList[t].extra_info));void 0!=e.body.online_count&&0!=e.body.online_count&&this.onUpdateOnlineCount(this.stateCenter.roomid,e.body.online_count),this.logger.debug("zb.hb.hhbr call success")},e.prototype.ReliableMessageHandler=function(e){if(e.body.trans_seqs)for(var t=0;t<e.body.trans_seqs.length;t++){var n=e.body.trans_seqs[t].trans_type,l=e.body.trans_seqs[t].trans_seq;if(!this.stateCenter.transSeqMap[n]||this.stateCenter.transSeqMap[n].seq!==l){var i=0;this.stateCenter.transSeqMap[n]?(i=this.stateCenter.transSeqMap[n].seq,this.logger.debug("zb.hb.rmh type "+n+" old seq "+this.stateCenter.transSeqMap[n].seq+" server seq "+l)):(i=0,this.logger.debug("zb.hb.rmh type "+n+" server seq "+l)),this.fetchReliableMessage(n,i)}}},e.prototype.fetchReliableMessage=function(e,t){var n=this;this.logger.debug("zb.hb.frm call");var l={trans_type:e,trans_local_seq:t};this.socketCenter.registerRouter("trans_fetch",function(e){n.handleFetchTransRsp(e)}),this.socketCenter.sendMessage("trans_fetch",l),this.logger.debug("zb.hb.frm call success")},e.prototype.handleFetchTransRsp=function(e){if(this.stateCenter.isLogin())if(0==e.body.err_code){var t=e.body.trans_type,n=e.body.trans_seq;this.stateCenter.transSeqMap[t]={seq:n},e.body.trans_user_idname!=this.stateCenter.idName&&this.onRecvReliableMessage(t,n,e.body.trans_data),this.logger.debug("zb.hb.hftr trans "+t+" seq "+n)}else this.logger.error("zb.hb.hftr trans send error "+e.body.err_code);else this.logger.error("zb.hb.hftr not login")},e.prototype.fetchStreamList=function(e){var t=this;e.body.stream_seq!==this.stateCenter.streamSeq&&(this.logger.debug("zb.hb.fsl current seq "+this.stateCenter.streamSeq+" server Seq "+e.body.stream_seq),this.logger.debug("zb.hb.fsl call"),this.stateCenter.isLogin()?this.stateCenter.streamQuerying?this.logger.warn("zb.hb.fsl already doing"):(this.stateCenter.streamQuerying=!0,this.logger.debug("zb.hb.fsl send fetch request"),this.socketCenter.registerRouter("stream_info",function(e){t.handleFetchStreamListRsp(e)}),this.socketCenter.sendMessage("stream_info",{reserve:0}),this.logger.debug("zb.hb.fsl call success")):this.logger.error("zb.hb.fsl state error"))},e.prototype.handleFetchStreamListRsp=function(e){},e.prototype.fetchUserList=function(){},e.prototype.updateStreamInfo=function(e,t,n,l){void 0===n&&(n="")},e.prototype.onUpdateOnlineCount=function(e,t){},e.prototype.onRecvReliableMessage=function(e,t,n){},e.prototype.resetCheckMessage=function(){this.logger.debug("zb.hb.rcm call"),clearTimeout(this.stateCenter.sendDataCheckTimer),this.stateCenter.sendDataCheckTimer=null,this.checkSendMessageList(this.stateCenter.sendDataList),this.checkSendMessageList(this.stateCenter.sendCommandList),this.stateCenter.sendDataMap={},this.stateCenter.sendCommandMap={},this.logger.debug("zb.hb.rcm call success")},e.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)e.remove(t),t._data.error&&(t._data.data.body.custom_msg?t._data.error(l.sdkErrorList.SEND_MSG_TIMEOUT,t._data.data.header.seq,t._data.data.body.custom_msg):t._data.error(l.sdkErrorList.SEND_MSG_TIMEOUT,t._data.data.header.seq)),t=e.getFirst()},e.prototype.checkMessageListTimeout=function(e,t){for(var n=e.getFirst(),i=Date.parse(new Date+""),r=0,o=0,s=0;!(null==n||n._data.time+this.stateCenter.sendDataTimeout>i||(delete t[n._data.data.header.seq],e.remove(n),++o,null==n._data.error||this.stateCenter.sendDataDropTimeout>0&&n._data.time+this.stateCenter.sendDataDropTimeout<i?++s:n._data.data.body.custom_msg?n._data.error(l.sdkErrorList.SEND_MSG_TIMEOUT,n._data.data.header.seq,n._data.data.body.custom_msg):n._data.error(l.sdkErrorList.SEND_MSG_TIMEOUT,n._data.data.header.seq),++r>=this.stateCenter.sendDataCheckOnceCount));)n=e.getFirst();0==o&&0==s||this.logger.debug("zb.hb.cmt call success, stat: timeout=",o,"drop=",s)},e.prototype.startCheckMessageTimeout=function(){var e=this;this.stateCenter.isLogin()?(this.checkMessageListTimeout(this.stateCenter.sendDataList,this.stateCenter.sendDataMap),this.checkMessageListTimeout(this.stateCenter.sendCommandList,this.stateCenter.sendCommandMap),this.stateCenter.sendDataCheckTimer=setTimeout(function(){e.startCheckMessageTimeout()},this.stateCenter.sendDataCheckInterval)):this.logger.error("zb.hb.scmt state error")},e}();t.HeartBeatHandler=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),i=n(1),r=function(){function e(e,t,n){this.logger=e,this.socketCenter=n,this.stateCenter=t}return e.prototype.setCDNInfo=function(e,t){},e.prototype.onStreamUpdated=function(e,t){},e.prototype.onStreamExtraInfoUpdated=function(e){},e.prototype.handleStreamStart=function(e,t){var n=this;if(this.stateCenter.streamQuerying=!1,this.socketCenter.registerRouter("stream",function(e){n.handleStreamUpdateRsp(e)}),this.socketCenter.registerRouter("push_stream_update",function(e){n.handlePushStreamUpdateMsg(e)}),e==l.ENUM_RUN_STATE.login)this.logger.info("zb.sh.hss recover from disconnect so call streamupdate"),this.handleFullUpdateStream(t.body.stream_seq,t.body.stream_info||[]);else{this.logger.info("zb.sh.hss success callback user"),this.stateCenter.streamList=t.body.stream_info||[],this.stateCenter.streamSeq=t.body.stream_seq;for(var r=0;r<this.stateCenter.streamList.length;r++)this.stateCenter.streamList[r].anchor_id_name==this.stateCenter.idName&&(this.updateStreamInfo(this.stateCenter.streamList[r].stream_id,l.ENUM_STREAM_SUB_CMD.liveEnd),this.stateCenter.streamList.splice(r,1));var o=this.makeCallbackStreamList(this.stateCenter.streamList);i.ClientUtil.actionSuccessCallback("login",this.stateCenter.callbackList)(o)}},e.prototype.onPublishStateUpdate=function(e,t,n){},e.prototype.updateStreamInfo=function(e,t,n,l){var i=this;void 0===n&&(n=""),this.logger.debug("zb.sh.usi call");var r={stream_id:e,extra_info:n},o={sub_cmd:t,stream_msg:JSON.stringify(r)};this.socketCenter.registerRouter("stream",function(e){i.handleStreamUpdateRsp(e)}),this.socketCenter.sendMessage("stream",o,void 0,l),this.logger.info("zb.sh.usi call success cmd "+t)},e.prototype.handleStreamUpdateRsp=function(e){if(this.stateCenter.isLogin())if(0==e.body.err_code){this.logger.debug("zb.sh.hsur stream seq "+this.stateCenter.streamSeq+" server seq "+e.body.stream_seq),this.stateCenter.streamSeq=e.body.stream_seq;for(var t=0;t<e.body.stream_info.length;t++){var n=e.body.stream_info[t].stream_id;if(!this.stateCenter.publishStreamList[n])return void this.logger.info("hsur.0 stream is not exist");this.stateCenter.publishStreamList[n].state==l.ENUM_PUBLISH_STREAM_STATE.update_info&&(this.stateCenter.publishStreamList[n].state=l.ENUM_PUBLISH_STREAM_STATE.publishing,this.onPublishStateUpdate(0,n,0))}}else this.logger.error("zb.sh.hsur stream update error "+e.body.err_code);else this.logger.error("zb.sh.hsur not login")},e.prototype.handleFetchStreamListRsp=function(e){this.logger.debug("zb.sh.hfslr call"),this.stateCenter.streamQuerying=!1,0===e.body.err_code?this.stateCenter.streamSeq!==e.body.stream_seq?(this.handleFullUpdateStream(e.body.stream_seq,e.body.stream_info),this.logger.debug("zb.sh.hfslr call success")):this.logger.info("zb.sh.hfslr same seq"):this.logger.info("zb.sh.hfslr server error=",e.body.err_code)},e.prototype.handleFullUpdateStream=function(e,t){var n=this;this.logger.debug("zb.sh.hfus call"),this.stateCenter.streamSeq=e,this.logger.debug("zb.sh.hfus server seq "+this.stateCenter.streamSeq),i.ClientUtil.mergeStreamList(this.logger,this.stateCenter.idName,this.stateCenter.streamList,t,function(e,t,i){0!==e.length&&(n.logger.debug("zb.sh.hfus callback addstream"),n.onStreamUpdated(l.ENUM_STREAM_UPDATE_TYPE.added,n.makeCallbackStreamList(e))),0!==t.length&&(n.logger.debug("zb.sh.hfus callback delstream"),n.onStreamUpdated(l.ENUM_STREAM_UPDATE_TYPE.deleted,n.makeCallbackStreamList(t))),0!==i.length&&(n.logger.debug("zb.sh.hfus callback updatestream"),n.onStreamExtraInfoUpdated(n.makeCallbackStreamList(i)))}),this.logger.info("zb.sh.hfus call success")},e.prototype.handlePushStreamUpdateMsg=function(e){if(this.logger.debug("zb.sh.hpsum call"),e.body.stream_info&&0!==e.body.stream_info.length){if(e.body.stream_info.length+this.stateCenter.streamSeq!==e.body.stream_seq)return this.logger.info("zb.sh.hpsum call updatestream"),void this.fetchStreamList();switch(this.stateCenter.streamSeq=e.body.stream_seq,e.body.stream_cmd){case l.ENUM_STREAM_UPDATE_CMD.added:this.handleAddedStreamList(e.body.stream_info);break;case l.ENUM_STREAM_UPDATE_CMD.deleted:this.handleDeletedStreamList(e.body.stream_info);break;case l.ENUM_STREAM_UPDATE_CMD.updated:this.handleUpdatedStreamList(e.body.stream_info)}this.logger.info("zb.sh.hpsum call success")}else this.logger.info("zb.sh.hpsum, emtpy list")},e.prototype.handleAddedStreamList=function(e){this.logger.debug("zb.sh.hasl call");for(var t,n=[],i=0;i<e.length;i++)if(e[i].anchor_id_name!=this.stateCenter.idName){t=!1;for(var r=0;r<this.stateCenter.streamList.length;r++)if(e[i].stream_id===this.stateCenter.streamList[r].stream_id){t=!0;break}t||n.push(e[i])}else this.logger.debug("hdsl.0 have self stream added");if(0!==n.length){this.logger.debug("zb.sh.hasl callback addstream");for(var o=0;o<n.length;o++)this.stateCenter.streamList.push(n[o]);this.onStreamUpdated(l.ENUM_STREAM_UPDATE_TYPE.added,this.makeCallbackStreamList(n))}this.logger.info("zb.sh.hasl call success")},e.prototype.handleDeletedStreamList=function(e){this.logger.debug("zb.sh.hdsl call");for(var t=[],n=0;n<e.length;n++)if(e[n].anchor_id_name!=this.stateCenter.idName){for(var i=this.stateCenter.streamList.length-1;i>=0;i--)if(e[n].stream_id===this.stateCenter.streamList[i].stream_id){this.stateCenter.streamList.splice(i,1),t.push(e[n]);break}}else this.logger.debug("zb.sh.hdsl have self stream deleted");0!==t.length&&(this.logger.debug("zb.sh.hdsl callback delstream"),this.onStreamUpdated(l.ENUM_STREAM_UPDATE_TYPE.deleted,this.makeCallbackStreamList(t))),this.logger.info("zb.sh.hdsl call")},e.prototype.handleUpdatedStreamList=function(e){this.logger.debug("zb.sh.husl call");for(var t=[],n=0;n<e.length;n++)if(e[n].anchor_id_name!=this.stateCenter.idName){for(var l=0;l<this.stateCenter.streamList.length;l++)if(e[n].stream_id===this.stateCenter.streamList[l].stream_id){e[n].extra_info!==this.stateCenter.streamList[l].extra_info&&(this.stateCenter.streamList[l]=e[n],t.push(e[n]));break}}else this.logger.debug("hsul.0 have self stream updated");0!==t.length&&(this.logger.debug("zb.sh.husl callback updatestream"),this.onStreamExtraInfoUpdated(this.makeCallbackStreamList(t))),this.logger.info("zb.sh.husl call success")},e.prototype.fetchStreamList=function(){this.logger.debug("zb.sh.fsl call"),this.stateCenter.isLogin()?this.logger.info("zb.sh.fsl state error"):this.stateCenter.streamQuerying?this.logger.info("zb.sh.fsl already doing"):(this.stateCenter.streamQuerying=!0,this.logger.debug("zb.sh.fsl send fetch request"),this.socketCenter.registerRouter("stream_info",this.handleFetchStreamListRsp),this.socketCenter.sendMessage("stream_info",{reserve:0}),this.logger.debug("zb.sh.fsl call success"))},e.prototype.makeCallbackStreamList=function(e){var t=[];if(e&&e.length>0)for(var n=0;n<e.length;n++){var l={anchor_id_name:e[n].anchor_id_name,stream_gid:e[n].stream_gid,anchor_nick_name:e[n].anchor_nick_name,extra_info:e[n].extra_info,stream_id:e[n].stream_id,urls_flv:"",urls_rtmp:"",urls_hls:"",urls_https_flv:"",urls_https_hls:""};this.setCDNInfo(l,e[n]),t.push(l)}return t},e.prototype.updateMixStream=function(e,t,n){var r=this;if(this.logger.debug("zb.sh.ums call"),void 0==e.outputStreamId&&void 0==e.outputUrl)return this.logger.error("zb.sh.ums no mix stream info"),!1;if(0==e.streamList.length)return this.logger.error("zb.sh.ums no input stream"),!1;var o={id_name:this.stateCenter.idName,live_channel:this.stateCenter.roomid,appid:this.stateCenter.appid,version:l.PROTO_VERSION};"string"==typeof e.userData&&e.userData.length<=1e4&&(o.UserData=e.userData);for(var s=[],a=0;a<e.streamList.length;a++){var u=e.streamList[a],c=u.streamId;this.stateCenter.testEnvironment&&(c="zegotest-"+this.stateCenter.appid+"-"+u.streamId),s.push({stream_id:c,rect:{layer:a,top:u.top,left:u.left,bottom:u.bottom,right:u.right}})}o.MixInput=s;var d={};if(void 0!=e.outputStreamId?d.stream_id=this.stateCenter.testEnvironment?"zegotest-"+this.stateCenter.appid+"-"+e.outputStreamId:e.outputStreamId:void 0!=e.outputUrl&&(d.mixurl=e.outputUrl),!e.outputBitrate)return this.logger.error("zb.sh.ums no bitrate param"),!1;if(d.bitrate=e.outputBitrate,!e.outputFps)return this.logger.error("zb.sh.ums no fps param"),!1;if(d.fps=e.outputFps,!e.outputWidth)return this.logger.error("zb.sh.ums no width param"),!1;if(d.width=e.outputWidth,!e.outputHeight)return this.logger.error("zb.sh.ums no height param"),!1;d.height=e.outputHeight,e.outputAudioConfig&&(d.audio_enc_id=e.outputAudioConfig),e.outputAudioBitrate&&(d.audio_bitrate=e.outputAudioBitrate),e.outputAudioChannels&&(d.audio_channel_cnt=e.outputAudioChannels),e.outputBgColor&&(d.output_bg_color=e.outputBgColor),e.outputBgImage&&(d.output_bg_image=e.outputBgImage),d.testenv=this.stateCenter.testEnvironment?1:0,o.MixOutput=[d];var h={channel:"zeus",cmd:"start_mix",req_body:JSON.stringify(o)};return this.logger.debug("zb.sh.ums send command"),this.socketCenter.sendMessage("biz_channel",h,function(o,s,a){r.logger.debug("zb.sh.ums receive message");var u="zegotest-"+r.stateCenter.appid+"-";if(0!=a.length){for(var c=JSON.parse(a),d=[],h=e.outputStreamId,p=0;p<c.play.length;p++){var g={rtmpUrls:null,hlsUrls:null,flvUrls:null};r.stateCenter.testEnvironment&&h.startsWith(u)&&(h=h.slice(u.length)),c.play[p].rtmp_url&&c.play[p].rtmp_url.length>0&&(g.rtmpUrls=[c.play[p].rtmp_url]),c.play[p].hls_url&&c.play[p].hls_url.length>0&&(g.hlsUrls=[c.play[p].hls_url]),c.play[p].hdl_url&&c.play[p].hdl_url.length>0&&(g.flvUrls=[c.play[p].hdl_url]),d.push(g)}t&&t(h,d)}else n&&n(i.ClientUtil.getServerError(l.MIXSTREAM_ERROR_CODE+1))},function(e,t,o){if("number"==typeof e){r.logger.debug("zb.sh.ums error: "+e);var s=[];if(1000000150==e&&0!=o.length)for(var a=JSON.parse(o),u="zegotest-"+r.stateCenter.appid+"-",c=0;c<a.non_exist_streams.length;c++){var d=a.non_exist_streams[c];r.stateCenter.testEnvironment&&d.startsWith(u)?s.push(d.slice(u.length)):s.push(d)}n&&n(i.ClientUtil.getServerError(l.MIXSTREAM_ERROR_CODE+e),s)}else r.logger.debug("zb.sh.ums error code "+e.code),n&&n(e)}),!0},e.prototype.stopMixStream=function(e,t,n){if(this.logger.debug("zb.sh.sms call"),void 0==e.outputStreamId&&void 0==e.outputUrl)return this.logger.error("zb.sh.sms no mix stream info"),!1;var r={id_name:this.stateCenter.idName,live_channel:this.stateCenter.roomid,appid:this.stateCenter.appid,version:l.PROTO_VERSION};void 0!=e.outputStreamId?r.stream_id=this.stateCenter.testEnvironment?"zegotest-"+this.stateCenter.appid+"-"+e.outputStreamId:e.outputStreamId:void 0!=e.outputUrl&&(r.mixurl=e.outputUrl);var o={channel:"zeus",cmd:"stop_mix",req_body:JSON.stringify(r)};return this.socketCenter.sendMessage("biz_channel",o,function(e,n){t&&t()},function(e,t){"number"==typeof e?n&&n(i.ClientUtil.getServerError(l.MIXSTREAM_ERROR_CODE+e)):n&&n(e)}),!0},e.prototype.updateStreamExtraInfo=function(e,t){return this.logger.debug("zb.sh.usei call"),e?"string"==typeof t&&(this.stateCenter.publishStreamList[e]&&(this.stateCenter.publishStreamList[e].extra_info=t,this.stateCenter.publishStreamList[e].state>=l.ENUM_PUBLISH_STREAM_STATE.update_info&&this.updateStreamInfo(e,l.ENUM_STREAM_SUB_CMD.liveUpdate,t)),!0):(this.logger.error("zb.sh.usei param error"),!1)},e}();t.StreamHandler=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),i=n(2),r=function(){function e(){this.testEnvironment=!1,this.configOK=!1,this.roomCreateFlag=1,this.runState=l.ENUM_RUN_STATE.logout,this.lastRunState=l.ENUM_RUN_STATE.logout,this.callbackList={},this.streamList=[],this.publishStreamList={},this.userQuerying=!1,this.userTempList=[],this.userSeq=0,this.sendCommandMap={},this.sendCommandList=new l.LinkedList,this.sendDataMap={},this.sendDataList=new l.LinkedList,this.joinLiveCallbackMap={},this.joinLiveRequestMap={},this.streamUrlMap={},this.cmdCallback={},this.transSeqMap={},this.realyMessageList=[],this.relayTimer=null,this.bigImLastTimeIndex=0,this.bigIMmessageList=[],this.bigImCallbackMap={},this.bigImTimer=null,this.serverTimeOffset=0,this.datiTimeWindow=0,this.bigimTimeWindow=0,this.bigImMessageList=[],this.tryLoginCount=0,this.tryLoginTimer=null,this.heartbeatTimer=null,this.sendDataCheckTimer=null,this.sendDataCheckInterval=2e3,this.sendDataTimeout=5e3,this.sendDataDropTimeout=1e4,this.sendDataCheckOnceCount=100,this.sendRoomMsgTime=0,this.SendRoomMsgInterval=500,this.cmdSeq=0}return e.prototype.isLogin=function(){return this.runState===l.ENUM_RUN_STATE.login},e.prototype.getRequestId=function(){return this.idName+"-"+i.getSeq()},e.prototype.getSignalCmdContent=function(e,t,n){var l={request_id:e,room_id:this.roomid,from_userid:this.idName,from_username:this.nickName,to_userid:t};return void 0!=n&&(l.result=n),JSON.stringify(l)},e}();t.StateCenter=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),i=n(1),r=function(){function e(e,t,n){this.logger=e,this.socketCenter=n,this.stateCenter=t}return e.prototype.setRunState=function(e){this.logger.debug("zb.rh.srs old="+this.stateCenter.runState+", new="+e),this.stateCenter.lastRunState=this.stateCenter.runState,this.stateCenter.runState=e},e.prototype.resetTryLogin=function(){this.logger.debug("zb.rh.rtl call"),clearTimeout(this.stateCenter.tryLoginTimer),this.stateCenter.tryLoginTimer=null,this.stateCenter.tryLoginCount=0,this.logger.debug("zb.rh.rtl call success")},e.prototype.resetBigRoomInfo=function(){this.stateCenter.transSeqMap={},this.stateCenter.realyMessageList=[],this.stateCenter.relayTimer&&(clearTimeout(this.stateCenter.relayTimer),this.stateCenter.relayTimer=null),this.stateCenter.bigImLastTimeIndex=0,this.stateCenter.bigIMmessageList=[],this.stateCenter.bigImCallbackMap={},this.stateCenter.bigImTimer&&(clearTimeout(this.stateCenter.bigImTimer),this.stateCenter.bigImTimer=null),this.stateCenter.serverTimeOffset=0,this.stateCenter.datiTimeWindow=0,this.stateCenter.bigimTimeWindow=0},e.prototype.resetRoom=function(){var e=this;this.logger.debug("zb.rh.rr call"),this.resetTryLogin(),this.resetRoomCallBack(),this.stateCenter.streamList=[],this.stateCenter.streamQuerying=!1,this.stateCenter.publishStreamList={},this.stateCenter.joinLiveCallbackMap={},this.stateCenter.joinLiveRequestMap={},this.stateCenter.streamUrlMap={},this.resetBigRoomInfo(),this.stateCenter.cmdCallback={},this.logger.debug("zb.rh.rr call send logout=",this.stateCenter.sessionid),"0"!==this.stateCenter.sessionid&&(this.socketCenter.registerRouter("logout",function(t){e.handleLogoutRsp(t)}),this.socketCenter.sendMessage("logout",{reserve:0})),this.socketCenter.closeSocket(),this.stateCenter.userid="",this.stateCenter.sessionid="",this.logger.setSessionInfo(this.stateCenter.appid,this.stateCenter.roomid,this.stateCenter.userid,this.stateCenter.idName,this.stateCenter.sessionid,l.PROTO_VERSION),this.logger.debug("zb.rh.rr call success")},e.prototype.resetRoomCallBack=function(){},e.prototype.onDisconnect=function(e){},e.prototype.loginSuccessCallBack=function(e,t){},e.prototype.onGetTotalUserList=function(e,t){},e.prototype.login=function(e,t,n,r,o){if(this.logger.setSessionInfo(this.stateCenter.appid,e,"",this.stateCenter.idName,"",l.PROTO_VERSION),this.logger.info("zb.rh.lg call:",e,n),!this.stateCenter.configOK||!i.ClientUtil.checkLoginParam(e,n))return this.logger.error("zb.rh.lg param error"),void o({code:"",msg:"param error"});this.stateCenter.runState!==l.ENUM_RUN_STATE.logout&&(this.logger.debug("zb.rh.lg reset"),this.setRunState(l.ENUM_RUN_STATE.logout),this.resetRoom()),this.logger.debug("zb.rh.lg begin"),this.setRunState(l.ENUM_RUN_STATE.trylogin),this.stateCenter.roomid=e,this.stateCenter.token=n,this.stateCenter.role=t,i.ClientUtil.registerCallback("login",{success:r,error:o},this.stateCenter.callbackList),this.resetTryLogin(),this.tryLogin(),this.logger.info("zb.rh.lg call success")},e.prototype.loginBodyData=function(){return{id_name:this.stateCenter.idName,nick_name:this.stateCenter.nickName,role:this.stateCenter.role,token:this.stateCenter.token,version:l.PROTO_VERSION,room_name:this.stateCenter.roomid,user_state_flag:this.stateCenter.userStateUpdate?1:0,room_create_flag:this.stateCenter.roomCreateFlag}},e.prototype.tryLogin=function(){var e=this;if(this.logger.debug("zb.rh.tl call"),this.stateCenter.runState===l.ENUM_RUN_STATE.trylogin){if(++this.stateCenter.tryLoginCount>l.MAX_TRY_LOGIN_COUNT){this.logger.error("zb.rh.tl fail times limit");var t=this.stateCenter.lastRunState;return this.setRunState(l.ENUM_RUN_STATE.logout),this.resetRoom(),void(t==l.ENUM_RUN_STATE.login?(this.logger.error("zb.rh.tl fail and disconnect"),this.onDisconnect(l.sdkErrorList.LOGIN_DISCONNECT)):(this.logger.info("zb.rh.tl fail and callback user"),i.ClientUtil.actionErrorCallback("login",this.stateCenter.callbackList)(l.sdkErrorList.LOGIN_TIMEOUT)))}if(this.socketCenter.isDisConnect()){this.logger.debug("zb.rh.tl need new websocket");try{this.socketCenter.closeSocket(),this.logger.debug("zb.rh.tl new websocket"),this.socketCenter.createSocket(this.stateCenter.server),this.socketCenter.registerRouter("login",function(t,n){e.handleLoginRsp(t,n)}),this.socketCenter.closeHandler(function(t){e.closeHandler(t)}),this.socketCenter.openHandler(function(){e.openHandler()})}catch(e){this.logger.error("zb.rh.tl websocket err:"+e)}}else{var n=this.loginBodyData();this.logger.info("zb.rh.tl use current websocket and sent login"),this.socketCenter.sendMessage("login",n)}this.stateCenter.tryLoginTimer=setTimeout(function(){e.tryLogin()},l.TRY_LOGIN_INTERVAL[this.stateCenter.tryLoginCount%l.MAX_TRY_LOGIN_COUNT]),this.logger.info("zb.rh.tl call success")}else this.logger.error("zb.rh.tl state error")},e.prototype.handleLoginRsp=function(e,t){if(this.logger.debug("zb.rh.hlr call"),this.stateCenter.runState===l.ENUM_RUN_STATE.trylogin){if(e.header.seq===t)return 0!==e.body.err_code?(this.handleLoginFail(e),void this.logger.error("zb.rh.hlr server error=",e.body.err_code)):(this.handleLoginSuccess(e),void this.logger.info("zb.rh.hlr call success."));this.logger.error("zb.rh.hlr in wrong seq, local=",t,",recv=",e.header.seq)}else this.logger.error("zb.rh.hlr state error")},e.prototype.handleLoginFail=function(e){if(this.logger.debug("zb.rh.hlf call"),i.ClientUtil.isKeepTryLogin(e.body.err_code))this.logger.warn("zb.rh.hlf KeepTry true");else{var t=this.stateCenter.lastRunState;this.setRunState(l.ENUM_RUN_STATE.logout),this.resetRoom();var n=i.ClientUtil.getServerError(e.body.err_code);t===l.ENUM_RUN_STATE.login?(this.logger.info("zb.rh.hlf callback disconnect"),this.onDisconnect(n)):(this.logger.info("zb.rh.hlf callback error"),i.ClientUtil.actionErrorCallback("login",this.stateCenter.callbackList)(n)),this.logger.debug("zb.rh.hlf call success")}},e.prototype.handleLoginSuccess=function(e){this.logger.info("zb.rh.hls call");var t=this.stateCenter.lastRunState;if(this.setRunState(l.ENUM_RUN_STATE.login),this.stateCenter.userid=e.body.user_id,this.stateCenter.sessionid=e.body.session_id,this.logger.setSessionInfo(this.stateCenter.appid,this.stateCenter.roomid,this.stateCenter.userid,this.stateCenter.idName,this.stateCenter.sessionid,l.PROTO_VERSION),e.body.config_info&&(this.logger.setRemoteLogLevel(e.body.config_info.log_level),""!=e.body.config_info.log_url&&this.logger.openLogServer(e.body.config_info.log_url)),void 0!=e.body.ret_timestamp&&"string"==typeof e.body.ret_timestamp){var n=parseFloat(e.body.ret_timestamp);this.stateCenter.serverTimeOffset=0==n?0:e.body.ret_timestamp-(new Date).getTime()}e.body.bigim_time_window&&"number"==typeof e.body.bigim_time_window&&(this.stateCenter.bigimTimeWindow=e.body.bigim_time_window),e.body.dati_time_window&&"number"==typeof e.body.dati_time_window&&(this.stateCenter.datiTimeWindow=e.body.dati_time_window),this.resetTryLogin(),this.loginSuccessCallBack(t,e)},e.prototype.openHandler=function(){this.logger.info("zb.rh.oh websocket.onpen call"),this.socketCenter.responseHandler();var e=this.loginBodyData();this.logger.info("zb.rh.oh websocket.onpen send login"),this.socketCenter.sendMessage("login",e),this.logger.debug("zb.rh.oh websocket.onpen call success")},e.prototype.closeHandler=function(e){this.logger.info("zb.rh.ws.oc msg="+JSON.stringify(e)),this.stateCenter.runState!==l.ENUM_RUN_STATE.logout?this.stateCenter.runState===l.ENUM_RUN_STATE.trylogin&&this.stateCenter.tryLoginCount<=l.MAX_TRY_LOGIN_COUNT?this.logger.info("zb.rh.ws.oc is called because of try login"):this.stateCenter.runState===l.ENUM_RUN_STATE.login?(this.logger.info("zb.rh.ws.oc is called because of network broken, try again"),this.setRunState(l.ENUM_RUN_STATE.trylogin),this.resetTryLogin(),this.tryLogin()):(this.logger.error("zb.rh.ws.oc out of think!!!"),this.setRunState(l.ENUM_RUN_STATE.logout),this.resetRoom(),this.onDisconnect(l.sdkErrorList.UNKNOWN)):this.logger.info("zb.rh.ws.oc onclose logout flow call websocket.close")},e.prototype.logout=function(){return this.logger.debug("zb.rh.lo call"),this.stateCenter.runState===l.ENUM_RUN_STATE.logout?(this.logger.warn("zb.rh.lo at logout"),!1):(this.setRunState(l.ENUM_RUN_STATE.logout),this.resetRoom(),this.logger.info("zb.rh.lo call success"),!0)},e.prototype.setUserStateUpdate=function(e){return this.logger.debug("zb.rh.su call"),"boolean"!=typeof e?(this.logger.info("zb.rh.su param error"),!1):(this.stateCenter.userStateUpdate=e,this.logger.info("zb.rh.su call success "+e),!0)},e.prototype.fetchUserList=function(){this.logger.debug("zb.rh.ful call"),this.stateCenter.userQuerying?this.logger.warn("zb.rh.ful is already querying"):(this.stateCenter.userQuerying=!0,this.stateCenter.userTempList=[],this.fetchUserListWithPage(0),this.logger.info("zb.rh.ful the first time call"))},e.prototype.fetchUserListWithPage=function(e){var t=this;this.logger.debug("zb.rh.fulwp call"),this.socketCenter.registerRouter("user_list",function(e){t.handleFetchUserListRsp(e)}),this.socketCenter.sendMessage("user_list",{user_index:e,sort_type:0}),this.logger.info("zb.rh.fulwp call success")},e.prototype.handleFetchUserListRsp=function(e){if(this.logger.debug("zb.rh.hfulr call"),0!=e.body.err_code)return this.stateCenter.userQuerying=!1,void this.logger.info("zb.rh.hfulr fetch error "+e.body.err_code);if(this.stateCenter.userStateUpdate){this.stateCenter.userTempList=this.stateCenter.userTempList.concat(e.body.user_baseinfos);var t=e.body.ret_user_index;if(t!=e.body.server_user_index)return this.logger.warn("zb.rh.hfulr fetch another page"),void this.fetchUserListWithPage(t+1);this.stateCenter.userSeq=e.body.server_user_seq,this.logger.info("zb.rh.hfulr set user Seq "+this.stateCenter.userSeq);for(var n=[],l=0;l<this.stateCenter.userTempList.length;l++){n.push({idName:this.stateCenter.userTempList[l].id_name,nickName:this.stateCenter.userTempList[l].nick_name,role:this.stateCenter.userTempList[l].role})}this.stateCenter.userQuerying=!1,this.onGetTotalUserList(this.stateCenter.roomid,n),this.stateCenter.userTempList=[],this.logger.info("zb.rh.hfulr call success user_list "+n+" count "+n.length)}},e.prototype.handleLogoutRsp=function(e){this.logger.debug("zb.rh.hlor result=",e.body.err_code)},e.prototype.handlePushUserStateUpdateMsg=function(e){if(this.logger.debug("zb.rh.hpus call"),this.stateCenter.isLogin())if(this.stateCenter.userStateUpdate){if(this.stateCenter.userSeq+e.body.user_actions.length!==e.body.user_list_seq)return this.logger.warn("zb.rh.hpus fetch new userlist "+this.stateCenter.userSeq,NaN+e.body.user_list_seq),void this.fetchUserList();this.stateCenter.userSeq=e.body.user_list_seq,this.logger.debug("zb.rh.hpus push userSeq "+this.stateCenter.userSeq);for(var t=[],n=0;n<e.body.user_actions.length;n++){t.push({action:e.body.user_actions[n].Action,idName:e.body.user_actions[n].IdName,nickName:e.body.user_actions[n].NickName,role:e.body.user_actions[n].Role,loginTime:e.body.user_actions[n].LoginTime})}this.onUserStateUpdate(e.body.room_id,t),this.logger.info("zb.rh.hpus call success")}else this.logger.error("zb.rh.hpus no userStateUpdate flag");else this.logger.error("zb.rh.hpus not login")},e.prototype.onUserStateUpdate=function(e,t){},e}();t.RoomHandler=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),i=n(1),r=function(){function e(e,t){var n=this;this.cmdSeq=0,this.responseRouters={},this.logger=e,this.stateCenter=t,this.responseRouters={push_kickout:function(e){n.handlePushKickout(e)},push_custommsg:function(e){n.handlePushCustomMsg(e)},push_im_chat:function(e){n.handlePushRoomMsg(e)},push_userlist_update:function(e){n.handlePushUserStateUpdateMsg(e)},push_merge_message:function(e){n.handlePushMergeMsg(e)},trans:function(e){n.handleTransRsp(e)},push_trans:function(e){n.handlePushTransMsg(e)}}}return e.prototype.handlePushKickout=function(e){},e.prototype.handlePushCustomMsg=function(e){},e.prototype.handlePushRoomMsg=function(e){},e.prototype.handlePushUserStateUpdateMsg=function(e){},e.prototype.handlePushMergeMsg=function(e){},e.prototype.handlePushTransMsg=function(e){},e.prototype.handleBigImMsgRsp=function(e){},e.prototype.handleTransRsp=function(e){if(this.stateCenter.isLogin())if(0==e.body.err_code){var t=e.body.trans_type;this.stateCenter.transSeqMap[t]?(this.stateCenter.transSeqMap[t].seq=e.body.trans_seq,this.logger.debug("zb.sc.htr trans "+t+" seq "+e.body.trans_seq)):this.logger.error("zb.sc.htr cannot match send info")}else this.logger.error("zb.sc.htr trans send error "+e.body.err_code);else this.logger.error("zb.sc.htr not login")},e.prototype.handleBizChannelRspCallback=function(e,t){0===e.body.err_code?null!=t.success&&t.success(e.header.seq,e.body.cmd,e.body.rsp_body):null!=t.error&&t.error(e.body.err_code,e.header.seq,e.body.rsp_body)},e.prototype.registerRouter=function(e,t){this.responseRouters[e]=t},e.prototype.getSocket=function(e){return null},e.prototype.getHeader=function(e){return{Protocol:"req",cmd:e,appid:this.stateCenter.appid,seq:++this.cmdSeq,user_id:this.stateCenter.userid,session_id:this.stateCenter.sessionid||"",room_id:this.stateCenter.roomid||""}},e.prototype.sendMessage=function(e,t,n,l){if(this.logger.debug("zb.sc.sm call "+e),this.isDisConnect())return this.logger.error("zb.sc.sm error  "+e),-1;var i=this.getHeader(e),r={header:i,body:t};if(void 0==n&&(n=null),void 0==l&&(l=null),null!=n||null!=l){var o={data:r,seq:i.seq,deleted:!1,time:Date.parse(new Date+""),success:n,error:l},s=this.stateCenter.sendCommandList.push(o);this.stateCenter.sendCommandMap[o.seq]=s}return this.websocket.send(JSON.stringify(r)),this.logger.debug("zb.sc.sm success"),i.seq},e.prototype.sendCustomMessage=function(e,t,n,l){if(this.logger.debug("zb.sc.scm call"),this.isDisConnect())return this.logger.error("zb.sc.scm error"),!1;var i=this.getHeader(e),r={header:i,body:t},o=JSON.stringify(r);void 0==n&&(n=null),void 0==l&&(l=null);var s={data:r,seq:i.seq,deleted:!1,time:Date.parse(new Date+""),success:n,error:l},a=this.stateCenter.sendDataList.push(s);return this.stateCenter.sendDataMap[s.seq]=a,this.websocket.send(o),this.logger.debug("zb.sc.scm success seq: ",i.seq),!0},e.prototype.isDisConnect=function(){return!this.websocket||1!==this.websocket.readyState},e.prototype.closeSocket=function(){this.websocket&&(this.logger.info("zb.sc.cs close websocket"),this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null)},e.prototype.createSocket=function(e){this.websocket=this.getSocket(e)},e.prototype.openHandler=function(e){this.websocket.onopen=e},e.prototype.closeHandler=function(e){this.websocket.onclose=e},e.prototype.errorHandler=function(){var e=this;this.websocket.onerror=function(t){e.logger.error("zb.sc.oe msg="+JSON.stringify(t))}},e.prototype.checkResponse=function(e){return(e.header.appid!==this.stateCenter.appid||e.header.session_id!==this.stateCenter.sessionid||e.header.user_id!==this.stateCenter.userid||e.header.room_id!==this.stateCenter.roomid||this.stateCenter.runState!==l.ENUM_RUN_STATE.login)&&(this.logger.error("zb.sc.crp check session fail."),!0)},e.prototype.responseHandler=function(){var e=this;this.websocket.onmessage=function(t){var n=JSON.parse(t.data);e.logger.debug("zb.sc.ws.rph jsonmsg= ",n.header.cmd),"login"!==n.header.cmd?e.checkResponse(n)?e.logger.error("zb.sc.ws.rph check session fail."):(e.handleSendCommandMsgRsp(n),e.logger.info("zb.sc.ws.rph cmd="+n.header.cmd+",function="+!!e.responseRouters[n.header.cmd]),e.responseRouters[n.header.cmd]&&e.responseRouters[n.header.cmd](n)):e.responseRouters.login(n,e.cmdSeq)}},e.prototype.handleSendCommandMsgRsp=function(e){this.logger.debug("zb.sc.hscmr call");var t,n=this.stateCenter.sendCommandMap[e.header.seq];null!=n&&("login"==(t=n._data).data.header.cmd?this.logger.debug("zb.sc.hscmr don't check "+t.data.header.cmd):"relay"==t.data.header.cmd?this.handleRelayRspCallback(e,t):"bigim_chat"==t.data.header.cmd?this.handleBigImRspCallback(e,t):"biz_channel"==t.data.header.cmd?this.handleBizChannelRspCallback(e,t):0===e.body.err_code?null!=t.success&&t.success(e.header.seq):null!=t.error&&t.error(i.ClientUtil.getServerError(e.body.err_code),e.header.seq),delete this.stateCenter.sendCommandMap[e.header.seq],this.stateCenter.sendCommandList.remove(n)),this.logger.debug("zb.sc.hscmr call success")},e.prototype.handleRelayRspCallback=function(e,t){0===e.body.err_code?null!=t.success&&t.success(e.header.seq,e.body.relay_result):null!=t.error&&t.error(i.ClientUtil.getServerError(e.body.err_code),e.header.seq)},e.prototype.handleBigImRspCallback=function(e,t){0===e.body.err_code?null!=t.success&&this.handleBigImMsgRsp(e):null!=t.error&&t.error(i.ClientUtil.getServerError(e.body.err_code),e.header.seq)},e}();t.SocketCenter=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),i=function(){function e(){}return e.prototype.onPlayStateUpdateHandle=function(e,t,n){1==e&&this.stopPlayingStream(t),this.onPlayStateUpdate(e,t,n)},e.prototype.onPublishStateUpdateHandle=function(e,t,n){var i=this;0==e?this.stateCenter.publishStreamList[t]&&(this.stateCenter.publishStreamList[t].state==l.ENUM_PUBLISH_STREAM_STATE.tryPublish?(this.stateCenter.publishStreamList[t].state=l.ENUM_PUBLISH_STREAM_STATE.update_info,this.streamHandler.updateStreamInfo(t,l.ENUM_STREAM_SUB_CMD.liveBegin,this.stateCenter.publishStreamList[t].extra_info,function(e){i.stateCenter.publishStreamList[t]&&i.stateCenter.publishStreamList[t].state==l.ENUM_PUBLISH_STREAM_STATE.update_info&&(i.stateCenter.publishStreamList[t].state=l.ENUM_PUBLISH_STREAM_STATE.stop,i.onPublishStateUpdate(1,t,e),i.streamCenter.stopPlayingStream(t))})):this.WebrtcOnPublishStateUpdateHandle(e,t,n)):(this.onPublishStateUpdate(e,t,n),1==e&&this.stopPublishingStream(t))},e.prototype.resetStreamCenter=function(){if(this.stateCenter.customUrl&&(this.stateCenter.customUrl=null),this.streamCenter.reset(),!this.socketCenter.isDisConnect())for(var e in this.stateCenter.publishStreamList)this.stateCenter.publishStreamList[e].state==l.ENUM_PUBLISH_STREAM_STATE.publishing&&this.streamHandler.updateStreamInfo(e,l.ENUM_STREAM_SUB_CMD.liveEnd,this.stateCenter.publishStreamList[e].extra_info)},e.prototype.handleFetchWebRtcUrlRsp=function(e){var t=e.body.stream_id;if("push"===e.body.ptype)this.stateCenter.publishStreamList[t]?this.streamCenter.startPublishingStream(t,e.body.urls):this.logger.error("cb.cm.hfwur no streamid to publish");else if("pull"==e.body.ptype){for(var n=!1,l=0;l<this.stateCenter.streamList.length;l++)if(this.stateCenter.streamList[l].stream_id===t){n=!0;break}0==n&&this.logger.warn("cb.cm.hfwur cannot find stream, continue to play"),this.streamCenter.startPlayingStream(t,e.body.urls)}},e}();t.Common=i},function(e,t,n){"use strict";var l,i=this&&this.__extends||(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),o=n(0),s=n(1),a=n(9),u=n(8),c=n(7),d=n(6),h=n(5),p=n(4),g=n(3),f=function(e){function t(t,n){var l=e.call(this)||this;return l.logger=t,l.stateCenter=new c.StateCenter,l.streamCenter=n,l.bindSocketHandler(),l.bindStreamHandler(),l.bindHeatBeatHandler(),l.bindRoomHandler(),l.bindMessageHandler(),l.bindLiveHandler(),l.bindStreamCenterHandler(),l}return i(t,e),t.prototype.bindSocketHandler=function(){var e=this;this.socketCenter=new a.SocketCenter(this.logger,this.stateCenter),this.socketCenter.registerRouter("push_signal",function(t){e.liveHandler.handlePushSignalMsg(t)}),this.socketCenter.getSocket=function(t){return e.getSocket(t)},this.socketCenter.handlePushKickout=function(t){e.logger.info("zb.cm.bsh.0  call hpk"),e.roomHandler.setRunState(o.ENUM_RUN_STATE.logout),e.roomHandler.resetRoom(),e.onKickOut({code:o.sdkErrorList.KICK_OUT.code,msg:o.sdkErrorList.KICK_OUT.msg+t.body.reason}),e.logger.debug("zb.cm.bsh.0  call hpk success")},this.socketCenter.handlePushCustomMsg=function(t){e.messageHandler.handlePushCustomMsg(t)},this.socketCenter.handlePushUserStateUpdateMsg=function(t){e.roomHandler.handlePushUserStateUpdateMsg(t)},this.socketCenter.handlePushRoomMsg=function(t){e.onRecvRoomMsg(t.body.chat_data,t.body.server_msg_id,t.body.ret_msg_id)},this.socketCenter.handlePushMergeMsg=function(t){e.messageHandler.handlePushMergeMsg(t)},this.socketCenter.handlePushTransMsg=function(t){e.messageHandler.handlePushTransMsg(t)},this.socketCenter.handleBigImMsgRsp=function(t){e.messageHandler.handleBigImMsgRsp(t)}},t.prototype.bindStreamHandler=function(){var e=this;this.streamHandler=new d.StreamHandler(this.logger,this.stateCenter,this.socketCenter),this.streamHandler.onStreamUpdated=function(t,n){e.onStreamUpdated(t,n)},this.streamHandler.onPublishStateUpdate=function(t,n,l){e.onPublishStateUpdate(t,n,l)},this.streamHandler.onStreamExtraInfoUpdated=function(t){e.onStreamExtraInfoUpdated(t)},this.streamHandler.setCDNInfo=function(t,n){e.setCDNInfo(t,n)}},t.prototype.bindHeatBeatHandler=function(){var e=this;this.heartBeatHandler=new h.HeartBeatHandler(this.logger,this.stateCenter,this.socketCenter),this.heartBeatHandler.onRecvReliableMessage=function(t,n,l){e.onRecvReliableMessage(t,n,l)},this.heartBeatHandler.handleFetchStreamListRsp=function(t){e.streamHandler.handleFetchStreamListRsp(t)},this.heartBeatHandler.fetchUserList=function(){e.roomHandler.fetchUserList()},this.heartBeatHandler.onUpdateOnlineCount=function(t,n){e.onUpdateOnlineCount(t,n)},this.heartBeatHandler.updateStreamInfo=function(t,n,l,i){void 0===l&&(l=""),e.streamHandler.updateStreamInfo(t,n,l,i)},this.heartBeatHandler.hbLogout=function(t){e.onDisconnect(t)}},t.prototype.bindRoomHandler=function(){var e=this;this.roomHandler=new u.RoomHandler(this.logger,this.stateCenter,this.socketCenter),this.roomHandler.loginSuccessCallBack=function(t,n){var l=n.body.hearbeat_interval<o.MINIUM_HEARTBEAT_INTERVAL?o.MINIUM_HEARTBEAT_INTERVAL:n.body.hearbeat_interval;setTimeout(function(){e.heartBeatHandler.start(l)},l),e.heartBeatHandler.resetCheckMessage(),e.heartBeatHandler.startCheckMessageTimeout(),e.streamCenter.setSessionInfo(e.stateCenter.appid,e.stateCenter.idName,e.stateCenter.token,e.stateCenter.testEnvironment),n.body.anchor_info&&e.onGetAnchorInfo(n.body.anchor_info.anchor_id_name,n.body.anchor_info.anchor_nick_name),n.body.online_count&&e.onUpdateOnlineCount(e.stateCenter.roomid,n.body.online_count),e.logger.info("zb.cm.brh hls userStateUpdate "+e.stateCenter.userStateUpdate),e.stateCenter.userStateUpdate&&(e.logger.info("zb.cm.brh hls fetch all new userlist"),e.roomHandler.fetchUserList()),e.streamHandler.handleStreamStart(t,n)},this.roomHandler.onGetTotalUserList=function(t,n){e.onGetTotalUserList(t,n)},this.roomHandler.resetRoomCallBack=function(){e.heartBeatHandler.resetHeartbeat(),e.heartBeatHandler.resetCheckMessage(),e.resetStreamCenter()},this.roomHandler.onUserStateUpdate=function(t,n){e.onUserStateUpdate(t,n)},this.roomHandler.onDisconnect=function(t){e.onDisconnect(t)}},t.prototype.bindMessageHandler=function(){var e=this;this.messageHandler=new p.MessageHandler(this.logger,this.stateCenter,this.socketCenter),this.messageHandler.onRecvCustomCommand=function(t,n,l){e.onRecvCustomCommand(t,n,l)},this.messageHandler.onRecvBigRoomMessage=function(t,n){e.onRecvBigRoomMessage(t,n)},this.messageHandler.onRecvReliableMessage=function(t,n,l){e.onRecvReliableMessage(t,n,l)}},t.prototype.bindLiveHandler=function(){var e=this;this.liveHandler=new g.LiveHandler(this.logger,this.stateCenter,this.socketCenter),this.liveHandler.onRecvEndJoinLiveCommand=function(t,n,l,i){e.onRecvEndJoinLiveCommand(t,n,l,i)},this.liveHandler.onRecvInviteJoinLiveRequest=function(t,n,l,i){e.onRecvInviteJoinLiveRequest(t,n,l,i)},this.liveHandler.onRecvJoinLiveRequest=function(t,n,l,i){e.onRecvJoinLiveRequest(t,n,l,i)}},t.prototype.bindStreamCenterHandler=function(){var e=this;this.streamCenter.onPlayStateUpdate=function(t,n,l){e.onPlayStateUpdateHandle(t,n,l)},this.streamCenter.onPlayQualityUpdate=function(t,n){e.onPlayQualityUpdate(t,n)},this.streamCenter.onPublishStateUpdate=function(t,n,l){e.onPublishStateUpdateHandle(t,n,l)},this.streamCenter.onPublishQualityUpdate=function(t,n){e.onPublishQualityUpdate(t,n)},this.streamCenter.onPlayerStreamUrlUpdate=function(t,n,l){e.onStreamUrlUpdate(t,n,l)},this.streamCenter.onVideoSizeChanged=function(t,n,l){e.onVideoSizeChanged(t,n,l)}},t.prototype.config=function(e){return this.logger.debug("zb.cm.cf call"),s.ClientUtil.checkConfigParam(e,this.logger)?(this.stateCenter.appid=e.appid,this.stateCenter.server=e.server,this.stateCenter.idName=e.idName,this.stateCenter.nickName=e.nickName,this.logger.setLogLevel(e.logLevel),!1===e.audienceCreateRoom&&(this.stateCenter.roomCreateFlag=0),this.logger.setRemoteLogLevel(e.remoteLogLevel?0:e.remoteLogLevel),this.logger.setSessionInfo(e.appid,"","",e.idName,"",o.PROTO_VERSION),e.logUrl&&this.logger.openLogServer(e.logUrl),-1!=this.stateCenter.server.indexOf("test2-wsliveroom-api.zego.im")&&(this.stateCenter.testEnvironment=!0),this.stateCenter.configOK=!0,this.logger.debug("zb.cm.cf call success"),!0):(this.logger.error("zb.cm.cf param error"),!1)},t.prototype.login=function(e,t,n,l,i){this.roomHandler.login(e,t,n,l,i)},t.prototype.logout=function(){return this.roomHandler.logout()},t.prototype.setUserStateUpdate=function(e){this.roomHandler.setUserStateUpdate(e)},t.prototype.onUserStateUpdate=function(e,t){},t.prototype.onGetTotalUserList=function(e,t){},t.prototype.onUpdateOnlineCount=function(e,t){},t.prototype.onGetAnchorInfo=function(e,t){},t.prototype.release=function(){this.logger.debug("zb.cm.rl call"),this.roomHandler.setRunState(o.ENUM_RUN_STATE.logout),this.roomHandler.resetRoom(),this.logger.stopLogServer(),this.logger.debug("zb.cm.rl call success")},t.prototype.sendCustomCommand=function(e,t,n,l){return this.messageHandler.sendCustomCommand(e,t,n,l)},t.prototype.onRecvCustomCommand=function(e,t,n){},t.prototype.sendRoomMsg=function(e,t,n,l,i){this.messageHandler.sendRoomMsg(e,t,n,l,i)},t.prototype.onRecvRoomMsg=function(e,t,n){},t.prototype.sendReliableMessage=function(e,t,n,l){this.messageHandler.sendReliableMessage(e,t,n,l)},t.prototype.onRecvReliableMessage=function(e,t,n){},t.prototype.sendBigRoomMessage=function(e,t,n,l,i){this.messageHandler.sendBigRoomMessage(e,t,n,l,i)},t.prototype.onRecvBigRoomMessage=function(e,t){},t.prototype.sendRelayMessage=function(e,t,n,l){this.messageHandler.sendRelayMessage(e,t,n,l)},t.prototype.requestJoinLive=function(e,t,n,l){return this.liveHandler.requestJoinLive(e,t,n,l)},t.prototype.onRecvJoinLiveRequest=function(e,t,n,l){},t.prototype.inviteJoinLive=function(e,t,n,l){return this.liveHandler.inviteJoinLive(e,t,n,l)},t.prototype.onRecvInviteJoinLiveRequest=function(e,t,n,l){},t.prototype.endJoinLive=function(e,t,n){return this.liveHandler.endJoinLive(e,t,n)},t.prototype.onRecvEndJoinLiveCommand=function(e,t,n,l){},t.prototype.respondJoinLive=function(e,t,n,l){return this.liveHandler.respondJoinLive(e,t,n,l)},t.prototype.updateMixStream=function(e,t,n){return this.streamHandler.updateMixStream(e,t,n)},t.prototype.stopMixStream=function(e,t,n){return this.streamHandler.stopMixStream(e,t,n)},t.prototype.updateStreamExtraInfo=function(e,t){return this.streamHandler.updateStreamExtraInfo(e,t)},t.prototype.onStreamUrlUpdate=function(e,t,n){},t.prototype.onStreamUpdated=function(e,t){},t.prototype.onStreamExtraInfoUpdated=function(e){},t.prototype.onPlayStateUpdate=function(e,t,n){},t.prototype.onVideoSizeChanged=function(e,t,n){},t.prototype.onPlayQualityUpdate=function(e,t){},t.prototype.onPublishStateUpdate=function(e,t,n){},t.prototype.onPublishQualityUpdate=function(e,t){},t.prototype.onDisconnect=function(e){},t.prototype.onKickOut=function(e){},t}(r.Common);t.BaseCenter=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e){}return e.prototype.setSessionInfo=function(e,t,n,l){},e}();t.ZegoStreamCenter=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),i=n(2),r=function(){function e(e,t,n,r){this.state=l.ENUM_PLAY_STATE.stop,this.candidateInfo=[],this.waitICETimer=null,this.waitingICETimeInterval=5e3,this.waitingOfferTimer=null,this.waitingOfferTimeInterval=5e3,this.waitingServerTimer=null,this.waitingServerTimerInterval=3e3,this.qualityTimer=null,this.playQualityList=[],this.maxQualityListCount=10,this.lastPlayStats={time:0,audioBytesReceived:0,videoBytesReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0},this.reportSeq=i.getSeq(),this.videoSizeCallback=!1,this.qualityUpload=!1,this.qualityUploadInterval=3e4,this.qualityUploadLastTime=0,this.maxRetryCount=3,this.currentRetryCount=0,this.retryState=l.ENUM_RETRY_STATE.didNotStart,this.closeSessionSignal=!1,this.logger=e,this.signal=t,this.dataReport=n,this.qualityTimeInterval=r,n.newReport(this.reportSeq)}return e.prototype.setAudioDestination=function(e){var t=this;return this.remoteVideo?"undefined"!==this.remoteVideo.sinkId?(this.remoteVideo.setSinkId(e).then(function(){t.logger.info("zp.sad.1 success device: "+e)}).catch(function(e){t.logger.info("zp.sad.1 "+e.name)}),!0):(this.logger.error("zp.sad.1 browser does not suppport"),!1):(this.logger.info("zp.sad.1 no remoteVideo"),!1)},e.prototype.startPlay=function(e,t,n,r){var o=this;this.logger.debug("zp.sp.1 called ",e),e?(this.streamId=e,this.remoteVideo=t,this.audioOutput=n,this.playOption=r,this.sessionSeq=i.getSeq(),this.dataReport.eventStart(this.reportSeq,"CreateSession"),this.signal.createSession(this.sessionSeq,1,0,e,r&&r.streamParams,function(e,t,n){o.dataReport.eventEndWithMsg(o.reportSeq,"CreateSession",{sessionId:n.session_id}),o.logger.info("zp.sp.1 sessionId:"+n.session_id),o.sessionSeq==e?0!==n.result?(o.logger.error("zp.sp.1 create error"),o.playStateUpdateError(i.playErrorList.CREATE_SESSION_ERROR)):(o.sessionId=n.session_id,o.onCreatePlaySessionSuccess(n)):o.logger.error("zp.sp.1 seq is not match.")},function(e,t){o.dataReport.eventEndWithMsg(o.reportSeq,"CreateSession",{error:e}),o.playStateUpdateError(i.playErrorList.SEND_SESSION_TIMEOUT)}),this.state=l.ENUM_PLAY_STATE.waitingSessionRsp,this.logger.debug("zp.sp.1 called success")):this.logger.warn("zp.sp.1 streamId is null")},e.prototype.onCreatePlaySessionSuccess=function(e){var t=this;this.logger.debug("zp.ops.1 success");var n=[];e.turn_server&&n.push(e.turn_server),e.stun_server&&n.push(e.stun_server);var l={iceServers:[{urls:n,username:e.turn_username,credential:e.turn_auth_key}]};this.logger.info("zp.ops.1 username: "+e.turn_username),this.logger.info("zp.ops.1 credential: "+e.turn_auth_key),this.peerConnection=new RTCPeerConnection(l),this.peerConnection.onicecandidate=function(e){t.onIceCandidate(e)},this.peerConnection.onsignalingstatechange=function(e){t.onConnectionStateChange(e)},this.peerConnection.oniceconnectionstatechange=function(e){t.onIceConnectionStateChange(e)},this.peerConnection.onaddstream=function(e){t.onGotRemoteStream(e)},this.remoteVideo.oncanplay=function(){t.logger.debug("zp.ops.1 "+t.remoteVideo.videoWidth+" X "+t.remoteVideo.videoHeight),t.videoSizeCallback||(t.logger.debug("zp.ops.1 onresize callback"),t.onVideoSizeChanged(t.streamId,t.remoteVideo.videoWidth,t.remoteVideo.videoHeight),t.videoSizeCallback=!0)};var r={offerToReceiveAudio:1,offerToReceiveVideo:1};this.playOption&&"audio"===this.playOption.playType&&(r.offerToReceiveVideo=0),this.playOption&&"video"===this.playOption.playType&&(r.offerToReceiveAudio=0),this.logger.info("zp.ops.1 createOffer: "+r),this.dataReport.eventStart(this.reportSeq,"CreateOffer"),this.peerConnection.createOffer(r).then(function(e){t.dataReport.eventEnd(t.reportSeq,"CreateOffer"),t.onCreateOfferSuccess(e)},function(e){t.dataReport.eventEndWithMsg(t.reportSeq,"CreateOffer",{error:e.toString()}),t.logger.error("zp.ops.0 create offer error "+e.toString()),t.playStateUpdateError(i.playErrorList.CREATE_OFFER_ERROR)}),this.signal.registerPushCallback("MediaDescPush",this.sessionId,function(e,n,l){t.onRecvMediaDesc(e,n,l)}),this.signal.registerPushCallback("CandidateInfoPush",this.sessionId,function(e,n,l){t.onRecvCandidateInfo(e,n,l)}),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,function(e,n,l){t.onRecvCloseSession(e,n,l)}),this.signal.registerPushCallback("SessionResetPush",this.sessionId,function(e,n,l){t.onRecvResetSession(e,n,l)}),this.logger.debug("zp.ops.1 call success")},e.prototype.onCreateOfferSuccess=function(e){var t=this;this.logger.debug("zp.oco.1 localSdp ",e.sdp),this.dataReport.eventStart(this.reportSeq,"SetLocalDescription"),this.peerConnection.setLocalDescription(e).then(function(){t.dataReport.eventEnd(t.reportSeq,"SetLocalDescription"),t.onSetLocalDescriptionSuccess(e)},function(e){t.logger.error("zp.oca.1 set error "+e.toString()),t.dataReport.eventEnd(t.reportSeq,"SetLocalDescription",{error:e.toString()}),t.playStateUpdateError(i.playErrorList.SET_LOCAL_DESC_ERROR)})},e.prototype.onSetLocalDescriptionSuccess=function(e){var t=this;this.logger.debug("zp.osd.1 success");var n={sdp:e.sdp};this.answerSeq=i.getSeq(),this.dataReport.eventStart(this.reportSeq,"SendMediaDesc"),this.signal.sendMediaDesc(this.answerSeq,this.sessionId,0,n,function(e,n,r){t.answerSeq==e&&t.sessionId==n?(t.logger.debug("zp.osd.1 send success"),t.dataReport.eventEnd(t.reportSeq,"SendMediaDesc"),t.state=l.ENUM_PLAY_STATE.waitingServerAnswer,t.sendCandidateInfo(t.candidateInfo),t.candidateInfo=[],t.waitingOfferTimer=setTimeout(function(){t.state==l.ENUM_PLAY_STATE.waitingOffserRsp&&(t.logger.error("zp.osd.1 waiting timeout"),t.playStateUpdateError(i.playErrorList.SERVER_CANDIDATE_TIMEOUT))},t.waitingOfferTimeInterval)):t.logger.error("zp.osd.1 seq or sessionId is not equal "+t.answerSeq+" "+e,0+t.sessionId+" "+n)},function(e,n){t.logger.error("zp.osd.1 failed to send "+e),t.dataReport.eventEndWithMsg(t.reportSeq,"SendMediaDesc",{error:e}),t.playStateUpdateError(i.playErrorList.SEND_MEDIA_DESC_TIMEOUT)}),this.state=l.ENUM_PLAY_STATE.waitingOffserRsp},e.prototype.onRecvMediaDesc=function(e,t,n){var r=this;if(this.logger.debug("zp.orm.1 received ",n),this.state===l.ENUM_PLAY_STATE.waitingServerAnswer){null!=this.waitingOfferTimer&&(clearTimeout(this.waitingOfferTimer),this.waitingOfferTimer=null),this.dataReport.addEvent(this.reportSeq,"RecvMediaDesc"),this.signal.sendMediaDescAck(e,this.sessionId,0);var o={type:"answer",sdp:n.sdp,toJSON:function(){}};this.dataReport.eventStart(this.reportSeq,"SetRemoteDescription"),this.logger.info("zp.orm.1 remoteSdp ",o.sdp),this.peerConnection.setRemoteDescription(new RTCSessionDescription(o)).then(function(){r.dataReport.eventEnd(r.reportSeq,"SetRemoteDescription"),r.logger.debug("zp.orm.1 set success")},function(e){r.logger.error("zp.orm.1 set remote error "+e.toString()),r.dataReport.eventEndWithMsg(r.reportSeq,"SetRemoteDescription",{error:e.toString()}),r.playStateUpdateError(i.playErrorList.SET_REMOTE_DESC_ERROR)}),this.waitICETimer=setTimeout(function(){r.state==l.ENUM_PLAY_STATE.waitingServerICE&&(r.logger.error("zp.orm.1 waiting server timeout"),r.playStateUpdateError(i.playErrorList.SERVER_CANDIDATE_TIMEOUT))},this.waitingICETimeInterval),this.state=l.ENUM_PLAY_STATE.waitingServerICE,this.logger.debug("zp.orm.1 call success")}else this.logger.error("zp.orm.1 current state "+this.state+" not allowed")},e.prototype.onRecvCandidateInfo=function(e,t,n){var r=this;if(this.logger.debug("zp.orci.1 received "),this.state==l.ENUM_PLAY_STATE.waitingServerICE){null!=this.waitICETimer&&(clearTimeout(this.waitICETimer),this.waitICETimer=null),this.dataReport.addEvent(this.reportSeq,"RecvIceCandidate"),this.signal.sendCandidateInfoAck(e,this.sessionId,0);for(var o=0;o<n.infos.length;o++){var s={sdpMid:n.infos[o].sdpMid,sdpMLineIndex:n.infos[o].sdpMLineIndex,candidate:n.infos[o].candidate};this.logger.debug("zp.orci.1 candidate "+s.candidate),this.peerConnection.addIceCandidate(new RTCIceCandidate(s)).then(function(){r.logger.debug("zp.orci.1 add success")},function(e){r.logger.error("zp.orci.1 add error "+e.toString()),r.playStateUpdateError(i.playErrorList.SERVER_CANDIDATE_ERROR)})}this.state=l.ENUM_PLAY_STATE.connecting,this.logger.debug("zp.orci.1 call success")}else this.logger.warn("zp.orci.1 current state "+this.state+" not allowed")},e.prototype.onIceCandidate=function(e){if(this.logger.info("zp.oic.1 called"),void 0!=e.candidate)if(this.logger.debug("zp.oic.1 candidate "+e.candidate.candidate),this.state<l.ENUM_PLAY_STATE.waitingServerICE||this.state==l.ENUM_PLAY_STATE.stop)this.logger.debug("zp.oic.1 cached"),this.candidateInfo.push({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex});else{this.logger.debug("zp.oic.1 send");this.sendCandidateInfo([{candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex}])}},e.prototype.onConnectionStateChange=function(e){this.logger.info("zp.oisc.1 called "+e.target.signalingState)},e.prototype.onIceConnectionStateChange=function(e){this.state!=l.ENUM_PLAY_STATE.stop&&null!=this.peerConnection&&(this.logger.info("zp.oisc.1  stateChanged "+this.peerConnection.iceConnectionState),"connected"===this.peerConnection.iceConnectionState?(this.dataReport.addEvent(this.reportSeq,"IceConnected"),this.state!=l.ENUM_PLAY_STATE.playing&&this.onPlayStateUpdate(i.ENUM_PLAY_STATE_UPDATE.start,this.streamId),this.state=l.ENUM_PLAY_STATE.playing,this.retryState!=l.ENUM_RETRY_STATE.didNotStart&&(this.retryState=l.ENUM_RETRY_STATE.finished,this.currentRetryCount=0),this.dataReport.eventStart(this.reportSeq,"PlayState"),this.setPlayQualityTimer()):"closed"===this.peerConnection.iceConnectionState?(this.dataReport.addEvent(this.reportSeq,"IceClosed"),this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)):"failed"===this.peerConnection.iceConnectionState&&(this.dataReport.addEvent(this.reportSeq,"IceFailed"),this.checkPlayConnectionFailedState(this.peerConnection.iceConnectionState)))},e.prototype.checkPlayConnectionFailedState=function(e){var t=null;"failed"==e?t=i.playErrorList.MEDIA_CONNECTION_FAILED:"closed"==e&&(t=i.playErrorList.MEDIA_CONNECTION_CLOSED),null!=t&&(this.state!=l.ENUM_PLAY_STATE.playing&&this.retryState==l.ENUM_PLAY_STATE.didNotStart?(this.logger.info("zp.oics.1  state "+this.state+" retryState "+this.retryState+" connectionState "+e),this.playStateUpdateError(t)):this.shouldRetryPlay()?(this.onPlayStateUpdate(i.ENUM_PLAY_STATE_UPDATE.retry,this.streamId),this.startRetryPlay()):this.playStateUpdateError(t))},e.prototype.shouldRetryPlay=function(){return this.retryState==l.ENUM_RETRY_STATE.didNotStart&&this.state!=l.ENUM_PLAY_STATE.playing?(this.logger.info("zp.srp.1.0 connection didn't success"),!1):this.retryState==l.ENUM_RETRY_STATE.retrying?(this.logger.info("zp.srp.0.0 already retrying"),!1):this.currentRetryCount>this.maxRetryCount?(this.logger.info("zp.srp.1.0 beyond max"),!1):(this.logger.debug("zp.srp.1.0 call success"),!0)},e.prototype.startRetryPlay=function(){this.logger.debug("zp.srp.0 call");var e=this.streamId,t=this.remoteVideo,n=this.audioOutput;this.resetPlay(),this.tryStartPlay(e,t,n)},e.prototype.clearTryPlayTimer=function(){null!=this.waitingServerTimer&&(clearTimeout(this.waitingServerTimer),this.waitingServerTimer=null)},e.prototype.tryStartPlay=function(e,t,n){var r=this;if(this.logger.debug("zp.tsp.1 call"),this.clearTryPlayTimer(),this.streamId=e,this.remoteVideo=t,this.audioOutput=n,this.currentRetryCount>this.maxRetryCount)return this.logger.error("zp.tsp.1 beyond max limit"),void this.playStateUpdateError(i.playErrorList.WEBSOCKET_ERROR);this.retryState=l.ENUM_RETRY_STATE.retrying,this.currentRetryCount+=1,this.signal.isServerConnected()?(this.logger.debug("zp.tsp.1 signal connected"),this.startPlay(e,this.remoteVideo,this.audioOputput)):(this.logger.debug("zp.tsp.1 signal server not connected"),this.waitingServerTimer=setTimeout(function(){r.tryStartPlay(e,r.remoteVideo,r.audioOputput)},this.waitingServerTimerInterval))},e.prototype.clearPlayQualityTimer=function(){null!=this.qualityTimer&&(clearInterval(this.qualityTimer),this.qualityTimer=null),this.lastPlayStats={time:null,audioBytesReceived:null,videoBytesReceived:null,framesDecoded:null,framesDropped:null,framesReceived:null}},e.prototype.resetPlay=function(){this.logger.info("zp.rp.1 call"),this.streamId=null,this.state=l.ENUM_PLAY_STATE.stop,void 0!=this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),null!=this.waitingOfferTimer&&(clearTimeout(this.waitingOfferTimer),this.waitingOfferTimer=null),null!=this.waitICETimer&&(clearTimeout(this.waitICETimer),this.waitICETimer=null),this.clearPlayQualityTimer(),this.remoteVideo&&(this.remoteVideo.srcObject=null,this.remoteVideo.oncanplay=null,this.remoteVideo=null),this.audioOputput=null,this.signal&&(this.signal.unregisterPushCallback("MediaDescPush",this.sessionId),this.signal.unregisterPushCallback("CandidateInfoPush",this.sessionId),this.signal.unregisterPushCallback("CloseSessionPush",this.sessionId)),this.sessionSeq=0,this.answerSeq=0,this.videoSizeCallback=!1,this.currentRetryCount=0,this.retryState=l.ENUM_RETRY_STATE.didNotStart,this.clearTryPlayTimer()},e.prototype.setPlayQualityTimer=function(){var e=this;null==this.qualityTimer&&(this.logger.debug("zp.spq.1 startTimer"),this.clearPlayQualityTimer(),this.qualityTimer=setInterval(function(){e.peerConnection&&e.peerConnection.getStats(null).then(function(t){e.getPlayStats(t)},function(t){e.logger.info("zp.spq.1 getStats error "+t.toString())})},this.qualityTimeInterval),this.lastPlayStats={time:0,audioBytesReceived:0,videoBytesReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0})},e.prototype.getPlayStats=function(e){var t=this;if(void 0!=e){var n={audioFractionLost:0,audioPacketsLost:0,videoBitrate:0,videoFPS:0,playData:0,nackCount:0,pliCount:0,sliCount:0,videoFractionLos:0,audioJitter:0,videoFractionLost:null,videoFramesDecoded:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,videoFramesDropped:0,totalRoundTripTime:0,currentRoundTripTime:0},l=this.lastPlayStats.time;e.forEach(function(e){("inbound-rtp"==e.type||"ssrc"==e.type&&void 0!=e.bytesReceived)&&("audio"==e.mediaType||e.id.indexOf("AudioStream")>=0)?(0!=l&&(n.audioBitrate=8*(e.bytesReceived-t.lastPlayStats.audioBytesReceived)/(e.timestamp-l)),n.audioBitrate<0&&(n.audioBitrate=0),n.audioJitter=e.jitter,n.audioPacketsLost=e.packetsLost,n.audioFractionLost=e.fractionLost,t.lastPlayStats.audioBytesReceived=e.bytesReceived,t.lastPlayStats.time=e.timestamp):("inbound-rtp"==e.type||"ssrc"==e.type&&void 0!=e.bytesReceived)&&("video"==e.mediaType||e.id.indexOf("VideoStream")>=0)?(0!=l&&(n.videoBitrate=8*(e.bytesReceived-t.lastPlayStats.videoBytesReceived)/(e.timestamp-l),n.videoFPS=1e3*(e.framesDecoded-t.lastPlayStats.framesDecoded)/(e.timestamp-l)),n.videoBitrate<0&&(n.videoBitrate=0),n.videoFPS<0&&(n.videoFPS=0),n.nackCount=e.nackCount,n.pliCount=e.pliCount,n.sliCount=e.sliCount,n.videoFractionLost=e.fractionLost,n.videoFramesDecoded=e.framesDecoded,t.lastPlayStats.videoBytesReceived=e.bytesReceived,t.lastPlayStats.framesDecoded=e.framesDecoded,t.lastPlayStats.time=e.timestamp):"track"==e.type&&("video"==e.kind||e.id.indexOf("video")>=0)?(n.frameHeight=e.frameHeight,n.frameWidth=e.frameWidth,0!=l&&(n.videoTransferFPS=1e3*(e.framesReceived-t.lastPlayStats.framesReceived)/(e.timestamp-l),n.videoFramesDropped=e.framesDropped-t.lastPlayStats.framesDropped),n.videoTransferFPS<0&&(n.videoTransferFPS=0),n.videoFramesDropped<0&&(n.videoFramesDropped=0),t.lastPlayStats.framesReceived=e.framesReceived,t.lastPlayStats.framesDropped=e.framesDropped):"candidate-pair"==e.type&&(void 0!=e.totalRoundTripTime&&(n.totalRoundTripTime=e.totalRoundTripTime),void 0!=e.currentRoundTripTime&&(n.currentRoundTripTime=e.currentRoundTripTime))}),this.uploadPlayQuality(n),0!=l&&this.onPlayQualityUpdate(this.streamId,n)}},e.prototype.uploadPlayQuality=function(e){var t=this;if(this.qualityUpload){var n=Date.parse(new Date+"");(0==this.qualityUploadLastTime||n-this.qualityUploadLastTime>=this.qualityUploadInterval)&&(this.logger.debug("zp.upq.1 upload"),e.stream_type="play",e.stream_id=this.streamId,e.timeStamp=n/1e3,this.signal.QualityReport(i.getSeq(),this.sessionId,e,function(e,n,l){void 0!==l.report&&(t.qualityUpload=l.report,t.qualityUploadInterval=l.report_interval_ms)},function(e,n){t.logger.info("zp.upq.1 upload failed "+e)}),this.qualityUploadLastTime=n)}},e.prototype.onRecvResetSession=function(e,t,n){this.logger.info("zp.orrs.1 received "),t==this.sessionId?(this.dataReport.addEvent(this.reportSeq,"RecvResetSession"),this.shouldRetryPlay()&&this.startRetryPlay()):this.logger.info("zp.orrs.1 cannot find session")},e.prototype.onRecvCloseSession=function(e,t,n){this.logger.info("zp.orcs.1 reason: "+n.reason),this.dataReport.addEvent(this.reportSeq,"RecvCloseSession"),this.signal.sendCloseSessionAck(e,this.sessionId,0);var l=JSON.parse(JSON.stringify(i.playErrorList.SESSION_CLOSED));l.msg+=n.reason,24===n.reason?this.startRetryPlay():this.playStateUpdateError(l)},e.prototype.onGotRemoteStream=function(e){this.logger.info("zp.ogrs.0 called "+e.stream),this.remoteVideo?(this.remoteVideo.srcObject=e.stream,this.audioOputput&&this.setAudioDestination(this.audioOputput),this.dataReport.addEvent(this.reportSeq,"GetRemoteStream")):this.logger.error("zp.ogrs.0 no remoteVideo")},e.prototype.sendCandidateInfo=function(e){var t=this;this.logger.debug("zp.sci.1 called"),!(e=e.filter(function(e){return!(e.candidate.indexOf("tcp")>0)}))||e.length<1?this.logger.info("zp.sci.1 cancelled"):(this.dataReport.eventStart(this.reportSeq,"SendIceCandidate"),this.signal.sendCandidateInfo(i.getSeq(),this.sessionId,e,function(e,n,l){t.logger.debug("zp.sci.1 send success"),t.dataReport.eventEnd(t.reportSeq,"SendIceCandidate")},function(e,n){t.logger.error("zp.sci.1 failed to send: "+e.toString()),t.dataReport.eventEndWithMsg(t.reportSeq,"SendIceCandidate",{error:e}),t.playStateUpdateError(i.playErrorList.SEND_CANDIDATE_ERROR)}))},e.prototype.shouldSendCloseSession=function(e){return this.state!=i.ENUM_PLAY_STATE_UPDATE.stop&&this.state!=l.ENUM_PLAY_STATE.waitingSessionRsp},e.prototype.playStateUpdateError=function(e){this.logger.debug("zp.psue.1 called ",e.code),0!=this.sessionId&&this.shouldSendCloseSession(e)&&(this.signal.sendCloseSession(i.getSeq(),this.sessionId,1),this.closeSessionSignal=!0),this.state=l.ENUM_PLAY_STATE.stop,this.onPlayStateUpdate(i.ENUM_PLAY_STATE_UPDATE.error,this.streamId,e),this.resetPlay()},e.prototype.onPlayStateUpdate=function(e,t,n){},e.prototype.onPlayQualityUpdate=function(e,t){},e.prototype.onVideoSizeChanged=function(e,t,n){},e.prototype.stopPlay=function(){this.logger.debug("zp.sp.1.1 called"),this.sessionId&&!this.closeSessionSignal&&this.signal.sendCloseSession(i.getSeq(),this.sessionId,0),this.dataReport.eventEndWithMsg(this.reportSeq,"PlayState",{state:this.state+""}),this.dataReport.addEvent(this.reportSeq,"StopPlay"),this.dataReport.addMsgExt(this.reportSeq,{stream:this.streamId,sessionId:this.sessionId}),this.dataReport.uploadReport(this.reportSeq,"RTCPlayStream"),this.resetPlay()},e.prototype.onDisconnect=function(){this.logger.info("zp.od.1 call"),this.logger.info("zp.od.1 websocket disconnect"),this.dataReport.addEvent(this.reportSeq,"OnDisconnect"),this.playStateUpdateError(i.playErrorList.WEBSOCKET_ERROR)},e}();t.ZegoPlayWeb=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),i=n(2),r=function(){function e(e){this.sendDataMap={},this.sendDataList=new l.LinkedList,this.sendDataCheckOnceCount=100,this.signalSeq=0,this.pushCallback={},this.sessionInfos={},this.tryHeartbeatCount=0,this.heartbeatInterval=1e4,this.sendDataTimeout=5e3,this.sendDataDropTimeout=1e4,this.tryConnectCount=1,this.tryConnectTimer=null,this.tryConnectInterval=3e3,this.state=l.ENUM_CONNECT_STATE.disconnect,this.tokenType=0,this.browser=this.getBrowserAndVersion(),this.platform=navigator.platform,this.logger=e}return e.prototype.getBrowserAndVersion=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];return/trident/i.test(n[1])?{name:"IE",version:(e=/\brv[ :]+([\d\.]+)/g.exec(t)||[])[1]||""}:"Chrome"===n[1]&&null!=(e=t.match(/\bOPR|Edge\/([\d\.]+)/))?{name:"Opera",version:e[1]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/([\d+\.]+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:n[1]})},e.prototype.setSessionInfo=function(e,t){this.logger.debug("zs.ssi.0 call"),this.appid=e+"",this.userid=t},e.prototype.onDisconnect=function(e){},e.prototype.onUpdateHeartBeartInterval=function(e){},e.prototype.resetConnectTimer=function(){this.logger.info("zs.rct.0 call"),clearTimeout(this.tryConnectTimer),this.tryConnectTimer=null,this.tryConnectCount=0},e.prototype.bindWebSocketHandle=function(){var e=this;this.websocket.onmessage=function(t){var n=JSON.parse(t.data);e.logger.debug("zs.bsh.0 signmsg= ",n.header.cmd),n.header.appid==e.appid&&n.header.user_id===e.userid?e.handleServerPush(n):e.logger.warn("zs.bsh.0 check header failed")},this.websocket.onclose=function(t){e.logger.info("zs.bsh.0 close msg = "+JSON.stringify(t)),e.state!=l.ENUM_CONNECT_STATE.disconnect&&(e.resetConnectTimer(),e.startConnectTimer(),e.resetCheckMessage())},this.websocket.onerror=function(t){e.logger.error("zs.bsh.0 msg = "+JSON.stringify(t))}},e.prototype.resetCheckMessage=function(){this.logger.debug("zs.rcm.0 call");for(var e=this.sendDataList.getFirst();null!=e;)this.sendDataList.remove(e),e._data.error&&e._data.error(l.SEND_MSG_RESET,e._data.seq),e=this.sendDataList.getFirst();this.sendDataMap={}},e.prototype.handleServerPush=function(e){switch(e.header.cmd){case"LoginRsp":this.handleRespondData("LoginReq",e);break;case"CreateSessionRsp":this.handleRespondData("CreateSessionReq",e),0===e.body.result&&this.addSession(e.header.session_id,e.body.session_token);break;case"MediaDescRsp":this.handleRespondData("MediaDescReq",e);break;case"CandidateInfoRsp":this.handleRespondData("CandidateInfoReq",e);break;case"CloseSessionRsp":this.handleRespondData("CloseSessionReq",e),this.removeSession(e.header.session_id);break;case"ClientHBRsp":this.handleRespondData("ClientHBReq",e);break;case"MediaDescPush":case"CandidateInfoPush":this.handlePushData(e);break;case"CloseSessionPush":this.handlePushData(e),this.removeSession(e.header.session_id);break;case"QualityReportRsp":this.handleRespondData("QualityReportReq",e);break;case"SessionResetPush":this.handlePushResetSessionData(e)}},e.prototype.disconnectCallback=function(){this.connectCallback&&(this.connectCallback(-1,this.server,void 0),this.connectCallback=null);var e=this.server;this.disconnectServer(),this.onDisconnect(e)},e.prototype.updateToken=function(){var e=this;this.logger.info("zs.ut.0 call");var t={token:this.token,tokenType:this.tokenType};if(0!=Object.keys(this.sessionInfos).length){var n=[];for(var l in this.sessionInfos){var r=parseInt(l);n.push({session_id:r,session_token:this.sessionInfos[r].token})}t.sessions=n}this.sendMessageWithCallback("LoginReq",i.getSeq(),0,t,function(t,n,l){if(0==l.result){e.token=l.token,e.tokenType=l.tokenType;null!=e.connectCallback&&(e.connectCallback(0,e.server,{report:l.report,report_interval:l.report_interval_ms}),e.connectCallback=null)}else{null!=e.connectCallback&&(e.connectCallback(l.result,e.server,{error:l.strError}),e.connectCallback=null)}},function(t,n){null!=e.connectCallback&&(e.connectCallback(-1,e.server,void 0),e.connectCallback=null)})},e.prototype.sendMessageWithCallback=function(e,t,n,i,r,o){if(this.logger.debug("zs.smwc.0 call "+e),!this.websocket||1!==this.websocket.readyState)return this.logger.error("zs.smwc.0 connect not establish"),void(o&&o(l.SEND_MSG_TIMEOUT,t));var s={header:this.getHeader(e,t,n),body:i};void 0==r&&(r=null),void 0==o&&(o=null);var a={seq:t,deleted:!1,cmd:e,time:Date.parse(new Date+""),success:r,error:o},u=this.sendDataList.push(a);this.sendDataMap[a.seq]=u;var c=JSON.stringify(s);this.websocket.send(c),this.logger.debug("zs.smwc.0 success")},e.prototype.getHeader=function(e,t,n){return this.globalHeader={version:"1.0.1",cmd:e,appid:this.appid+"",seq:t,user_id:this.userid,session_id:n},this.globalHeader},e.prototype.connectServer=function(e,t,n){var i=this;if(this.token=e,this.server=t,this.state=l.ENUM_CONNECT_STATE.connecting,this.connectCallback=n,this.websocket&&1===this.websocket.readyState)this.resetConnectTimer(),this.state=l.ENUM_CONNECT_STATE.connected;else{this.logger.debug("zs.cs.0 need new websocket");try{this.websocket&&(this.logger.warn("zs.cs.0 close error websocket"),this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null),this.websocket=new WebSocket(this.server),this.websocket.onopen=function(){i.resetConnectTimer(),i.logger.info("zs.cs.0 websocket open call"),i.bindWebSocketHandle(),i.updateToken(),i.state=l.ENUM_CONNECT_STATE.connected}}catch(e){this.logger.error("zs.cs.0 websocket error "+e)}}this.tryConnectTimer=setTimeout(function(){i.startConnectTimer(n)},this.tryConnectInterval)},e.prototype.startConnectTimer=function(e){if(this.logger.info("zs.sct.0 call"),this.tryConnectCount>=l.MAX_TRY_CONNECT_COUNT)return this.logger.error("zs.sct.0 beyond max limit"),void this.disconnectCallback();this.websocket&&1===this.websocket.readyState?this.resetConnectTimer():(this.tryConnectCount+=1,this.connectServer(this.token,this.server,e))},e.prototype.disconnectServer=function(){this.logger.debug("zs.ds.0 call"),this.server=null,this.connectCallback=null,this.resetCheckMessage(),this.resetConnectTimer(),this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null),this.token="",this.sessionInfos={},this.tokenType=0,this.tryHeartbeatCount=0,this.tryConnectCount=0,this.state=l.ENUM_CONNECT_STATE.disconnect},e.prototype.isServerConnected=function(){return!(!this.websocket||1!==this.websocket.readyState)},e.prototype.createSession=function(e,t,n,l,i,r,o){void 0===i&&(i=""),this.logger.debug("zs.cs.1 call: ",l);this.sendMessageWithCallback("CreateSessionReq",e,0,{type:t,stream_id:l,platform:this.platform,browser:this.browser.name,version:this.browser.version,app_id:this.appid,negotiate_mode:n,strAuthParam:i},r,o)},e.prototype.removeSession=function(e){this.logger.info("zs.rs.0 call"),this.sessionInfos[e]&&delete this.sessionInfos[e]},e.prototype.sendCloseSession=function(e,t,n,l,i){this.logger.debug("zs.scs.0 call: ",t);var r={reason:n};this.removeSession(t),this.sendMessageWithCallback("CloseSessionReq",e,t,r,l,i)},e.prototype.sendMessage=function(e,t,n,l){if(this.logger.debug("zs.sm.0 call "+e),this.websocket&&1===this.websocket.readyState){var i={header:this.getHeader(e,t,n),body:l},r=JSON.stringify(i);this.websocket.send(r),this.logger.debug("zs.sm.0 success")}else this.logger.error("zs.sm.0 connect not establish")},e.prototype.handleRespondData=function(e,t){this.logger.debug("zs.hrd.0 call");var n=this.sendDataMap[t.header.seq];if(null!=n){var l=n._data;l.cmd!==e?this.logger.error("sz.hrd.0 command is not match"):l.success&&l.success(t.header.seq,t.header.session_id,t.body),delete this.sendDataMap[t.header.seq],this.sendDataList.remove(n)}else this.logger.error("zs.hrd.0 cannot find data "+e)},e.prototype.addSession=function(e,t){this.logger.info("zs.as.0 call"),this.sessionInfos[e]={token:t}},e.prototype.handlePushData=function(e){this.logger.debug("zs.hpd.0 call "+e.header.cmd+" session "+e.header.session_id);var t=this.pushCallback[e.header.cmd+e.header.session_id];t?t.callback&&t.callback(e.header.seq,e.header.session_id,e.body):this.logger.info("zs.hpd.0 no callbackData "+e.header.cmd+" session: "+e.header.session_id)},e.prototype.handlePushResetSessionData=function(e){this.logger.debug("zs.hprsd.0 call ");var t=[];if(0==e.body.cResetType)t=Object.keys(this.sessionInfos);else if(1==e.body.cResetType)for(var n=0;n<e.body.session_ids.length;n++)t.push(e.body.session_ids[n]);if(this.sendResetSessionAck(e.header.seq,0,0),0!=t.length)for(var l=0;l<t.length;l++){var i=this.pushCallback[e.header.cmd+t[l]];null==i?this.logger.info("zs.hprsd.0 no callbackData "+t[l]):i.callback&&i.callback(i.object,e.header.seq,t[l],e.body)}else this.logger.info("zs.hprsd.0 no session to callback")},e.prototype.sendMediaDesc=function(e,t,n,l,i,r){this.logger.debug("zs.smd.0 call: ",t);var o={type:n,sdp:l.sdp};void 0!=l.width&&(o.width=l.width),void 0!=l.height&&(o.height=l.height),void 0!=l.frameRate&&(o.framerate=l.frameRate),void 0!=l.video_min_kpbs&&(o.video_min_kpbs=l.video_min_kpbs),void 0!=l.video_max_kpbs&&(o.video_max_kpbs=l.video_max_kpbs),void 0!=l.audio_kpbs&&(o.audio_kpbs=l.audio_kpbs),this.sendMessageWithCallback("MediaDescReq",e,t,o,i,r)},e.prototype.sendCandidateInfo=function(e,t,n,l,i){this.logger.debug("zs.sci.0 call: ",t);for(var r=[],o=0;o<n.length;o++){r.push({candidate:n[o].candidate,sdpMid:n[o].sdpMid,sdpMLineIndex:n[o].sdpMLineIndex})}this.sendMessageWithCallback("CandidateInfoReq",e,t,{infos:r},l,i)},e.prototype.sendMediaDescAck=function(e,t,n){this.logger.debug("zs.smda.0 call: ",t);this.sendMessage("MediaDescAck",e,t,{result:n})},e.prototype.sendCandidateInfoAck=function(e,t,n){this.logger.debug("zs.scia.0 call: ",t);this.sendMessage("CandidateInfoAck",e,t,{result:n})},e.prototype.sendCloseSessionAck=function(e,t,n){this.logger.debug("zs.scsa.0 call: ",t);this.sendMessage("CloseSessionAck",e,t,{result:n})},e.prototype.sendResetSessionAck=function(e,t,n){this.logger.debug("zs.ssra.0 call: ",t);this.sendMessage("SessionResetAck",e,t,{result:n})},e.prototype.registerPushCallback=function(e,t,n){n&&"function"==typeof n&&(this.logger.debug("zs.rpc.0 setcallback"),this.pushCallback[e+t]={callback:n})},e.prototype.unregisterPushCallback=function(e,t){delete this.pushCallback[e+t]},e.prototype.checkMessageTimeout=function(){for(var e=this.sendDataList.getFirst(),t=Date.parse(new Date+""),n=0,i=0,r=0;!(null==e||e._data.time+this.sendDataTimeout>t||(delete this.sendDataMap[e._data.seq],this.sendDataList.remove(e),++i,null==e._data.error||this.sendDataDropTimeout>0&&e._data.time+this.sendDataDropTimeout<t?++r:e._data.error&&e._data.error(l.SEND_MSG_TIMEOUT,e._data.seq),++n>=this.sendDataCheckOnceCount));)e=this.sendDataList.getFirst();0==i&&0==r||this.logger.debug("zs.cmt.0 call success, state: timeout=",i," drop=",r)},e.prototype.sendHeartbeat=function(){var e=this;if(this.logger.debug("zs.shb.0 call"),0!=Object.keys(this.sessionInfos).length){if(++this.tryHeartbeatCount>l.MAX_TRY_HEARTBEAT_COUNT)return this.logger.error("zs.shb.0 heartbeat try limit"),void this.disconnectCallback();var t=[];for(var n in this.sessionInfos)t.push(parseInt(n));var r={session_ids:t};this.sendMessageWithCallback("ClientHBReq",i.getSeq(),0,r,function(t,n,l){e.heartbeatInterval!=l.hb_interval&&(e.heartbeatInterval=l.hb_interval,e.onUpdateHeartBeartInterval(l.hb_interval)),e.tryHeartbeatCount=0},function(t,n){e.tryHeartbeatCount+=1})}else this.logger.info("zs.shb.0 no need to heartbeat")},e.prototype.QualityReport=function(e,t,n,l,i){this.logger.debug("zs.qr.0 call");this.sendMessageWithCallback("QualityReportReq",e,t,{streams:[n]},l,i)},e}();t.ZegoSignal=r},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(t){var n;e.exports=function e(t,l,i){function r(s,a){if(!l[s]){if(!t[s]){if(!a&&("function"==typeof n&&n))return n(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=l[s]={exports:{}};t[s][0].call(c.exports,function(e){return r(t[s][1][e]||e)},c,c.exports,e,t,l,i)}return l[s].exports}for(var o="function"==typeof n&&n,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){"use strict";function l(e,t,n,l,i){var r=a.writeRtpDescription(e.kind,t);if(r+=a.writeIceParameters(e.iceGatherer.getLocalParameters()),r+=a.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),r+="a=mid:"+e.mid+"\r\n",r+=e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var o=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=o;var s="msid:"+(l?l.id:"-")+" "+o+"\r\n";r+="a="+s,r+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(r+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,r+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return r+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+a.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(r+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+a.localCName+"\r\n"),r}function i(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},l=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var r=l(e.parameters.apt,n),o=l(t.parameters.apt,i);return r&&o&&r.name.toLowerCase()===o.name.toLowerCase()};return e.codecs.forEach(function(l){for(var r=0;r<t.codecs.length;r++){var o=t.codecs[r];if(l.name.toLowerCase()===o.name.toLowerCase()&&l.clockRate===o.clockRate){if("rtx"===l.name.toLowerCase()&&l.parameters&&o.parameters.apt&&!i(l,o,e.codecs,t.codecs))continue;(o=JSON.parse(JSON.stringify(o))).numChannels=Math.min(l.numChannels,o.numChannels),n.codecs.push(o),o.rtcpFeedback=o.rtcpFeedback.filter(function(e){for(var t=0;t<l.rtcpFeedback.length;t++)if(l.rtcpFeedback[t].type===e.type&&l.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var l=0;l<t.headerExtensions.length;l++){var i=t.headerExtensions[l];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n}function r(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function o(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function s(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}var a=e("sdp");t.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,l,i){var r=new Event("track");r.track=n,r.receiver=l,r.transceiver={receiver:l},r.streams=i,e.setTimeout(function(){t._dispatchEvent("track",r)})}var c=function(n){var l=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){l[e]=i[e].bind(i)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw s("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var l=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof l;return i&&(l=[l]),l=l.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)}),delete e.url,e.urls=i?l[0]:l,!!l.length}})}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var r=n.iceCandidatePoolSize;r>0;r--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=a.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(c.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(c.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),c.prototype.onicecandidate=null,c.prototype.onaddstream=null,c.prototype.ontrack=null,c.prototype.onremovestream=null,c.prototype.onsignalingstatechange=null,c.prototype.oniceconnectionstatechange=null,c.prototype.onconnectionstatechange=null,c.prototype.onicegatheringstatechange=null,c.prototype.onnegotiationneeded=null,c.prototype.ondatachannel=null,c.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},c.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},c.prototype.getConfiguration=function(){return this._config},c.prototype.getLocalStreams=function(){return this.localStreams},c.prototype.getRemoteStreams=function(){return this.remoteStreams},c.prototype._createTransceiver=function(e,t){var n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var l=this._createIceAndDtlsTransports();n.iceTransport=l.iceTransport,n.dtlsTransport=l.dtlsTransport}return t||this.transceivers.push(n),n},c.prototype.addTrack=function(t,n){if(this._isClosed)throw s("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var l;if(this.transceivers.find(function(e){return e.track===t}))throw s("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(l=this.transceivers[i]);return l||(l=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),l.track=t,l.stream=n,l.rtpSender=new e.RTCRtpSender(t,l.dtlsTransport),l.rtpSender},c.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach(function(t){n.addTrack(t,e)});else{var l=e.clone();e.getTracks().forEach(function(e,t){var n=l.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),l.getTracks().forEach(function(e){n.addTrack(e,l)})}},c.prototype.removeTrack=function(t){if(this._isClosed)throw s("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find(function(e){return e.rtpSender===t});if(!n)throw s("InvalidAccessError","Sender was not created by this connection.");var l=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null;-1===this.transceivers.map(function(e){return e.stream}).indexOf(l)&&this.localStreams.indexOf(l)>-1&&this.localStreams.splice(this.localStreams.indexOf(l),1),this._maybeFireNegotiationNeeded()},c.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var n=t.getSenders().find(function(t){return t.track===e});n&&t.removeTrack(n)})},c.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},c.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},c.prototype._createIceGatherer=function(t,n){var l=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==l.transceivers[t].bufferedCandidateEvents&&l.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},c.prototype._gather=function(t,n){var l=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var r=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(l.usingBundle&&n>0)){var r=new Event("icecandidate");r.candidate={sdpMid:t,sdpMLineIndex:n};var o=e.candidate,s=!o||0===Object.keys(o).length;if(s)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),o.component=1,o.ufrag=i.getLocalParameters().usernameFragment;var u=a.writeCandidate(o);r.candidate=Object.assign(r.candidate,a.parseCandidate(u)),r.candidate.candidate=u,r.candidate.toJSON=function(){return{candidate:r.candidate.candidate,sdpMid:r.candidate.sdpMid,sdpMLineIndex:r.candidate.sdpMLineIndex,usernameFragment:r.candidate.usernameFragment}}}var c=a.getMediaSections(l._localDescription.sdp);c[r.candidate.sdpMLineIndex]+=s?"a=end-of-candidates\r\n":"a="+r.candidate.candidate+"\r\n",l._localDescription.sdp=a.getDescription(l._localDescription.sdp)+c.join("");var d=l.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==l.iceGatheringState&&(l.iceGatheringState="gathering",l._emitGatheringStateChange()),s||l._dispatchEvent("icecandidate",r),d&&(l._dispatchEvent("icecandidate",new Event("icecandidate")),l.iceGatheringState="complete",l._emitGatheringStateChange())}},e.setTimeout(function(){r.forEach(function(e){i.onlocalcandidate(e)})},0)}},c.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var l=new e.RTCDtlsTransport(n);return l.ondtlsstatechange=function(){t._updateConnectionState()},l.onerror=function(){Object.defineProperty(l,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:l}},c.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var l=this.transceivers[e].dtlsTransport;l&&(delete l.ondtlsstatechange,delete l.onerror,delete this.transceivers[e].dtlsTransport)},c.prototype._transceive=function(e,n,l){var r=i(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(r.encodings=e.sendEncodingParameters,r.rtcp={cname:a.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(r.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(r)),l&&e.rtpReceiver&&r.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),r.encodings=e.recvEncodingParameters.length?e.recvEncodingParameters:[{}],r.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(r.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(r.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(r))},c.prototype.setLocalDescription=function(e){var t,n,l=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(s("TypeError",'Unsupported type "'+e.type+'"'));if(!r("setLocalDescription",e.type,l.signalingState)||l._isClosed)return Promise.reject(s("InvalidStateError","Can not set local "+e.type+" in state "+l.signalingState));if("offer"===e.type)t=a.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=a.parseRtpParameters(e);l.transceivers[t].localCapabilities=n}),l.transceivers.forEach(function(e,t){l._gather(e.mid,t)});else if("answer"===e.type){t=a.splitSections(l._remoteDescription.sdp),n=t.shift();var o=a.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var r=l.transceivers[t],s=r.iceGatherer,u=r.iceTransport,c=r.dtlsTransport,d=r.localCapabilities,h=r.remoteCapabilities;if(!(a.isRejected(e)&&0===a.matchPrefix(e,"a=bundle-only").length)&&!r.rejected){var p=a.getIceParameters(e,n),g=a.getDtlsParameters(e,n);o&&(g.role="server"),l.usingBundle&&0!==t||(l._gather(r.mid,t),"new"===u.state&&u.start(s,p,o?"controlling":"controlled"),"new"===c.state&&c.start(g));var f=i(d,h);l._transceive(r,f.codecs.length>0,!1)}})}return l._localDescription={type:e.type,sdp:e.sdp},l._updateSignalingState("offer"===e.type?"have-local-offer":"stable"),Promise.resolve()},c.prototype.setRemoteDescription=function(l){var i=this;if(-1===["offer","answer"].indexOf(l.type))return Promise.reject(s("TypeError",'Unsupported type "'+l.type+'"'));if(!r("setRemoteDescription",l.type,i.signalingState)||i._isClosed)return Promise.reject(s("InvalidStateError","Can not set remote "+l.type+" in state "+i.signalingState));var c={};i.remoteStreams.forEach(function(e){c[e.id]=e});var d=[],h=a.splitSections(l.sdp),p=h.shift(),g=a.matchPrefix(p,"a=ice-lite").length>0,f=a.matchPrefix(p,"a=group:BUNDLE ").length>0;i.usingBundle=f;var m=a.matchPrefix(p,"a=ice-options:")[0];return i.canTrickleIceCandidates=!!m&&m.substr(14).split(" ").indexOf("trickle")>=0,h.forEach(function(r,s){var u=a.splitLines(r),h=a.getKind(r),m=a.isRejected(r)&&0===a.matchPrefix(r,"a=bundle-only").length,v=u[0].substr(2).split(" ")[2],_=a.getDirection(r,p),b=a.parseMsid(r),y=a.getMid(r)||a.generateIdentifier();if(m||"application"===h&&("DTLS/SCTP"===v||"UDP/DTLS/SCTP"===v))i.transceivers[s]={mid:y,kind:h,protocol:v,rejected:!0};else{var C,S,T,E,R,P,I,k,L;!m&&i.transceivers[s]&&i.transceivers[s].rejected&&(i.transceivers[s]=i._createTransceiver(h,!0));var M,w,U=a.parseRtpParameters(r);m||(M=a.getIceParameters(r,p),(w=a.getDtlsParameters(r,p)).role="client"),I=a.parseRtpEncodingParameters(r);var z=a.parseRtcpParameters(r),O=a.matchPrefix(r,"a=end-of-candidates",p).length>0,D=a.matchPrefix(r,"a=candidate:").map(function(e){return a.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===l.type||"answer"===l.type)&&!m&&f&&s>0&&i.transceivers[s]&&(i._disposeIceAndDtlsTransports(s),i.transceivers[s].iceGatherer=i.transceivers[0].iceGatherer,i.transceivers[s].iceTransport=i.transceivers[0].iceTransport,i.transceivers[s].dtlsTransport=i.transceivers[0].dtlsTransport,i.transceivers[s].rtpSender&&i.transceivers[s].rtpSender.setTransport(i.transceivers[0].dtlsTransport),i.transceivers[s].rtpReceiver&&i.transceivers[s].rtpReceiver.setTransport(i.transceivers[0].dtlsTransport)),"offer"!==l.type||m)"answer"!==l.type||m||(C=i.transceivers[s],S=C.iceGatherer,T=C.iceTransport,E=C.dtlsTransport,R=C.rtpReceiver,P=C.sendEncodingParameters,k=C.localCapabilities,i.transceivers[s].recvEncodingParameters=I,i.transceivers[s].remoteCapabilities=U,i.transceivers[s].rtcpParameters=z,D.length&&"new"===T.state&&(!g&&!O||f&&0!==s?D.forEach(function(e){o(C.iceTransport,e)}):T.setRemoteCandidates(D)),f&&0!==s||("new"===T.state&&T.start(S,M,"controlling"),"new"===E.state&&E.start(w)),i._transceive(C,"sendrecv"===_||"recvonly"===_,"sendrecv"===_||"sendonly"===_),!R||"sendrecv"!==_&&"sendonly"!==_?delete C.rtpReceiver:(L=R.track,b?(c[b.stream]||(c[b.stream]=new e.MediaStream),n(L,c[b.stream]),d.push([L,R,c[b.stream]])):(c.default||(c.default=new e.MediaStream),n(L,c.default),d.push([L,R,c.default]))));else{(C=i.transceivers[s]||i._createTransceiver(h)).mid=y,C.iceGatherer||(C.iceGatherer=i._createIceGatherer(s,f)),D.length&&"new"===C.iceTransport.state&&(!O||f&&0!==s?D.forEach(function(e){o(C.iceTransport,e)}):C.iceTransport.setRemoteCandidates(D)),k=e.RTCRtpReceiver.getCapabilities(h),t<15019&&(k.codecs=k.codecs.filter(function(e){return"rtx"!==e.name})),P=C.sendEncodingParameters||[{ssrc:1001*(2*s+2)}];var N,A=!1;"sendrecv"===_||"sendonly"===_?(A=!C.rtpReceiver,R=C.rtpReceiver||new e.RTCRtpReceiver(C.dtlsTransport,h),A&&(L=R.track,b&&"-"===b.stream||(b?(c[b.stream]||(c[b.stream]=new e.MediaStream,Object.defineProperty(c[b.stream],"id",{get:function(){return b.stream}})),Object.defineProperty(L,"id",{get:function(){return b.track}}),N=c[b.stream]):(c.default||(c.default=new e.MediaStream),N=c.default)),N&&(n(L,N),C.associatedRemoteMediaStreams.push(N)),d.push([L,R,N]))):C.rtpReceiver&&C.rtpReceiver.track&&(C.associatedRemoteMediaStreams.forEach(function(t){var n,l,i=t.getTracks().find(function(e){return e.id===C.rtpReceiver.track.id});i&&(n=i,(l=t).removeTrack(n),l.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:n})))}),C.associatedRemoteMediaStreams=[]),C.localCapabilities=k,C.remoteCapabilities=U,C.rtpReceiver=R,C.rtcpParameters=z,C.sendEncodingParameters=P,C.recvEncodingParameters=I,i._transceive(i.transceivers[s],!1,A)}}}),void 0===i._dtlsRole&&(i._dtlsRole="offer"===l.type?"active":"passive"),i._remoteDescription={type:l.type,sdp:l.sdp},i._updateSignalingState("offer"===l.type?"have-remote-offer":"stable"),Object.keys(c).forEach(function(t){var n=c[t];if(n.getTracks().length){if(-1===i.remoteStreams.indexOf(n)){i.remoteStreams.push(n);var l=new Event("addstream");l.stream=n,e.setTimeout(function(){i._dispatchEvent("addstream",l)})}d.forEach(function(e){n.id===e[2].id&&u(i,e[0],e[1],[n])})}}),d.forEach(function(e){e[2]||u(i,e[0],e[1],[])}),e.setTimeout(function(){i&&i.transceivers&&i.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},c.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},c.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},c.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},c.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},c.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){t[e.iceTransport.state]++,t[e.dtlsTransport.state]++}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},c.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(s("InvalidStateError","Can not call createOffer after close"));var i=n.transceivers.filter(function(e){return"audio"===e.kind}).length,r=n.transceivers.filter(function(e){return"video"===e.kind}).length,o=arguments[0];if(o){if(o.mandatory||o.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==o.offerToReceiveAudio&&(i=!0===o.offerToReceiveAudio?1:!1===o.offerToReceiveAudio?0:o.offerToReceiveAudio),void 0!==o.offerToReceiveVideo&&(r=!0===o.offerToReceiveVideo?1:!1===o.offerToReceiveVideo?0:o.offerToReceiveVideo)}for(n.transceivers.forEach(function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--r<0&&(e.wantReceive=!1)});i>0||r>0;)i>0&&(n._createTransceiver("audio"),i--),r>0&&(n._createTransceiver("video"),r--);var u=a.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach(function(l,i){var r=l.track,o=l.kind,s=l.mid||a.generateIdentifier();l.mid=s,l.iceGatherer||(l.iceGatherer=n._createIceGatherer(i,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(o);t<15019&&(u.codecs=u.codecs.filter(function(e){return"rtx"!==e.name})),u.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),l.remoteCapabilities&&l.remoteCapabilities.codecs&&l.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),u.headerExtensions.forEach(function(e){(l.remoteCapabilities&&l.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var c=l.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];r&&t>=15019&&"video"===o&&!c[0].rtx&&(c[0].rtx={ssrc:c[0].ssrc+1}),l.wantReceive&&(l.rtpReceiver=new e.RTCRtpReceiver(l.dtlsTransport,o)),l.localCapabilities=u,l.sendEncodingParameters=c}),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach(function(e,t){u+=l(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,u+="a="+a.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))});var c=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(c)},c.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(s("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(s("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var r=a.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(r+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n");var o=a.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach(function(e,s){if(!(s+1>o)){if(e.rejected)return"application"===e.kind?r+="DTLS/SCTP"===e.protocol?"m=application 0 DTLS/SCTP 5000\r\n":"m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?r+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(r+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(r+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var a;e.stream&&("audio"===e.kind?a=e.stream.getAudioTracks()[0]:"video"===e.kind&&(a=e.stream.getVideoTracks()[0]),a&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=i(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,r+=l(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(r+="a=rtcp-rsize\r\n")}});var u=new e.RTCSessionDescription({type:"answer",sdp:r});return Promise.resolve(u)},c.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(l,i){if(!n._remoteDescription)return i(s("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var r=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){r=u;break}var c=n.transceivers[r];if(!c)return i(s("OperationError","Can not add ICE candidate"));if(c.rejected)return l();var d=Object.keys(e.candidate).length>0?a.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return l();if(d.component&&1!==d.component)return l();if((0===r||r>0&&c.iceTransport!==n.transceivers[0].iceTransport)&&!o(c.iceTransport,d))return i(s("OperationError","Can not add ICE candidate"));var h=e.candidate.trim();0===h.indexOf("a=")&&(h=h.substr(2)),(t=a.getMediaSections(n._remoteDescription.sdp))[r]+="a="+(d.type?h:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=a.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length&&(n.transceivers[p].rejected||(n.transceivers[p].iceTransport.addRemoteCandidate({}),(t=a.getMediaSections(n._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=a.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));p++);l()})},c.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)}),!n)throw s("InvalidAccessError","Invalid selector.");return n.getStats()}var l=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&l.push(e[t].getStats())})}),Promise.all(l).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var l=n.prototype.getStats;n.prototype.getStats=function(){return l.apply(this).then(function(e){var t=new Map;return Object.keys(e).forEach(function(n){var l;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(l=e[n]).type]||l.type,t.set(n,e[n])}),t})}}});var d=["createOffer","createAnswer"];return d.forEach(function(e){var t=c.prototype[e];c.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=c.prototype[e];c.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=c.prototype[e];c.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),c}},{sdp:2}],2:[function(e,t,n){"use strict";var l={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};l.localCName=l.generateIdentifier(),l.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},l.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},l.getDescription=function(e){var t=l.splitSections(e);return t&&t[0]},l.getMediaSections=function(e){var t=l.splitSections(e);return t.shift(),t},l.matchPrefix=function(e,t){return l.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},l.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},l=8;l<t.length;l+=2)switch(t[l]){case"raddr":n.relatedAddress=t[l+1];break;case"rport":n.relatedPort=parseInt(t[l+1],10);break;case"tcptype":n.tcpType=t[l+1];break;case"ufrag":n.ufrag=t[l+1],n.usernameFragment=t[l+1];break;default:n[t[l]]=t[l+1]}return n},l.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},l.parseIceOptions=function(e){return e.substr(14).split(" ")},l.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},l.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},l.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},l.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},l.parseFmtp=function(e){for(var t,n={},l=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<l.length;i++)t=l[i].trim().split("="),n[t[0].trim()]=t[1];return n},l.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var l=[];Object.keys(e.parameters).forEach(function(t){l.push(e.parameters[t]?t+"="+e.parameters[t]:t)}),t+="a=fmtp:"+n+" "+l.join(";")+"\r\n"}return t},l.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},l.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},l.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},l=e.indexOf(":",t);return l>-1?(n.attribute=e.substr(t+1,l-t-1),n.value=e.substr(l+1)):n.attribute=e.substr(t+1),n},l.getMid=function(e){var t=l.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},l.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},l.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:l.matchPrefix(e+t,"a=fingerprint:").map(l.parseFingerprint)}},l.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},l.getIceParameters=function(e,t){var n=l.splitLines(e);return{usernameFragment:(n=n.concat(l.splitLines(t))).filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},l.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},l.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=l.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var r=n[i],o=l.matchPrefix(e,"a=rtpmap:"+r+" ")[0];if(o){var s=l.parseRtpMap(o),a=l.matchPrefix(e,"a=fmtp:"+r+" ");switch(s.parameters=a.length?l.parseFmtp(a[0]):{},s.rtcpFeedback=l.matchPrefix(e,"a=rtcp-fb:"+r+" ").map(l.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return l.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(l.parseExtmap(e))}),t},l.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=l.writeRtpMap(e),n+=l.writeFmtp(e),n+=l.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){n+=l.writeExtmap(e)}),n},l.parseRtpEncodingParameters=function(e){var t,n=[],i=l.parseRtpParameters(e),r=-1!==i.fecMechanisms.indexOf("RED"),o=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=l.matchPrefix(e,"a=ssrc:").map(function(e){return l.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),a=s.length>0&&s[0].ssrc,u=l.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===a&&(t=u[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var l={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&t&&(l.rtx={ssrc:t}),n.push(l),r&&((l=JSON.parse(JSON.stringify(l))).fec={ssrc:t,mechanism:o?"red+ulpfec":"red"},n.push(l))}}),0===n.length&&a&&n.push({ssrc:a});var c=l.matchPrefix(e,"b=");return c.length&&(c=0===c[0].indexOf("b=TIAS:")?parseInt(c[0].substr(7),10):0===c[0].indexOf("b=AS:")?1e3*parseInt(c[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(e){e.maxBitrate=c})),n},l.parseRtcpParameters=function(e){var t={},n=l.matchPrefix(e,"a=ssrc:").map(function(e){return l.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=l.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var r=l.matchPrefix(e,"a=rtcp-mux");return t.mux=r.length>0,t},l.parseMsid=function(e){var t,n=l.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var i=l.matchPrefix(e,"a=ssrc:").map(function(e){return l.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},l.generateSessionId=function(){return Math.random().toString().substr(2,21)},l.writeSessionBoilerplate=function(e,t){var n=void 0!==t?t:2;return"v=0\r\no=thisisadapterortc "+(e||l.generateSessionId())+" "+n+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},l.writeMediaSection=function(e,t,n,i){var r=l.writeRtpDescription(e.kind,t);if(r+=l.writeIceParameters(e.iceGatherer.getLocalParameters()),r+=l.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),r+="a=mid:"+e.mid+"\r\n",r+=e.direction?"a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var o="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";r+="a="+o,r+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o,e.sendEncodingParameters[0].rtx&&(r+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o,r+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return r+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+l.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(r+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+l.localCName+"\r\n"),r},l.getDirection=function(e,t){for(var n=l.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?l.getDirection(t):"sendrecv"},l.getKind=function(e){return l.splitLines(e)[0].split(" ")[0].substr(2)},l.isRejected=function(e){return"0"===e.split(" ",2)[1]},l.parseMLine=function(e){var t=l.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},l.parseOLine=function(e){var t=l.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},"object"==typeof t&&(t.exports=l)},{}],3:[function(e,n,l){(function(t){"use strict";var l=e("./adapter_factory.js");n.exports=l({window:t.window})}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./adapter_factory.js":4}],4:[function(e,t,n){"use strict";var l=e("./utils");t.exports=function(t,n){var i=t&&t.window,r={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var o in n)hasOwnProperty.call(n,o)&&(r[o]=n[o]);var s=l.log,a=l.detectBrowser(i),u=e("./chrome/chrome_shim")||null,c=e("./edge/edge_shim")||null,d=e("./firefox/firefox_shim")||null,h=e("./safari/safari_shim")||null,p=e("./common_shim")||null,g={browserDetails:a,commonShim:p,extractVersion:l.extractVersion,disableLog:l.disableLog,disableWarnings:l.disableWarnings};switch(a.browser){case"chrome":if(!u||!u.shimPeerConnection||!r.shimChrome)return s("Chrome shim is not included in this adapter release."),g;s("adapter.js shimming chrome."),g.browserShim=u,p.shimCreateObjectURL(i),u.shimGetUserMedia(i),u.shimMediaStream(i),u.shimSourceObject(i),u.shimPeerConnection(i),u.shimOnTrack(i),u.shimAddTrackRemoveTrack(i),u.shimGetSendersWithDtmf(i),u.shimSenderReceiverGetStats(i),u.fixNegotiationNeeded(i),p.shimRTCIceCandidate(i),p.shimMaxMessageSize(i),p.shimSendThrowTypeError(i);break;case"firefox":if(!d||!d.shimPeerConnection||!r.shimFirefox)return s("Firefox shim is not included in this adapter release."),g;s("adapter.js shimming firefox."),g.browserShim=d,p.shimCreateObjectURL(i),d.shimGetUserMedia(i),d.shimSourceObject(i),d.shimPeerConnection(i),d.shimOnTrack(i),d.shimRemoveStream(i),d.shimSenderGetStats(i),d.shimReceiverGetStats(i),d.shimRTCDataChannel(i),p.shimRTCIceCandidate(i),p.shimMaxMessageSize(i),p.shimSendThrowTypeError(i);break;case"edge":if(!c||!c.shimPeerConnection||!r.shimEdge)return s("MS edge shim is not included in this adapter release."),g;s("adapter.js shimming edge."),g.browserShim=c,p.shimCreateObjectURL(i),c.shimGetUserMedia(i),c.shimPeerConnection(i),c.shimReplaceTrack(i),p.shimMaxMessageSize(i),p.shimSendThrowTypeError(i);break;case"safari":if(!h||!r.shimSafari)return s("Safari shim is not included in this adapter release."),g;s("adapter.js shimming safari."),g.browserShim=h,p.shimCreateObjectURL(i),h.shimRTCIceServerUrls(i),h.shimCallbacksAPI(i),h.shimLocalStreamsAPI(i),h.shimRemoteStreamsAPI(i),h.shimTrackEventTransceiver(i),h.shimGetUserMedia(i),h.shimCreateOfferLegacy(i),p.shimRTCIceCandidate(i),p.shimMaxMessageSize(i),p.shimSendThrowTypeError(i);break;default:s("Unsupported browser!")}return g}},{"./chrome/chrome_shim":5,"./common_shim":7,"./edge/edge_shim":8,"./firefox/firefox_shim":11,"./safari/safari_shim":13,"./utils":14}],5:[function(e,t,n){"use strict";function l(e,t,n){var l=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var r=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&r.push(e)}),r.forEach(function(t){e.forEach(function(n){n.type===l&&n.trackId===t.id&&function e(t,n,l){n&&!l.has(n.id)&&(l.set(n.id,n),Object.keys(n).forEach(function(i){i.endsWith("Id")?e(t,t.get(n[i]),l):i.endsWith("Ids")&&n[i].forEach(function(n){e(t,t.get(n),l)})}))}(e,n,i)})}),i}var i=e("../utils.js"),r=i.log;t.exports={shimGetUserMedia:e("./getusermedia"),shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(e){if("object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)"RTCRtpTransceiver"in e||i.wrapPeerConnectionEvent(e,"track",function(e){return e.transceiver||(e.transceiver={receiver:e.receiver}),e});else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return n._ontrackpoly||(n._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(l){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===l.track.id}):{track:l.track};var r=new Event("track");r.track=l.track,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],n.dispatchEvent(r)}),t.stream.getTracks().forEach(function(l){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===l.id}):{track:l};var r=new Event("track");r.track=l,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],n.dispatchEvent(r)})},n.addEventListener("addstream",n._ontrackpoly)),t.apply(n,arguments)}}},shimGetSendersWithDtmf:function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===t.kind?e.createDTMFSender(t):null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,l){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var l=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){l.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;n._senders=n._senders||[],i.apply(n,[e]),e.getTracks().forEach(function(e){n._senders.push(t(n,e))})};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._senders=t._senders||[],r.apply(t,[e]),e.getTracks().forEach(function(e){var n=t._senders.find(function(t){return t.track===e});n&&t._senders.splice(t._senders.indexOf(n),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var o=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=o.apply(e,[]);return t.forEach(function(t){t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}},shimSenderReceiverGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(e,[]);return n.forEach(function(t){t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return l(t,e.track,!0)})}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(e,[]);return t.forEach(function(t){t._pc=e}),t}),i.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return l(t,e.track,!1)})}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,l,i=arguments[0];return this.getSenders().forEach(function(e){e.track===i&&(t?l=!0:t=e)}),this.getReceivers().forEach(function(e){return e.track===i&&(n?l=!0:n=e),e.track===i}),l||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}},shimSourceObject:function(e){var t=e&&e.URL;"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var n=this;this._srcObject=e,this.src&&t.revokeObjectURL(this.src),e?(this.src=t.createObjectURL(e),e.addEventListener("addtrack",function(){n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)}),e.addEventListener("removetrack",function(){n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)})):this.src=""}}))},shimAddTrackRemoveTrackWithNative:function(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var l=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(l)&&this._shimmedLocalStreams[n.id].push(l):this._shimmedLocalStreams[n.id]=[n,l],l};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var l=t.getSenders();n.apply(this,arguments);var i=t.getSenders().filter(function(e){return-1===l.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var l=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],l.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(n){var l=t._shimmedLocalStreams[n].indexOf(e);-1!==l&&t._shimmedLocalStreams[n].splice(l,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]}),i.apply(this,arguments)}},shimAddTrackRemoveTrack:function(e){function t(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var l=e._reverseStreams[t],i=e._streams[l.id];n=n.replace(new RegExp(i.id,"g"),l.id)}),new RTCSessionDescription({type:t.type,sdp:n})}var n=i.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&n.version>=65)return this.shimAddTrackRemoveTrackWithNative(e);var l=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=l.apply(this);return e._reverseStreams=e._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(n._streams=n._streams||{},n._reverseStreams=n._reverseStreams||{},t.getTracks().forEach(function(e){if(n.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!n._reverseStreams[t.id]){var l=new e.MediaStream(t.getTracks());n._streams[t.id]=l,n._reverseStreams[l.id]=t,t=l}r.apply(n,[t])};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var l=this;if("closed"===l.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(l.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");l._streams=l._streams||{},l._reverseStreams=l._reverseStreams||{};var r=l._streams[n.id];if(r)r.addTrack(t),Promise.resolve().then(function(){l.dispatchEvent(new Event("negotiationneeded"))});else{var o=new e.MediaStream([t]);l._streams[n.id]=o,l._reverseStreams[o.id]=n,l.addStream(o)}return l.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(n){var l=e.RTCPeerConnection.prototype[n];e.RTCPeerConnection.prototype[n]=function(){var e=this,n=arguments;return arguments.length&&"function"==typeof arguments[0]?l.apply(e,[function(l){var i=t(e,l);n[0].apply(null,[i])},function(e){n[1]&&n[1].apply(null,e)},arguments[2]]):l.apply(e,arguments).then(function(n){return t(e,n)})}});var s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var l=e._reverseStreams[t],i=e._streams[l.id];n=n.replace(new RegExp(l.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:t(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===t.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");var n;if(!(e._pc===t))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");t._streams=t._streams||{},Object.keys(t._streams).forEach(function(l){t._streams[l].getTracks().find(function(t){return e.track===t})&&(n=t._streams[l])}),n&&(1===n.getTracks().length?t.removeStream(t._reverseStreams[n.id]):n.removeTrack(e.track),t.dispatchEvent(new Event("negotiationneeded")))}},shimPeerConnection:function(e){var t=i.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection)e.RTCPeerConnection=function(t,n){return r("PeerConnection"),t&&t.iceTransportPolicy&&(t.iceTransports=t.iceTransportPolicy),new e.webkitRTCPeerConnection(t,n)},e.RTCPeerConnection.prototype=e.webkitRTCPeerConnection.prototype,e.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.webkitRTCPeerConnection.generateCertificate}});else{var n=e.RTCPeerConnection;e.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var l=[],r=0;r<e.iceServers.length;r++){var o=e.iceServers[r];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(i.deprecated("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,l.push(o)):l.push(e.iceServers[r])}e.iceServers=l}return new n(e,t)},e.RTCPeerConnection.prototype=n.prototype,Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return n.generateCertificate}})}var l=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,t,n){var i=this,r=arguments;if(arguments.length>0&&"function"==typeof e)return l.apply(this,arguments);if(0===l.length&&(0===arguments.length||"function"!=typeof arguments[0]))return l.apply(this,[]);var o=function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};return arguments.length>=2?l.apply(this,[function(e){r[1](s(o(e)))},arguments[0]]):new Promise(function(e,t){l.apply(i,[function(t){e(s(o(t)))},t])}).then(t,n)},t.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=arguments,t=this,l=new Promise(function(l,i){n.apply(t,[e[0],l,i])});return e.length<2?l:l.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),t.version<52&&["createOffer","createAnswer"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var t=1===arguments.length?arguments[0]:void 0;return new Promise(function(l,i){n.apply(e,[l,i,t])})}return n.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}});var o=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?o.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}},fixNegotiationNeeded:function(e){i.wrapPeerConnectionEvent(e,"negotiationneeded",function(e){if("stable"===e.target.signalingState)return e})},shimGetDisplayMedia:function(e,t){"getDisplayMedia"in e.navigator||("function"==typeof t?navigator.getDisplayMedia=function(e){return t(e).then(function(t){return e.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:e.video.frameRate||3}},navigator.mediaDevices.getUserMedia(e)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}},{"../utils.js":14,"./getusermedia":6}],6:[function(e,t,n){"use strict";var l=e("../utils.js"),i=l.log;t.exports=function(e){var t=l.detectBrowser(e),n=e&&e.navigator,r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var l="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==l.exact&&"number"==typeof l.exact&&(l.min=l.max=l.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==l.ideal){t.optional=t.optional||[];var r={};"number"==typeof l.ideal?(r[i("min",n)]=l.ideal,t.optional.push(r),(r={})[i("max",n)]=l.ideal,t.optional.push(r)):(r[i("",n)]=l.ideal,t.optional.push(r))}void 0!==l.exact&&"number"!=typeof l.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=l.exact):["min","max"].forEach(function(e){void 0!==l[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=l[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,l){if(t.version>=61)return l(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};o((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){var s,a=e.video.facingMode,u=t.version<66;if((a=a&&("object"==typeof a?a:{ideal:a}))&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||u)&&(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?s=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(s=["front"]),s))return n.mediaDevices.enumerateDevices().then(function(t){var n=(t=t.filter(function(e){return"videoinput"===e.kind})).find(function(e){return s.some(function(t){return-1!==e.label.toLowerCase().indexOf(t)})});return!n&&t.length&&-1!==s.indexOf("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=a.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),i("chrome: "+JSON.stringify(e)),l(e)});e.video=r(e.video)}return i("chrome: "+JSON.stringify(e)),l(e)},s=function(e){return{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};n.getUserMedia=function(e,t,l){o(e,function(e){n.webkitGetUserMedia(e,t,function(e){l&&l(s(e))})})};var a=function(e){return new Promise(function(t,l){n.getUserMedia(e,t,l)})};if(n.mediaDevices||(n.mediaDevices={getUserMedia:a,enumerateDevices:function(){return new Promise(function(t){var n={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources(function(e){t(e.map(function(e){return{label:e.label,kind:n[e.kind],deviceId:e.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),n.mediaDevices.getUserMedia){var u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return o(e,function(e){return u(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(s(e))})})}}else n.mediaDevices.getUserMedia=function(e){return a(e)};void 0===n.mediaDevices.addEventListener&&(n.mediaDevices.addEventListener=function(){i("Dummy mediaDevices.addEventListener called.")}),void 0===n.mediaDevices.removeEventListener&&(n.mediaDevices.removeEventListener=function(){i("Dummy mediaDevices.removeEventListener called.")})}},{"../utils.js":14}],7:[function(e,t,n){"use strict";var l=e("sdp"),i=e("./utils");t.exports={shimRTCIceCandidate:function(e){if(e.RTCIceCandidate&&!(e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),i=l.parseCandidate(e.candidate),r=Object.assign(n,i);return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,i.wrapPeerConnectionEvent(e,"icecandidate",function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t})}},shimCreateObjectURL:function(e){var t=e&&e.URL;if("object"==typeof e&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype&&t.createObjectURL&&t.revokeObjectURL){var n=t.createObjectURL.bind(t),l=t.revokeObjectURL.bind(t),r=new Map,o=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++o;return r.set(t,e),i.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t}return n(e)},t.revokeObjectURL=function(e){l(e),r.delete(e)};var s=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return s.get.apply(this)},set:function(e){return this.srcObject=r.get(e)||null,s.set.apply(this,[e])}});var a=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=r.get(arguments[1])||null),a.apply(this,arguments)}}},shimMaxMessageSize:function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var t=i.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e,i,r,o;if(this._sctp=null,e=arguments[0],(i=l.splitSections(e.sdp)).shift(),i.some(function(e){var t=l.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})){var s,a=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),u=(r=a,o=65536,"firefox"===t.browser&&(o=t.version<57?-1===r?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),o),c=function(e,n){var i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);var r=l.matchPrefix(e.sdp,"a=max-message-size:");return r.length>0?i=parseInt(r[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i}(arguments[0],a);s=0===u&&0===c?Number.POSITIVE_INFINITY:0===u||0===c?Math.max(u,c):Math.min(u,c);var d={};Object.defineProperty(d,"maxMessageSize",{get:function(){return s}}),this._sctp=d}return n.apply(this,arguments)}}},shimSendThrowTypeError:function(e){function t(e,t){var n=e.send;e.send=function(){var l=arguments[0];if("open"===e.readyState&&t.sctp&&(l.length||l.size||l.byteLength)>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=n.apply(this,arguments);return t(e,this),e},i.wrapPeerConnectionEvent(e,"datachannel",function(e){return t(e.channel,e.target),e})}}}},{"./utils":14,sdp:2}],8:[function(e,t,n){"use strict";var l=e("../utils"),i=e("./filtericeservers"),r=e("rtcpeerconnection-shim");t.exports={shimGetUserMedia:e("./getusermedia"),shimPeerConnection:function(e){var t=l.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var o=r(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=i(e.iceServers)),new o(e)},e.RTCPeerConnection.prototype=o.prototype},shimReplaceTrack:function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}}},{"../utils":14,"./filtericeservers":9,"./getusermedia":10,"rtcpeerconnection-shim":1}],9:[function(e,t,n){"use strict";var l=e("../utils");t.exports=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var i=e.urls||e.url;e.url&&!e.urls&&l.deprecated("RTCIceServer.url","RTCIceServer.urls");var r="string"==typeof i;return r&&(i=[i]),i=i.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!n?(n=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")}),delete e.url,e.urls=r?i[0]:i,!!i.length}})}},{"../utils":14}],10:[function(e,t,n){"use strict";t.exports=function(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(function(e){return Promise.reject({name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}})})}}},{}],11:[function(e,t,n){"use strict";var l=e("../utils");t.exports={shimGetUserMedia:e("./getusermedia"),shimOnTrack:function(e){"object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.transceiver={receiver:n.receiver},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}}),"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(e){"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(e){var t=l.detectBrowser(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){e.RTCPeerConnection||(e.RTCPeerConnection=function(n,l){if(t.version<38&&n&&n.iceServers){for(var i=[],r=0;r<n.iceServers.length;r++){var o=n.iceServers[r];if(o.hasOwnProperty("urls"))for(var s=0;s<o.urls.length;s++){var a={url:o.urls[s]};0===o.urls[s].indexOf("turn")&&(a.username=o.username,a.credential=o.credential),i.push(a)}else i.push(n.iceServers[r])}n.iceServers=i}return new e.mozRTCPeerConnection(n,l)},e.RTCPeerConnection.prototype=e.mozRTCPeerConnection.prototype,e.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.mozRTCPeerConnection.generateCertificate}}),e.RTCSessionDescription=e.mozRTCSessionDescription,e.RTCIceCandidate=e.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}});var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,n,l){return r.apply(this,[e||null]).then(function(e){if(t.version<48&&(e=function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n]),t[n]=e[n]}),t}(e)),t.version<53&&!n)try{e.forEach(function(e){e.type=i[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach(function(t,n){e.set(n,Object.assign({},t,{type:i[t.type]||t.type}))})}return e}).then(n,l)}}},shimSenderGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(e,[]);return n.forEach(function(t){t._pc=e}),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},shimReceiverGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(e,[]);return n.forEach(function(t){t._pc=e}),n}),l.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},shimRemoveStream:function(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;l.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(n){n.track&&-1!==e.getTracks().indexOf(n.track)&&t.removeTrack(n)})})},shimRTCDataChannel:function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},shimGetDisplayMedia:function(e,t){"getDisplayMedia"in e.navigator||(navigator.getDisplayMedia=function(e){if(!e||!e.video){var n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return!0===e.video?e.video={mediaSource:t}:e.video.mediaSource=t,navigator.mediaDevices.getUserMedia(e)})}}},{"../utils":14,"./getusermedia":12}],12:[function(e,t,n){"use strict";var l=e("../utils"),i=l.log;t.exports=function(e){var t=l.detectBrowser(e),n=e&&e.navigator,r=e&&e.MediaStreamTrack,o=function(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},s=function(e,l,r){var s=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var l=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if(void 0===l.min&&void 0===l.max&&void 0===l.exact||t.push(n),void 0!==l.exact&&("number"==typeof l.exact?l.min=l.max=l.exact:e[n]=l.exact,delete l.exact),void 0!==l.ideal){e.advanced=e.advanced||[];var i={};i[n]="number"==typeof l.ideal?{min:l.ideal,max:l.ideal}:l.ideal,e.advanced.push(i),delete l.ideal,Object.keys(l).length||delete e[n]}}}),t.length&&(e.require=t),e};return e=JSON.parse(JSON.stringify(e)),t.version<38&&(i("spec: "+JSON.stringify(e)),e.audio&&(e.audio=s(e.audio)),e.video&&(e.video=s(e.video)),i("ff37: "+JSON.stringify(e))),n.mozGetUserMedia(e,l,function(e){r(o(e))})};if(n.mediaDevices||(n.mediaDevices={getUserMedia:function(e){return new Promise(function(t,n){s(e,t,n)})},addEventListener:function(){},removeEventListener:function(){}}),n.mediaDevices.enumerateDevices=n.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},t.version<41){var a=n.mediaDevices.enumerateDevices.bind(n.mediaDevices);n.mediaDevices.enumerateDevices=function(){return a().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(t.version<49){var u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return u(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return t},function(e){return Promise.reject(o(e))})}}if(!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var c=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},d=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),c(e.audio,"autoGainControl","mozAutoGainControl"),c(e.audio,"noiseSuppression","mozNoiseSuppression")),d(e)},r&&r.prototype.getSettings){var h=r.prototype.getSettings;r.prototype.getSettings=function(){var e=h.apply(this,arguments);return c(e,"mozAutoGainControl","autoGainControl"),c(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var p=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),c(e,"autoGainControl","mozAutoGainControl"),c(e,"noiseSuppression","mozNoiseSuppression")),p.apply(this,[e])}}}n.getUserMedia=function(e,i,r){if(t.version<44)return s(e,i,r);l.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(i,r)}}},{"../utils":14}],13:[function(e,t,n){"use strict";var l=e("../utils");t.exports={shimLocalStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(e){var t=null;return this._localStreams&&this._localStreams.forEach(function(n){n.id===e&&(t=n)}),this._remoteStreams&&this._remoteStreams.forEach(function(n){n.id===e&&(t=n)}),t}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(e)&&this._localStreams.push(e);var n=this;e.getTracks().forEach(function(l){t.call(n,l,e)})},e.RTCPeerConnection.prototype.addTrack=function(e,n){return n&&(this._localStreams?-1===this._localStreams.indexOf(n)&&this._localStreams.push(n):this._localStreams=[n]),t.call(this,e,n)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);var n=this,l=e.getTracks();this.getSenders().forEach(function(e){-1!==l.indexOf(e.track)&&n.removeTrack(e)})}})}},shimRemoteStreamsAPI:function(e){"object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),"onaddstream"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!(t._remoteStreams.indexOf(e)>=0)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}})})}}))},shimCallbacksAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,l=t.createAnswer,i=t.setLocalDescription,r=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){var l=n.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return t?(l.then(e,t),Promise.resolve()):l},t.createAnswer=function(e,t){var n=l.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return t?(n.then(e,t),Promise.resolve()):n};var s=function(e,t,n){var l=i.apply(this,[e]);return n?(l.then(t,n),Promise.resolve()):l};t.setLocalDescription=s,t.setRemoteDescription=s=function(e,t,n){var l=r.apply(this,[e]);return n?(l.then(t,n),Promise.resolve()):l},t.addIceCandidate=s=function(e,t,n){var l=o.apply(this,[e]);return n?(l.then(t,n),Promise.resolve()):l}}},shimGetUserMedia:function(e){var t=e&&e.navigator;t.getUserMedia||(t.webkitGetUserMedia?t.getUserMedia=t.webkitGetUserMedia.bind(t):t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,l){t.mediaDevices.getUserMedia(e).then(n,l)}.bind(t)))},shimRTCIceServerUrls:function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var i=[],r=0;r<e.iceServers.length;r++){var o=e.iceServers[r];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(l.deprecated("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,i.push(o)):i.push(e.iceServers[r])}e.iceServers=i}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},shimTrackEventTransceiver:function(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find(function(e){return e.sender.track&&"audio"===e.sender.track.kind});!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==e.offerToReceiveAudio&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var l=this.getTransceivers().find(function(e){return e.sender.track&&"video"===e.sender.track.kind});!1===e.offerToReceiveVideo&&l?"sendrecv"===l.direction?l.setDirection("sendonly"):"recvonly"===l.direction&&l.setDirection("inactive"):!0!==e.offerToReceiveVideo||l||this.addTransceiver("video")}return t.apply(this,arguments)}}}},{"../utils":14}],14:[function(e,t,n){"use strict";function l(e,t,n){var l=e.match(t);return l&&l.length>=n&&parseInt(l[n],10)}var i=!0,r=!0;t.exports={extractVersion:l,wrapPeerConnectionEvent:function(e,t,n){if(e.RTCPeerConnection){var l=e.RTCPeerConnection.prototype,i=l.addEventListener;l.addEventListener=function(e,l){if(e!==t)return i.apply(this,arguments);var r=function(e){var t=n(e);t&&l(t)};return this._eventMap=this._eventMap||{},this._eventMap[l]=r,i.apply(this,[e,r])};var r=l.removeEventListener;l.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return r.apply(this,arguments);var l=this._eventMap[n];return delete this._eventMap[n],r.apply(this,[e,l])},Object.defineProperty(l,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(i=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){if("object"==typeof window){if(i)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},deprecated:function(e,t){r&&console.warn(e+" is deprecated, please use "+t+" instead.")},detectBrowser:function(e){var t=e&&e.navigator,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=l(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)n.browser="chrome",n.version=l(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=l(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=l(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return n}}},{}]},{},[3])(3)}).call(this,n(15))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),i=n(2),r=n(16),o=function(){function e(e,t,n,r){this.state=l.ENUM_PUBLISH_STATE.stop,this.sessionId=0,this.waitingICETimeInterval=5e3,this.waitingAnswerTimeInterval=5e3,this.candidateInfo=[],this.waitingICETimer=null,this.waitingAnswerTimer=null,this.qualityTimer=null,this.publishQualityList=[],this.maxQualityListCount=10,this.lastPublishStats={},this.reportSeq=i.getSeq(),this.qualityUpload=!1,this.qualityUploadInterval=3e4,this.qualityUploadLastTime=0,this.qualitySeq=0,this.maxRetryCount=3,this.currentRetryCount=0,this.retryState=l.ENUM_RETRY_STATE.didNotStart,this.waitingServerTimerInterval=3e3,this.waitingServerTimer=null,this.videoInfo={width:0,height:0,frameRate:0,bitRate:0},this.offerSeq=0,this.qualityCount=0,this.closeSessionSignal=!1,this.logger=e,this.signal=t,this.dataReport=n,this.qualityTimeInterval=r,n.newReport(this.reportSeq)}return e.prototype.publishStateUpdateError=function(e){0!=this.sessionId&&this.shouldSendCloseSession(e)&&(this.signal.sendCloseSession(i.getSeq(),this.sessionId,1),this.closeSessionSignal=!0),this.state=l.ENUM_PUBLISH_STATE.stop,this.onPublishStateUpdate(i.ENUM_PUBLISH_STATE_UPDATE.error,this.streamId,e),this.resetPublish()},e.prototype.resetPublish=function(){this.logger.info("zp.rp.0 call"),this.streamId=null,this.state=l.ENUM_PUBLISH_STATE.stop,void 0==this.peerConnection&&null==this.peerConnection||(this.peerConnection.close(),this.peerConnection=null),null!=this.waitingAnswerTimer&&(clearTimeout(this.waitingAnswerTimer),this.waitingAnswerTimer=null),null!=this.waitingICETimer&&(clearTimeout(this.waitingICETimer),this.waitingICETimer=null),this.clearPublishQualityTimer(),this.signal&&(this.signal.unregisterPushCallback("CandidateInfoPush",this.sessionId),this.signal.unregisterPushCallback("MediaDescPush",this.sessionId),this.signal.unregisterPushCallback("CloseSessionPush",this.sessionId)),this.sessionSeq=0,this.offerSeq=0,this.candidateInfo=[],this.publishQualityList=[],this.qualityUploadLastTime=0,this.currentRetryCount=0,this.retryState=l.ENUM_RETRY_STATE.didNotStart,this.clearTryPublishTimer()},e.prototype.clearTryPublishTimer=function(){null!=this.waitingServerTimer&&(clearTimeout(this.waitingServerTimer),this.waitingServerTimer=null)},e.prototype.clearPublishQualityTimer=function(){null!=this.qualityTimer&&(clearInterval(this.qualityTimer),this.qualityTimer=null),this.lastPublishStats={},this.qualityCount=0},e.prototype.shouldSendCloseSession=function(e){return this.state!=l.ENUM_PUBLISH_STATE.stop&&this.state!=l.ENUM_PUBLISH_STATE.waitingSessionRsp},e.prototype.startPublish=function(e,t,n,r){var o=this;this.logger.debug("zp.sp.0 called"),e?(this.streamId=e,this.localStream=t,n&&(this.videoInfo=n),this.sessionSeq=i.getSeq(),this.dataReport.eventStart(this.reportSeq,"CreateSession"),this.signal.createSession(this.sessionSeq,0,0,e,r&&r.streamParams,function(e,t,n){o.dataReport.eventEndWithMsg(o.reportSeq,"CreateSession",{sessionId:n.session_id}),o.logger.info("zp.sp.0 sessionId:"+n.session_id),o.sessionSeq==e?0!==n.result?(o.logger.error("zp.sp.0 create session failed "+n.result),o.publishStateUpdateError(i.publishErrorList.CREATE_SESSION_ERROR)):(o.sessionId=n.session_id,o.logger.debug("zp.sp.0 create session success "+o.sessionId),o.onCreatePublishSessionSuccess(n)):o.logger.error("zp.sp.0 seq is not match.")},function(e,t){o.dataReport.eventEndWithMsg(o.reportSeq,"CreateSession",{error:e}),o.publishStateUpdateError(i.publishErrorList.SEND_SESSION_TIMEOUT)}),this.state=l.ENUM_PUBLISH_STATE.waitingSessionRsp,this.logger.debug("zp.sp.0 called success")):this.logger.error("zp.sp.0 streamId is null")},e.prototype.onCreatePublishSessionSuccess=function(e){var t=this;this.logger.debug("zp.ops.0 called");var n=[];e.turn_server&&n.push(e.turn_server),e.stun_server&&n.push(e.stun_server);var l={iceTransportPolicy:"relay",iceServers:[{urls:n,username:e.turn_username,credential:e.turn_auth_key}]};if(this.logger.info("zp.ops.0 username: "+e.turn_username),this.logger.info("zp.ops.0 credential: "+e.turn_auth_key),this.peerConnection=new RTCPeerConnection(l),this.peerConnection.onicecandidate=function(e){t.onIceCandidate(e)},this.peerConnection.onsignalingstatechange=function(e){t.onConnectionStateChange(e)},this.peerConnection.oniceconnectionstatechange=function(e){t.onIceConnectionStateChange(e)},this.localStream){this.localStream.getTracks().forEach(function(e){t.peerConnection.addTrack(e,t.localStream)});var r=this.localStream.getVideoTracks(),o=this.localStream.getAudioTracks();r.length>0&&this.logger.info("zp.ops.0 video device: "+r[0].label),o.length>0&&this.logger.info("zp.ops.0 audio device: "+o[0].label)}var s={offerToReceiveAudio:[].length>0?1:0,offerToReceiveVideo:[].length>0?1:0};this.logger.info("zp.ops.0 createOffer: "+s),this.dataReport.eventStart(this.reportSeq,"CreateOffer"),this.peerConnection.createOffer(s).then(function(e){t.dataReport.eventEnd(t.reportSeq,"CreateOffer"),t.onCreateOfferSuccess(e)},function(e){t.dataReport.eventEndWithMsg(t.reportSeq,"CreateOffer",{error:e.toString()}),t.logger.error("zp.ops.0 create offer error "+e.toString()),t.publishStateUpdateError(i.publishErrorList.CREATE_OFFER_ERROR)}),this.signal.registerPushCallback("CandidateInfoPush",this.sessionId,function(e,n,l){t.onRecvCandidateInfo(e,n,l)}),this.signal.registerPushCallback("CloseSessionPush",this.sessionId,function(e,n,l){t.onRecvCloseSession(e,n,l)}),this.signal.registerPushCallback("MediaDescPush",this.sessionId,function(e,n,l){t.onRecvMediaDescription(e,n,l)}),this.signal.registerPushCallback("SessionResetPush",this.sessionId,function(e,n,l){t.onRecvResetSession(e,n,l)}),this.logger.debug("zp.ops.0 call success")},e.prototype.onCreateOfferSuccess=function(e){var t=this;0!=this.videoInfo.bitRate&&(e.sdp=this.updateBandwidthRestriction(e.sdp,this.videoInfo.bitRate)),this.logger.debug("zp.oco.0 localSdp ",e.sdp),this.dataReport.eventStart(this.reportSeq,"SetLocalDescription"),this.peerConnection.setLocalDescription(e).then(function(){t.dataReport.eventEnd(t.reportSeq,"SetLocalDescription"),t.onSetLocalDescriptionSuccess(e)},function(e){t.dataReport.eventEndWithMsg(t.reportSeq,"SetLocalDescription",{error:e.toString()}),t.logger.error("zp.oco.0 error "+e.toString()),t.publishStateUpdateError(i.publishErrorList.SET_LOCAL_DESC_ERROR)})},e.prototype.updateBandwidthRestriction=function(e,t){var n="AS";return"firefox"===r.browserDetails.browser&&(t=1e3*(t>>>0),n="TIAS"),e=-1===e.indexOf("b="+n+":")?e.replace(/c=IN (.*)\r\n/,"c=IN $1\r\nb="+n+":"+t+"\r\n"):e.replace(new RegExp("b="+n+":.*\r\n"),"b="+n+":"+t+"\r\n")},e.prototype.onSetLocalDescriptionSuccess=function(e){var t=this;this.logger.debug("zp.osd.0 success");var n={sdp:e.sdp,width:this.videoInfo.width,height:this.videoInfo.height,frameRate:this.videoInfo.frameRate,video_min_kpbs:this.videoInfo.bitRate,video_max_kpbs:this.videoInfo.bitRate,audio_kpbs:48};this.offerSeq=i.getSeq(),this.dataReport.eventStart(this.reportSeq,"SendMediaDesc"),this.signal.sendMediaDesc(this.offerSeq,this.sessionId,0,n,function(e,n,r){t.offerSeq==e&&t.sessionId==n?(t.logger.debug("zp.osd.0 send success"),t.dataReport.eventEnd(t.reportSeq,"SendMediaDesc"),t.waitingAnswerTimer=setTimeout(function(){t.state==l.ENUM_PUBLISH_STATE.waitingServerAnswer&&(t.logger.error("zp.osd.0 waiting timeout"),t.publishStateUpdateError(i.publishErrorList.SERVER_MEDIA_DESC_TIMEOUT))},t.waitingAnswerTimeInterval),t.state=l.ENUM_PUBLISH_STATE.waitingServerAnswer):t.logger.error("zp.osd.0 seq or sessionId is not equal")},function(e,n){t.dataReport.eventEndWithMsg(t.reportSeq,"SendMediaDesc",{error:e}),t.publishStateUpdateError(i.publishErrorList.SEND_MEDIA_DESC_TIMEOUT)}),this.state=l.ENUM_PUBLISH_STATE.waitingOffserRsp,this.logger.debug("zp.osd.0 call success")},e.prototype.stopPublish=function(){this.logger.debug("zp.sp.0.1 called"),this.sessionId&&!this.closeSessionSignal&&this.signal.sendCloseSession(i.getSeq(),this.sessionId,0),this.dataReport.eventEndWithMsg(this.reportSeq,"PublishState",{state:this.state+""}),this.dataReport.addEvent(this.reportSeq,"StopPublish"),this.dataReport.addMsgExt(this.reportSeq,{stream:this.streamId,sessionId:this.sessionId}),this.dataReport.uploadReport(this.reportSeq,"RTCPublishStream"),this.resetPublish()},e.prototype.onPublishStateUpdate=function(e,t,n){},e.prototype.onPublishQualityUpdate=function(e,t){},e.prototype.onDisconnect=function(){this.logger.info("zp.od.0 call"),this.logger.info("zp.od.0 websocket disconnect"),this.dataReport.addEvent(this.reportSeq,"OnDisconnect"),this.publishStateUpdateError(i.publishErrorList.WEBSOCKET_ERROR)},e.prototype.sendCandidateInfo=function(e){var t=this;this.logger.debug("zp.sci.0 called"),!(e=e.filter(function(e){return e.candidate.indexOf("relay")>0}))||e.length<1?this.logger.info("zp.sci.0 cancelled"):(this.dataReport.eventStart(this.reportSeq,"SendIceCandidate"),this.signal.sendCandidateInfo(i.getSeq(),this.sessionId,e,function(e,n,l){t.logger.debug("zp.sci.0 send success"),t.dataReport.eventEnd(t.reportSeq,"SendIceCandidate")},function(e,n){t.logger.error("zp.sci.0 failed to send: "+e.toString()),t.dataReport.eventEndWithMsg(t.reportSeq,"SendIceCandidate",{error:e}),t.publishStateUpdateError(i.publishErrorList.SEND_CANDIDATE_TIMEOUT)}))},e.prototype.onIceConnectionStateChange=function(e){this.state!=l.ENUM_PUBLISH_STATE.stop&&null!=this.peerConnection&&(this.logger.info("zp.oics.0 stateChanged "+this.peerConnection.iceConnectionState),"connected"===this.peerConnection.iceConnectionState?(this.logger.info("zp.oics.0 connected state "+this.state),this.dataReport.eventEnd(this.reportSeq,"IceConnected"),this.state!=l.ENUM_PUBLISH_STATE.publishing&&this.onPublishStateUpdate(i.ENUM_PUBLISH_STATE_UPDATE.start,this.streamId),this.state=l.ENUM_PUBLISH_STATE.publishing,this.retryState!=l.ENUM_RETRY_STATE.didNotStart&&(this.retryState=l.ENUM_RETRY_STATE.finished,this.currentRetryCount=0),this.dataReport.eventStart(this.reportSeq,"PublishState"),this.setPublishQualityTimer()):"closed"===this.peerConnection.iceConnectionState?(this.dataReport.addEvent(this.reportSeq,"IceClosed"),this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)):"failed"===this.peerConnection.iceConnectionState&&(this.dataReport.addEvent(this.reportSeq,"IceFailed"),this.checkPublishConnectionFailedState(this.peerConnection.iceConnectionState)))},e.prototype.onIceCandidate=function(e){if(e.candidate)if(this.logger.info("zp.oic.0 candidate"+e.candidate.candidate),this.state<l.ENUM_PUBLISH_STATE.waitingServerICE||this.state==l.ENUM_PUBLISH_STATE.stop)this.candidateInfo.push({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex});else{this.sendCandidateInfo([{candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex}])}},e.prototype.onConnectionStateChange=function(e){this.logger.info("zp.ocs.0 called "+e.target.signalingState)},e.prototype.onRecvMediaDescription=function(e,t,n){this.logger.debug("zp.ormd.0 received"),this.state==l.ENUM_PUBLISH_STATE.waitingServerAnswer?(null!=this.waitingAnswerTimer&&(clearTimeout(this.waitingAnswerTimer),this.waitingAnswerTimer=null),this.dataReport.addEvent(this.reportSeq,"RecvMediaDesc"),this.signal.sendMediaDescAck(e,this.sessionId,0),1==n.type?this.onGetRemoteOfferSucceses(n.sdp):this.publishStateUpdateError(i.publishErrorList.SERVER_MEDIA_DESC_ERROR)):this.logger.info("zp.ormd.0 current state "+this.state+" not allowed")},e.prototype.onGetRemoteOfferSucceses=function(e){var t=this;this.logger.debug("zp.oro.0 remoteSdp:",e);var n={type:"answer",sdp:e,toJSON:function(){}};this.dataReport.eventStart(this.reportSeq,"SetRemoteDescription"),this.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).then(function(){t.logger.debug("zp.oro.0 set success"),t.dataReport.eventEnd(t.reportSeq,"SetRemoteDescription")},function(e){t.logger.error("zp.oro.0 failed: "+e.toString()),t.dataReport.eventEndWithMsg(t.reportSeq,"SetRemoteDescription",{error:e.toString()}),t.publishStateUpdateError(i.publishErrorList.SET_REMOTE_DESC_ERROR)}),this.sendCandidateInfo(this.candidateInfo),this.candidateInfo=[],this.state=l.ENUM_PUBLISH_STATE.waitingServerICE,this.waitingICETimer=setTimeout(function(){t.state==l.ENUM_PUBLISH_STATE.waitingServerICE&&(t.logger.error("zp.orod.0 waiting server timeout"),t.publishStateUpdateError(i.publishErrorList.SERVER_CANDIDATE_TIMEOUT))},this.waitingICETimeInterval),this.logger.debug("zp.oro.0 call success")},e.prototype.onRecvCandidateInfo=function(e,t,n){var r=this;if(this.logger.debug("zp.oci.0 received "+n.infos.length),this.state==l.ENUM_PUBLISH_STATE.waitingServerICE){null!=this.waitingICETimer&&(clearTimeout(this.waitingICETimer),this.waitingICETimer=null),this.dataReport.addEvent(this.reportSeq,"RecvIceCandidate"),this.signal.sendCandidateInfoAck(e,this.sessionId,0);for(var o=0;o<n.infos.length;o++){var s={sdpMid:n.infos[o].sdpMid,sdpMLineIndex:n.infos[o].sdpMLineIndex,candidate:n.infos[o].candidate};this.logger.debug("zp.orci.0 candidate "+s.candidate),this.peerConnection.addIceCandidate(new RTCIceCandidate(s)).then(function(){r.logger.debug("zp.oci.0 add success")},function(e){r.logger.error("zp.oci.0 add error "+e.toString()),r.publishStateUpdateError(i.publishErrorList.SERVER_CANDIDATE_ERROR)})}this.state=l.ENUM_PUBLISH_STATE.connecting,this.dataReport.eventStart(this.reportSeq,"IceConnected")}else this.logger.info("zp.oci.0 current state "+this.state+" not allowed")},e.prototype.onRecvCloseSession=function(e,t,n){this.logger.info("zp.orcs.0 reason: "+n.reason),this.dataReport.addEvent(this.reportSeq,"RecvCloseSession"),this.signal.sendCloseSessionAck(e,this.sessionId,0);var l=JSON.parse(JSON.stringify(i.publishErrorList.SESSION_CLOSED));l.msg+=n.reason,this.publishStateUpdateError(l)},e.prototype.onRecvResetSession=function(e,t,n){this.logger.info("zp.orrs.0 received "),t==this.sessionId?(this.dataReport.addEvent(this.reportSeq,"RecvResetSession"),this.shouldRetryPublish()&&this.startRetryPublish()):this.logger.error("zp.orrs.0 cannot find session")},e.prototype.shouldRetryPublish=function(){return this.retryState==l.ENUM_RETRY_STATE.didNotStart&&this.state!=l.ENUM_PUBLISH_STATE.publishing?(this.logger.info("zp.srp.0.0 connection didn't success"),!1):this.retryState==l.ENUM_RETRY_STATE.retrying?(this.logger.info("zp.srp.0.0 already retrying"),!1):this.currentRetryCount>this.maxRetryCount?(this.logger.info("zp.srp.0.0 beyond max"),!1):(this.logger.debug("zp.srp.1.0 call success"),!0)},e.prototype.startRetryPublish=function(){this.logger.debug("zp.srp.0 call");var e=this.streamId;e?(this.resetPublish(),this.tryStartPublish(e)):this.logger.info("zp.srp.0 no streamid")},e.prototype.tryStartPublish=function(e){var t=this;if(this.logger.debug("zp.tsp.0 call"),this.clearTryPublishTimer(),this.streamId=e,this.currentRetryCount>this.maxRetryCount)return this.logger.info("zp.tsp.0 beyond max limit"),void this.publishStateUpdateError(i.publishErrorList.WEBSOCKET_ERROR);this.retryState=l.ENUM_RETRY_STATE.retrying,this.currentRetryCount+=1,this.signal.isServerConnected()?(this.logger.debug("zp.tsp.0 signal connected"),this.startPublish(e,this.localStream,this.videoInfo)):(this.logger.debug("zp.tsp.0 signal server not connected"),this.waitingAnswerTimer=setTimeout(function(){t.tryStartPublish(e)},this.waitingAnswerTimeInterval))},e.prototype.checkPublishConnectionFailedState=function(e){var t=null;"failed"==e?t=i.publishErrorList.MEDIA_CONNECTION_FAILED:"closed"==e&&(t=i.publishErrorList.MEDIA_CONNECTION_CLOSED),null!=t&&(this.state!=l.ENUM_PUBLISH_STATE.publishing&&this.retryState==l.ENUM_PUBLISH_STATE.didNotStart?(this.logger.info("zp.oics.0  state "+this.state+" retryState "+this.retryState+" connectionState "+e),this.publishStateUpdateError(t)):this.shouldRetryPublish()?(this.onPublishStateUpdate(i.ENUM_PUBLISH_STATE_UPDATE.retry,this.streamId),this.startRetryPublish()):this.publishStateUpdateError(t))},e.prototype.setPublishQualityTimer=function(){var e=this;null==this.qualityTimer&&(this.logger.debug("zp.spq.0 called"),this.clearPublishQualityTimer(),this.qualityTimer=setInterval(function(){e.peerConnection&&e.peerConnection.getStats(null).then(function(t){e.getPublishStats(t)},function(t){e.logger.info("zp.spq.0 getStats error "+t.toString())})},this.qualityTimeInterval),this.lastPublishStats={time:0,audioBytesSent:0,videoBytesSent:0,framesEncoded:0,framesSent:0},this.qualitySeq=i.getSeq(),this.qualityCount=0,this.dataReport.newReport(this.qualitySeq))},e.prototype.getPublishStats=function(e){var t=this;if(e){var n={audioBitrate:0,videoBitrate:0,videoFPS:0,nackCount:0,pliCount:0,sliCount:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,totalRoundTripTime:0,currentRoundTripTime:0},l=this.lastPublishStats.time;e.forEach(function(e){("outbound-rtp"==e.type||"ssrc"==e.type&&void 0!=e.bytesSent)&&"audio"==e.mediaType?(0!=l&&(n.audioBitrate=8*(e.bytesSent-t.lastPublishStats.audioBytesSent)/(e.timestamp-l)),n.audioBitrate<0&&(n.audioBitrate=0),t.lastPublishStats.audioBytesSent=e.bytesSent,t.lastPublishStats.time=e.timestamp):("outbound-rtp"==e.type||"ssrc"==e.type&&void 0!=e.bytesSent)&&"video"==e.mediaType?(0!=l&&(n.videoBitrate=8*(e.bytesSent-t.lastPublishStats.videoBytesSent)/(e.timestamp-l),n.videoFPS=1e3*(e.framesEncoded-t.lastPublishStats.framesEncoded)/(e.timestamp-l)),n.videoBitrate<0&&(n.videoBitrate=0),n.videoFPS<0&&(n.videoFPS=0),n.nackCount=e.nackCount,n.pliCount=e.pliCount,n.sliCount=e.sliCount,t.lastPublishStats.videoBytesSent=e.bytesSent,t.lastPublishStats.framesEncoded=e.framesEncoded,t.lastPublishStats.time=e.timestamp):"track"==e.type&&("video"==e.kind||e.id.indexOf("video")>=0)?(n.frameHeight=e.frameHeight,n.frameWidth=e.frameWidth,0!=l&&(n.videoTransferFPS=1e3*(e.framesSent-t.lastPublishStats.framesSent)/(e.timestamp-l)),n.videoTransferFPS<0&&(n.videoTransferFPS=0),t.lastPublishStats.framesSent=e.framesSent):"candidate-pair"==e.type&&(void 0!=e.totalRoundTripTime&&(n.totalRoundTripTime=e.totalRoundTripTime),void 0!=e.currentRoundTripTime&&(n.currentRoundTripTime=e.currentRoundTripTime))}),this.uploadPublishQuality(n),0!=l&&this.onPublishQualityUpdate(this.streamId,n)}},e.prototype.uploadPublishQuality=function(e){var t=this;if(this.qualityUpload){var n=Date.parse(new Date+"");(0==this.qualityUploadLastTime||n-this.qualityUploadLastTime>=this.qualityUploadInterval)&&(this.logger.debug("zp.upq.0 upload"),e.stream_type="publish",e.stream_id=this.streamId,e.timeStamp=n/1e3,this.signal.QualityReport(i.getSeq(),this.sessionId,e,function(e,n,l){void 0!==l.report&&(t.qualityUpload=l.report,t.qualityUploadInterval=l.report_interval_ms)},function(e,n){t.logger.info("zp.upq.0 upload failed "+e)}),this.qualityUploadLastTime=n)}},e}();t.ZegoPublish=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),i=function(){function e(e){var t=this;this.log=e,this.localVideo=null,this.localStream=null,this.videoInfo={},this.previewSuc=!1,this.enableMicrophone=function(e){return t.localStream?(t.localStream.getAudioTracks().forEach(function(t){t.enabled=e}),t.logger.debug("zp.em.2 call success"),!0):(t.logger.error("zp.em.2 no localStream"),!1)},this.enableCamera=function(e){return t.localStream?(t.localStream.getVideoTracks().forEach(function(t){t.enabled=e}),t.logger.debug("zp.ec.2 call success"),!0):(t.logger.error("zp.ec.2 no localStream"),!1)},this.setAudioDestination=function(e){return t.localVideo?"undefined"!==t.localVideo.sinkId?(t.localVideo.setSinkId(e).then(function(){t.logger.info("zp.sad.2 success device: "+e)}).catch(function(e){t.logger.info("zp.sad.2 "+e.name)}),!0):(t.logger.error("zp.sad.2 browser does not suppport"),!1):(t.logger.error("zp.sad.2 no localVideo"),!1)},this.logger=e}return e.prototype.getMediaStreamConstraints=function(e){var t={audio:null,video:null};if(t.audio=!1,t.video=!1,e.audio&&(t.audio=!e.audioInput||{deviceId:{exact:e.audioInput}}),e.video){var n=640,i=480,r=15,o=800;if(1===e.videoQuality?(n=l.ENUM_RESOLUTION_TYPE.LOW.width,i=l.ENUM_RESOLUTION_TYPE.LOW.height,r=l.ENUM_RESOLUTION_TYPE.LOW.frameRate,o=l.ENUM_RESOLUTION_TYPE.LOW.bitRate):2===e.videoQuality?(n=l.ENUM_RESOLUTION_TYPE.MEDIUM.width,i=l.ENUM_RESOLUTION_TYPE.MEDIUM.height,r=l.ENUM_RESOLUTION_TYPE.MEDIUM.frameRate,o=l.ENUM_RESOLUTION_TYPE.MEDIUM.bitRate):3===e.videoQuality?(n=l.ENUM_RESOLUTION_TYPE.HIGH.width,i=l.ENUM_RESOLUTION_TYPE.HIGH.height,r=l.ENUM_RESOLUTION_TYPE.HIGH.frameRate,o=l.ENUM_RESOLUTION_TYPE.HIGH.bitRate):4===e.videoQuality?(n=e.width,i=e.height,r=e.frameRate,o=e.bitRate||800):this.logger.info("zp.gmsc.2 user default"),!0===e.horizontal){var s=i;i=n,n=s}t.video={width:n,height:i,frameRate:r,bitRate:o},void 0!=e.facingMode?t.video.facingMode=e.facingMode:void 0!=e.videoInput&&(t.video.deviceId={exact:e.videoInput}),this.logger.info("zp.gmsc.2 width: "+n+" height: "+i+" rate: "+r)}return t},e.prototype.startPreview=function(e,t,n,l){var i=this;if(this.logger.debug("zp.sv.2 called"),this.localVideo=e,void 0!==navigator.mediaDevices&&void 0!=navigator.mediaDevices.getUserMedia){if(t.externalMediaStream instanceof MediaStream)return this.logger.debug("zp.sv.2 use external media stream"),this.localStream=t.externalMediaStream,this.videoInfo={width:t.width,height:t.height,frameRate:t.frameRate,bitRate:t.bitRate},void(n&&n());if(t.externalCapture)this.captureStream(e)?n&&n():l&&l("browser don't support");else{var r=this.getMediaStreamConstraints(t);this.videoInfo=r.video,this.logger.info("zp.sv.2 ",JSON.stringify(r)),navigator.mediaDevices.getUserMedia(r).then(function(e){if(i.logger.info("zp.sv.2 success"),!i.localVideo)return i.logger.info("zp.sv.2 no localVideo"),void(l&&l("no localVideo"));i.localVideo.srcObject=e,i.localStream=e,i.previewSuc=!0,n&&n()},function(e){i.logger.info("zp.sv.2 failed"),l&&l(e.name)})}}else l&&l("browser don't support")},e.prototype.captureStream=function(e){if(!e)return this.logger.info("zp.cs.2 no local video"),!1;if(e.captureStream)this.localStream=e.captureStream(),this.logger.debug("zp.cs.2 captureStream");else{if(!e.mozCaptureStream)return this.logger.info("zp.cs.2 don't support"),!1;this.localStream=e.mozCaptureStream(),this.logger.debug("zp.cs.2 mozCaptureStream")}return this.videoInfo={width:e.videoWidth,height:e.videoHeight,frameRate:0,bitRate:0},this.logger.debug("zp.cs.2 called success"),!0},e.prototype.stopPreview=function(){this.logger.info("zp.sv.2.1 called"),this.localStream&&(this.localStream.getTracks().forEach(function(e){e.stop()}),this.localStream=null,this.localVideo.srcObject=null,this.localVideo=null,this.videoInfo={})},e}();t.ZegoPreview=i},function(e,t,n){"use strict";var l=this&&this.__assign||Object.assign||function(e){for(var t,n=1,l=arguments.length;n<l;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.log=e,this.dataStatistics={},this.logger=e}return e.prototype.newReport=function(e){this.dataStatistics[e]={abs_time:Date.now(),time_consumed:0,error:0,events:[]}},e.prototype.addMsgExt=function(e,t){this.dataStatistics[e]?this.dataStatistics[e].msg_ext=t:console.warn(e+" not exist")},e.prototype.eventStart=function(e,t){this.dataStatistics[e]?void 0!=this.dataStatistics[e].events?this.dataStatistics[e].events.push({event:t,abs_time:Date.now(),time_consumed:0}):this.logger.warn("zd.es.0 no events"):this.logger.warn("zd.es.0 no seq match")},e.prototype.eventEnd=function(e,t,n){if(this.dataStatistics[e]){var l=this.dataStatistics[e].events;if(l&&0!==l.length){for(var i=l.length-1;i>=0;i--)if(l[i].event==t&&l[i].time_consumed){l[i].time_consumed=Date.now()-l[i].abs_time;break}}else this.logger.info("zd.ee.0 no events")}else this.logger.info("zd.ee.0 no seq match")},e.prototype.eventEndWithMsg=function(e,t,n){if(this.dataStatistics[e]){var i=this.dataStatistics[e].events;if(i){for(var r=i.length-1;r>=0;r--)if(i[r].event==t&&i[r].time_consumed){i[r].time_consumed=Date.now()-i[r].abs_time,void 0==i[r].msg_ext&&(i[r].msg_ext={}),i[r].msg_ext=l({},n);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},e.prototype.addEventInfo=function(e,t,n,l){if(this.dataStatistics[e]){var i=this.dataStatistics[e].events;if(void 0!=i){for(var r=i.length-1;r>=0;r--)if(i[r].event==t&&void 0!=i[r].time_consumed&&i[r].event==t&&void 0!=i[r].time_consumed){void 0==i[r].msg_ext&&(i[r].msg_ext={}),i[r].msg_ext[n]=l;break}}else this.logger.warn("zd.aei.0 no events")}else this.logger.warn("zd.aei.0 no seq match")},e.prototype.addEvent=function(e,t,n){this.dataStatistics[e]?this.dataStatistics[e].events&&this.dataStatistics[e].events.push(n?{event:t,abs_time:Date.now(),msg_ext:n}:{event:t,abs_time:Date.now()}):this.logger.warn("zd.ae.0 no seq match")},e.prototype.uploadReport=function(e,t){var n=this.dataStatistics[e];void 0!=n&&(n.itemtype=t,n.time_consumed=Date.now()-n.abs_time,this.logger.report(n),delete this.dataStatistics[e])},e}();t.ZegoDataReport=i},function(e,t,n){"use strict";var l,i=this&&this.__extends||(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),o=n(18),s=n(17),a=n(2),u=n(0),c=n(14),d=n(13),h=function(e){function t(t){var n=e.call(this,t)||this;return n.playerList={},n.publisherList={},n.testEnvironment=!1,n.heartbeatTimer=null,n.heartbeatInterval=1e4,n.qualityTimerInterval=3e3,n.maxRetryCount=5,n.previewVideoList=[],n.signalList={},n.checkMessageTimeout=function(){for(var e in n.signalList)n.signalList[e].signal&&n.signalList[e].signal.checkMessageTimeout()},n.getAllInUseUrl=function(){var e=[];for(var t in n.signalList)e.push(t);return e},n.onDisconnectHandle=function(e){if(n.logger.info("zsc.od.0 call"),n.signalList[e]){for(var t=n.signalList[e],l=0;l<t.publishConnectedList.length;l++){var i=n.publisherList[t.publishConnectedList[l]];i&&i.publisher&&i.publisher.onDisconnect()}for(l=0;l<t.playConnectedList.length;l++){var r=n.playerList[t.playConnectedList[l]];r&&r.player&&r.player.onDisconnect()}delete n.signalList[e],n.stopSignalHeartbeat()}},n.logger=t,n.dataReport=new r.ZegoDataReport(n.logger),n}return i(t,e),t.prototype.onSignalDisconnected=function(e){},t.prototype.setQualityMonitorCycle=function(e){this.logger.debug("zsc.qmc.0 timeInterval "+e),this.qualityTimerInterval=e},t.prototype.setSessionInfo=function(e,t,n,l){this.logger.debug("zsc.ssi.0 called"),this.appid=e,this.userid=t,this.token=n,this.testEnvironment=l},t.prototype.onPlayStateUpdate=function(e,t,n){},t.prototype.onPlayQualityUpdate=function(e,t){},t.prototype.onPublishStateUpdate=function(e,t,n){},t.prototype.onPublishQualityUpdate=function(e,t){},t.prototype.onUpdateHeartBeartIntervalHandle=function(e){e!=this.heartbeatInterval&&(this.logger.debug("zsc.uhb.0 update "+e),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null),this.heartbeatInterval=e,this.startSignalHeartbeat())},t.prototype.enableMicrophone=function(e,t){var n=this.checkPreivew(e);return n?n.enableMicrophone(t):(this.logger.info("zsc.em.0 no preview"),!1)},t.prototype.enableCamera=function(e,t){var n=this.checkPreivew(e);return n?n.enableCamera(t):(this.logger.error("zsc.ec.0 no preview"),!1)},t.prototype.startPreview=function(e,t,n,l){if(!e)return this.logger.error("zsc.sp.0 localVideo null"),!1;var i=this.checkPreivew(e);return i?(this.logger.warn("zsc.sp.0 localvideo alredy exist"),!0):(i=new o.ZegoPreview(this.logger),this.previewVideoList.push(i),i.startPreview(e,t,n,l),this.logger.debug("zsc.sp.0 call success"),!0)},t.prototype.stopPreview=function(e){if(!e)return this.logger.warn("zsc.sp.0 localVideo null"),!1;for(var t in this.publisherList)this.publisherList[t].localVideo===e&&(this.publisherList[t].localVideo=null);var n=this.checkPreivew(e);return n?(n.previewSuc&&(n.stopPreview(),this.removePreview(n)),!0):(this.logger.warn("zsc.sp.0 no preview"),!1)},t.prototype.setPublishStateStart=function(e,t,n){var l=this,i=this.getTotalStreamId(e);if(this.publisherList[i])return this.logger.error("zsc.pss.0 publisher already exist"),!1;var r=new s.ZegoPublish(this.logger,null,this.dataReport,this.qualityTimerInterval);return r.onPublishStateUpdate=function(t,n,i){var r=l.publisherList[n];r?l.onPublishStateUpdate(t,r.streamId,i):l.logger.error("zsc.psuh.0 cannot find publish "+e)},r.onPublishQualityUpdate=function(t,n){var i=l.publisherList[t];i?l.onPublishQualityUpdate(i.streamId,n):l.logger.error("zsc.psuh.0 cannot find publish "+e)},this.publisherList[i]={localVideo:t,publisher:r,serverUrls:[],retryCount:0,streamId:e,playOption:n},this.dataReport.eventStart(r.reportSeq,"GetSignalUrl"),!0},t.prototype.getTotalStreamId=function(e){if(this.testEnvironment){var t="zegotest-"+this.appid+"-"+e;return this.logger.info("zsc.gts.0 test streamid "+t),t}return e},t.prototype.startPublishingStream=function(e,t,n){this.logger.debug("zsc.sps.0 call");var l=this.getTotalStreamId(e),i=this.publisherList[l];if(!i)return this.logger.error("zsc.sps.0 publisher don't exist"),!1;if(this.dataReport.eventEndWithMsg(i.publisher.reportSeq,"GetSignalUrl",{urls:t}),!t||0===t.length)return this.onPublishStateUpdate(a.ENUM_PUBLISH_STATE_UPDATE.error,e,a.publishErrorList.DISPATCH_ERROR),this.logger.info("zsc.sps.0 server don't have signal url"),!1;var r=t[0];return i.serverUrls=i.serverUrls.concat(t),this.connectPublishServer(l,r)},t.prototype.updateWaitingList=function(e,t,n,l,i){t?e.publishWaitingList.push({streamId:n,success:l,error:i}):e.playWaitingList.push({streamId:n,success:l,error:i})},t.prototype.publishStream=function(e){var t=this.publisherList[e].publisher;if(t){var n=null,l=null,i=this.publisherList[e].playOption,r=this.checkPreivew(this.publisherList[e].localVideo);r&&(n=r.localStream,l=r.videoInfo),n||this.logger.info("zsc.ps.0 no localStream"),this.logger.debug("zsc.ps.0 call success"),t.startPublish(e,n,l,i)}else this.logger.info("zsc.ps.0 publisher don't exist")},t.prototype.connectPublishServer=function(e,t){var n=this,l=this.publisherList[e];return l?(this.dataReport.eventStart(l.publisher.reportSeq,"ConnectServer"),this.connetWithReuseSignalServer(e,!0,t,function(e,l){var i=n.publisherList[e];if(i){var r=i.publisher;if(r){n.dataReport.eventEndWithMsg(r.reportSeq,"ConnectServer",{result:0,server:t});var o=l.tokenInfo;n.logger.info("zsc.cps.0 update token success"),o&&o.report&&(r.qualityUpload=o.report,r.qualityUploadInterval=o.report_interval),r.signal=l.signal,i.retryCount=0,n.publishStream(e),n.getTokenSuccess()}else n.logger.info("zsc.cps.1 check publisher don't exist")}else n.logger.info("zsc.cps.0 after connect publisher don't exist")},function(e,t){n.logger.error("zsc.cps.0 update token failed "+t);var l=n.publisherList[e];if(l)if(n.shouldRetry(l,t)){n.logger.info("zsc.cps.1 retry connect");var i=l.serverUrls[0];l.serverUrls.splice(0,1),l.retryCount+=1,n.connectPublishServer(e,i)}else n.onPublishStateUpdate(a.ENUM_PUBLISH_STATE_UPDATE.error,e,a.publishErrorList.TOKEN_ERROR);else n.logger.info("zsc.cps.0 after connect publisher don't exist")}),!0):(this.logger.error("zsc.cps.0 publisher don't exist"),!1)},t.prototype.shouldRetry=function(e,t){return 0!=e.serverUrls.length&&!(e.retryCount>=this.maxRetryCount)&&3==t},t.prototype.getTokenSuccess=function(){this.logger.debug("zsc.gts.0 call")},t.prototype.stopPublishingStream=function(e){var t=this.getTotalStreamId(e),n=this.publisherList[t];n?(n.publisher&&(n.publisher.stopPublish(),delete n.publisher),this.removeStreamFromSignal(!0,t),this.stopSignalHeartbeat(),delete this.publisherList[t],this.logger.debug("zsc.sps.0.1 call success")):this.logger.warn("zsc.sps.0.1 publisher don't exist")},t.prototype.setPlayStreamAudioOutput=function(e,t){var n=this.getTotalStreamId(e);if(void 0!=t&&0!=t.length){this.logger.debug("zsc.psao.1 device "+t);var l=this.playerList[n];return l?l.player?l.player.setAudioDestination(t):(this.logger.info("zsc.psao.1 player don't exist"),!1):(this.logger.info("zsc.psao.1 play don't exist"),!1)}return!1},t.prototype.setPublishStreamAudioOutput=function(e,t){if(void 0!=t&&0!=t.length&&e){this.logger.debug("zsc.psao.0 device "+t);var n=this.checkPreivew(e);n?n.setAudioDestination(t):this.logger.info("zsc.psao.0 no preview")}return!1},t.prototype.connetWithReuseSignalServer=function(e,t,n,l,i){var r=this;this.logger.debug("zsc.crss.0 begin "+n);var o=null;if(this.signalList[n])(o=this.signalList[n]).state==u.ENUM_SIGNAL_STATE.connected?(this.logger.debug("zsc.crss.0 already connected "+n+" streamId: "+e),t?o.publishConnectedList.push(e):o.playConnectedList.push(e),l(e,o)):o.state==u.ENUM_SIGNAL_STATE.connecting&&(this.logger.debug("zsc.crss.0 signal is connecting "+n+" streamId: "+e),this.updateWaitingList(o,t,e,l,i));else{this.logger.debug("zsc.crss.0 new signal "+n+" streamId: "+e);var s=new c.ZegoSignal(this.logger);s.setSessionInfo(this.appid,this.userid),s.onUpdateHeartBeartInterval=this.onUpdateHeartBeartIntervalHandle,s.onDisconnect=this.onDisconnectHandle,this.signalList[n]={signal:s,state:u.ENUM_SIGNAL_STATE.connecting,publishWaitingList:[],playWaitingList:[],publishConnectedList:[],playConnectedList:[],tokenInfo:null},this.updateWaitingList(this.signalList[n],t,e,l,i),s.connectServer(this.token,n,function(e,t,l){o=r.signalList[n];var i,s,a=0;if(0!=e){for(r.logger.debug("zsc.crss.0 connect failed "+t),a=0;a<o.publishWaitingList.length;a++)(i=o.publishWaitingList[a]).error&&i.error(i.streamId,e);for(a=0;a<o.playWaitingList.length;a++)(s=o.playWaitingList[a]).error&&s.error(s.streamId,e);delete r.signalList[n]}else{for(r.logger.debug("zsc.crss.0 connected success "+t),o.state=u.ENUM_SIGNAL_STATE.connected,o.tokenInfo=l,a=0;a<o.publishWaitingList.length;a++)(i=o.publishWaitingList[a]).success&&i.success(i.streamId,o),o.publishConnectedList.push(i.streamId);for(a=0;a<o.playWaitingList.length;a++)(s=o.playWaitingList[a]).success&&s.success(s.streamId,o),o.playConnectedList.push(s.streamId);o.publishWaitingList=[],o.playWaitingList=[],null==r.heartbeatTimer&&r.startSignalHeartbeat()}})}},t.prototype.setPlayStateStart=function(e,t,n,l){var i=this.getTotalStreamId(e);if(this.playerList[i])return this.logger.warn("zsc.pss.1 player already exist"),!1;var r=new d.ZegoPlayWeb(this.logger,null,this.dataReport,this.qualityTimerInterval);return r.onPlayStateUpdate=this.onPlayStateUpdate,r.onPlayQualityUpdate=this.onPlayQualityUpdate,r.onVideoSizeChanged=this.onVideoSizeChanged,this.playerList[i]={player:r,remoteVideo:t,audioOutput:n,signal:null,serverUrls:[],retryCount:0,playOption:l},this.dataReport.eventStart(r.reportSeq,"GetSignalUrl"),!0},t.prototype.startPlayingStream=function(e,t,n){this.logger.debug("zsc.sps.1 start play called");var l=this.getTotalStreamId(e),i=this.playerList[l];if(!i)return this.logger.error("zsc.sps.1 player don't exist"),!1;return this.dataReport.eventEndWithMsg(i.player.reportSeq,"GetSignalUrl",{urls:t}),0==t.length?(this.onPlayStateUpdate(a.ENUM_PLAY_STATE_UPDATE.error,e,a.playErrorList.DISPATCH_ERROR),this.logger.info("zsc.sps.1 server don't have signal url"),!1):(i.serverUrls=i.serverUrls.concat(t),this.connectPlayServer(l,t[0]))},t.prototype.connectPlayServer=function(e,t){var n=this,l=this.playerList[e];return l?(this.dataReport.eventStart(l.player.reportSeq,"ConnectServer"),this.connetWithReuseSignalServer(e,!1,t,function(e,l){var i=n.playerList[e];if(i){var r=i.player;if(r){n.dataReport.eventEndWithMsg(r.reportSeq,"ConnectServer",{result:0,server:t});var o=l.tokenInfo;n.logger.info("zsc.cps.1 update token success"),o&&o.report&&(r.qualityUpload=o.report,r.qualityUploadInterval=o.report_interval),r.signal=l.signal,i.retryCount=0,n.playStream(e),n.getTokenSuccess()}else n.logger.error("zsc.cps.1 checkplayer don't exist")}else n.logger.error("zsc.cps.1 after connect player don't exist")},function(e,t){var l=n.playerList[e];if(l)if(n.shouldRetry(l,t)){n.logger.info("zsc.cps.1 retry connect");var i=l.serverUrls[0];l.serverUrls.splice(0,1),l.retryCount+=1,n.connectPlayServer(e,i)}else n.onPlayStateUpdate(a.ENUM_PLAY_STATE_UPDATE.error,e,a.playErrorList.TOKEN_ERROR);else n.logger.error("zsc.cps.1 after connect player don't exist")}),!0):(this.logger.error("zsc.cps.1 player don't exist"),!1)},t.prototype.playStream=function(e){var t=this.playerList[e].player;t?(this.logger.debug("zsc.ps.1 call success"),t.startPlay(e,this.playerList[e].remoteVideo,this.playerList[e].audioOutput,this.playerList[e].playOption)):this.logger.warn("zsc.ps.1 player don't exist")},t.prototype.removeStreamFromSignal=function(e,t){var n=[];for(var l in this.signalList){var i=this.signalList[l];if(e){for(var r=0;r<i.publishConnectedList.length;r++)if(i.publishConnectedList[r]===t){this.logger.debug("zsc.rsfs.0 found from publish"),i.publishConnectedList.splice(r,1);break}}else for(var o=0;o<i.playConnectedList.length;o++)if(i.playConnectedList[o]===t){this.logger.debug("zsc.rsfs.0 found from play"),i.playConnectedList.splice(o,1);break}0==i.publishConnectedList.length&&0==i.playConnectedList.length&&(i.signal.disconnectServer(),n.push(l))}for(var s=0;s<n.length;s++)delete this.signalList[n[s]]},t.prototype.stopSignalHeartbeat=function(){this.logger.debug("zsc.ssh.1 call");var e=0;for(var t in this.signalList)e+=1;this.heartbeatTimer&&0==e&&(this.logger.info("zsc.ssh.1 stop"),clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)},t.prototype.stopPlayingStream=function(e){var t=this.getTotalStreamId(e),n=this.playerList[t];n?(n.player&&(n.player.stopPlay(),delete n.player),this.removeStreamFromSignal(!1,t),this.stopSignalHeartbeat(),delete this.playerList[t],this.logger.debug("zsc.sps.1.1 call success")):this.logger.info("zsc.sps.1.1 player don't exist")},t.prototype.reset=function(){for(var e in this.publisherList)this.publisherList[e].publisher&&this.publisherList[e].publisher.stopPublish();for(var t in this.playerList)this.playerList[t].player&&this.playerList[t].player.stopPlay();for(var n in this.signalList)this.signalList[n].signal&&this.signalList[n].signal.disconnectServer();this.playerList={},this.publisherList={},this.signalList={},this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)},t.prototype.startSignalHeartbeat=function(){var e=this;this.logger.debug("zsc.ssh.0 call"),this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null),this.heartbeatTimer=setTimeout(function(){e.checkSignalHeartbeat()},this.heartbeatInterval)},t.prototype.checkSignalHeartbeat=function(){for(var e in this.logger.debug("zsc.csh.0 call"),this.signalList)this.signalList[e].signal&&this.signalList[e].signal.sendHeartbeat();this.heartbeatTimer&&this.startSignalHeartbeat()},t.prototype.checkPreivew=function(e){for(var t=0;t<this.previewVideoList.length;t++)if(this.previewVideoList[t].localVideo===e)return this.previewVideoList[t];return null},t.prototype.removePreview=function(e){for(var t=0;t<this.previewVideoList.length;t++)if(this.previewVideoList[t]===e){this.previewVideoList.splice(t,1);break}},t.prototype.onPlayerStreamUrlUpdate=function(e,t,n){},t.prototype.onVideoSizeChanged=function(e,t,n){},t}(n(12).ZegoStreamCenter);t.ZegoStreamCenterWeb=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(0);t.D=["00","01","02","03","04","05","06","07","08","09"];var i=function(){function e(){this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCache=[],this.logCacheSend=[],this.logCacheMax=100}return e.prototype.setLogLevel=function(e){this.logLevel=this.logLevel<l.ENUM_LOG_LEVEL.debug||this.logLevel>l.ENUM_LOG_LEVEL.report?l.ENUM_LOG_LEVEL.disable:e},e.prototype.setRemoteLogLevel=function(e){this.logRemoteLevel=this.logRemoteLevel<l.ENUM_LOG_LEVEL.debug||this.logRemoteLevel>l.ENUM_LOG_LEVEL.report?l.ENUM_LOG_LEVEL.disable:e},e.prototype.setSessionInfo=function(e,t,n,l,i,r){this.appid=e,this.roomid=t,this.sessionid=n,this.userid=l,this.userName=i,this.version=r},e.prototype.openLogServer=function(e){e.startsWith("wss:")?(this.logType=l.ENUM_REMOTE_TYPE.websocket,this.openWebSocketLogServer(e)):e.startsWith("https:")?(this.logType=l.ENUM_REMOTE_TYPE.https,this.openHttpsLogServer(e)):this.logType=l.ENUM_REMOTE_TYPE.disable},e.prototype.stopLogServer=function(){this.logType==l.ENUM_REMOTE_TYPE.websocket?this.stopWebSocketServer():this.logType==l.ENUM_REMOTE_TYPE.https&&(this.SendHttpsLog(),this.stopHttpsServer()),this.logType=l.ENUM_REMOTE_TYPE.disable},e.prototype.stopWebSocketServer=function(){this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null)},e.prototype.openHttpsLogServer=function(e){var t=this;this.url=e,e&&(this.stopHttpsServer(),this.logUploadTimer||(this.logUploadTimer=setInterval(function(){t.SendHttpsLog()},this.logUploadInterval)))},e.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},e.prototype.report=function(e){var t=this.logReportParamList(l.ENUM_LOG_LEVEL.report,e);this.logLevel!==l.ENUM_LOG_LEVEL.disable&&this.logLevel<=l.ENUM_LOG_LEVEL.report&&console.debug.apply(console,t),this.RemoteLog(l.ENUM_LOG_LEVEL.report,t,!0)},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(l.ENUM_LOG_LEVEL.debug,e.join(""));this.logLevel!==l.ENUM_LOG_LEVEL.disable&&this.logLevel<=l.ENUM_LOG_LEVEL.debug&&console.debug.apply(console,n),this.log(l.ENUM_LOG_LEVEL.debug,n)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(l.ENUM_LOG_LEVEL.info,e.join(""));this.logLevel!==l.ENUM_LOG_LEVEL.disable&&this.logLevel<=l.ENUM_LOG_LEVEL.info&&console.info.apply(console,n),this.log(l.ENUM_LOG_LEVEL.info,n)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(l.ENUM_LOG_LEVEL.warn,e.join(""));this.logLevel!==l.ENUM_LOG_LEVEL.disable&&this.logLevel<=l.ENUM_LOG_LEVEL.warn&&console.warn.apply(console,n),this.log(l.ENUM_LOG_LEVEL.warn,n)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(l.ENUM_LOG_LEVEL.error,e.join(""));this.logLevel!==l.ENUM_LOG_LEVEL.disable&&this.logLevel<=l.ENUM_LOG_LEVEL.error&&console.error.apply(console,n),this.log(l.ENUM_LOG_LEVEL.error,n)},e.prototype.log=function(e,t){if(this.logLevel!==l.ENUM_LOG_LEVEL.disable&&this.logLevel<=e)for(this.logCache.push(t);this.logCache.length>this.logCacheMax;)this.logCache.shift();this.logRemoteLevel!==l.ENUM_LOG_LEVEL.disable&&this.logRemoteLevel<=e&&this.RemoteLog(e,t)},e.prototype.RemoteLog=function(e,t,n){void 0===n&&(n=!1),""!=this.url&&(this.logType==l.ENUM_REMOTE_TYPE.websocket?this.RemoteWebSocketLog(e,t):this.logType==l.ENUM_REMOTE_TYPE.https&&this.RemoteHttpsLog(e,t,n))},e.prototype.RemoteWebSocketLog=function(e,t){if(null==this.websocket||2==this.websocket.readyState||3==this.websocket.readyState){var n=this.url;this.url="",this.openLogServer(n),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)}else if(0==this.websocket.readyState)this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t);else if(1==this.websocket.readyState){if(this.logCacheSend.length>0){for(var l="",i=0;i<this.logCacheSend.length;i++)l=l+this.logCacheSend[i]+"\n";t=l+t,this.logCacheSend=[]}this.websocket.send(t)}else console.warn("wrong socket state:"+this.websocket.readyState),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)},e.prototype.RemoteHttpsLog=function(e,t,n){this.logCacheSend.push(t),(this.logCacheSend.length>=this.logCacheMax||!0===n)&&this.SendHttpsLog()},e.prototype.logParamList=function(e,n){var l=new Date,i=l.getFullYear()+"/";i+=(t.D[l.getMonth()+1]||l.getMonth()+1)+"/",i+=(t.D[l.getDate()]||l.getDate())+" ",i+=(t.D[l.getHours()]||l.getHours())+":",i+=(t.D[l.getMinutes()]||l.getMinutes())+":",i+=t.D[l.getSeconds()]||l.getSeconds(),i+="."+l.getTime()%1e3;var r=n.substr(0,n.indexOf(" "));0==r.length&&(r=n);var o=n.substr(n.indexOf(" ")+1);0==o.length&&(o="");var s={time:i,level:e,action:r,content:o,appid:this.appid,roomid:this.roomid,userid:this.userid,userName:this.userName,sessionid:this.sessionid};return[JSON.stringify(s)]},e}();t.Logger=i},function(e,t,n){"use strict";var l,i=this&&this.__extends||(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.openWebSocketLogServer=function(e){if(this.url!=e){if(this.url=e,this.stopWebSocketServer(),!e)return;this.websocket=new WebSocket(e),this.websocket.onopen=function(e){},this.websocket.onclose=function(e){},this.websocket.onmessage=function(e){},this.websocket.onerror=function(e){console.error("open log websocket error:"+e)}}},t.prototype.SendHttpsLog=function(){var e=this;if(0!=this.logCacheSend.length){var t=this.logCacheSend.join("\n"),n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status){if(0==n.responseText.length)return;try{var t=JSON.parse(n.responseText).interval;"number"==typeof t&&e.logUploadInterval!==t&&(e.timeInterval=t,e.openHttpsLogServer(e.url))}catch(e){console.log("send result failed "+e)}}else console.log("send failed "+n.status)},n.open("POST",this.url,!0),n.send(t),this.logCacheSend=[]}},t.prototype.logReportParamList=function(e,t){var n=new Date,l=n.getFullYear()+"/";return l+=(r.D[n.getMonth()+1]||n.getMonth()+1)+"/",l+=(r.D[n.getDate()]||n.getDate())+" ",l+=(r.D[n.getHours()]||n.getHours())+":",l+=(r.D[n.getMinutes()]||n.getMinutes())+":",l+=r.D[n.getSeconds()]||n.getSeconds(),l+="."+n.getTime()%1e3,t.time=l,t.level=e,t.console="rtc",t.appid=this.appid,t.roomid=this.roomid,t.userid=this.userid,t.id_name=this.userid,t.userName=this.userName,t.sessionid=this.sessionid,t.version=this.version,[JSON.stringify(t)]},t}(r.Logger);t.LoggerWeb=o},function(e,t,n){"use strict";var l,i=this&&this.__extends||(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),s=n(22),a=n(20),u=n(1),c=function(e){function t(){var t=this,n=new s.LoggerWeb,l=new a.ZegoStreamCenterWeb(n);return t=e.call(this,n,l)||this,window.addEventListener("message",function(e){var n=e.data;"SS_DIALOG_SUCCESS"===n.type&&t.screenStreamFrom(n.streamId,n.canRequestAudioTrack,u.ClientUtil.actionSuccessCallback("screenShare",t.stateCenter.callbackList))}),t}return i(t,e),t.prototype.getSocket=function(e){return new WebSocket(e)},t.prototype.enableCamera=function(e,t){return this.logger.debug("zc.p.ec.0 call"),"boolean"!=typeof t?(this.logger.error("zc.p.ec.0 argument is not bool"),!1):this.streamCenter.enableCamera(e,t)},t.prototype.enableMicrophone=function(e,t){return this.logger.debug("zc.p.em.0 call"),"boolean"!=typeof t?(this.logger.error("zc.p.em.0 argument is not bool"),!1):this.streamCenter.enableMicrophone(e,t)},t.prototype.setLocalAudioOutput=function(e,t){return this.logger.debug("zc.p.psao.1 call"),this.streamCenter.setPublishStreamAudioOutput(e,t)},t.prototype.setPlayAudioOutput=function(e,t){return this.logger.debug("zc.p.psao.1 call"),this.streamCenter.setPlayStreamAudioOutput(e,t)},t.prototype.setCustomSignalUrl=function(e){return this.logger.debug("zc.p.scs.0 call: "+e),e&&0!=e.length?0!=e.indexOf("wss://")?(this.logger.error("zc.p.scs.0 url is not correct"),!1):void(this.stateCenter.customUrl=e):(this.logger.error("zc.p.scs.0 param error"),!1)},t.prototype.setQualityMonitorCycle=function(e){"number"==typeof e&&e>=1e3&&this.streamCenter.setQualityMonitorCycle(e)},t.prototype.startPlayingStream=function(e,t,n,l){var i=this;if(this.logger.debug("zc.p.sps.0 call"),!e||""===e)return this.logger.error("zc.p.sps.0 param error"),!1;if(!t)return this.logger.error("zc.p.sps.0 don't have remoteVideo"),!1;if(this.stateCenter.customUrl)return this.streamCenter.setPlayStateStart(e,t,n,l)?this.streamCenter.startPlayingStream(e,[this.stateCenter.customUrl]):(this.logger.error("zc.p.sps.0 cannot start play"),!1);if(!this.stateCenter.isLogin())return this.logger.error("zc.p.sps.0 not login"),!1;for(var s=!1,a=0;a<this.stateCenter.streamList.length;a++)if(this.stateCenter.streamList[a].stream_id===e){s=!0;break}if(0==s&&this.logger.info("zc.p.sps.0 cannot find stream"),!this.streamCenter.setPlayStateStart(e,t,n,l))return this.logger.info("zc.p.sps.0 cannot start play"),!1;var u={stream_id:e,ptype:"pull",signals:this.streamCenter.getAllInUseUrl()};return this.socketCenter.registerRouter("webrtc_url",function(e){i.handleFetchWebRtcUrlRsp(e)}),this.socketCenter.sendMessage("webrtc_url",u,void 0,function(t,n){i.onPlayStateUpdate(r.ENUM_PLAY_STATE_UPDATE.error,e,t==r.sdkErrorList.SEND_MSG_TIMEOUT?o.playErrorList.DISPATCH_TIMEOUT:o.playErrorList.DISPATCH_ERROR),i.streamCenter.stopPlayingStream(e)}),!0},t.prototype.stopPlayingStream=function(e){if(this.logger.debug("zc.p.sps.1.0 call"),!e||""===e)return this.logger.info("zc.p.sps.1.0 param error"),!1;for(var t in this.streamCenter.stopPlayingStream(e),this.stateCenter.streamUrlMap)if(this.stateCenter.streamUrlMap[t]===e){delete this.stateCenter.streamUrlMap[t];break}return this.logger.debug("zc.p.sps.1.0 call success"),!0},t.prototype.startPreview=function(e,t,n,l){return this.logger.debug("zc.p.sp.0 call"),e?this.streamCenter.startPreview(e,t,n,l):(this.logger.error("zc.p.sp.0 no localVideo"),!1)},t.prototype.stopPreview=function(e){return this.logger.debug("zc.p.sp.1 call"),e?this.streamCenter.stopPreview(e):(this.logger.info("zc.p.sp.1 param error"),!1)},t.prototype.startPublishingStream=function(e,t,n,l){var i=this;if(this.logger.debug("zc.p.sps.1 call"),!e)return this.logger.error("zc.p.sps.1 param error"),!1;if(this.stateCenter.customUrl&&0!=this.stateCenter.customUrl.length)return this.stateCenter.publishStreamList[e]={state:r.ENUM_PUBLISH_STREAM_STATE.tryPublish,extra_info:n},this.streamCenter.setPublishStateStart(e,t,l)?this.streamCenter.startPublishingStream(e,[this.stateCenter.customUrl]):(this.logger.info("zc.p.sps.1 cannot start publish"),!1);if(!this.stateCenter.isLogin())return this.logger.error("zc.p.sps.1 not login"),!1;if(this.stateCenter.publishStreamList[e]={state:r.ENUM_PUBLISH_STREAM_STATE.tryPublish,extra_info:n},!this.streamCenter.setPublishStateStart(e,t,l))return this.logger.error("zc.p.sps.1 cannot start publish"),!1;this.logger.info("zc.p.sps.1 start publish");var s={stream_id:e,ptype:"push",signals:this.streamCenter.getAllInUseUrl()};return this.socketCenter.registerRouter("webrtc_url",function(e){i.handleFetchWebRtcUrlRsp(e)}),this.socketCenter.sendMessage("webrtc_url",s,void 0,function(t,n){i.onPublishStateUpdate(r.ENUM_PUBLISH_STATE_UPDATE.error,e,t==r.sdkErrorList.SEND_MSG_TIMEOUT?o.publishErrorList.DISPATCH_TIMEOUT:o.publishErrorList.DISPATCH_ERROR),i.streamCenter.stopPublishingStream(e)}),!0},t.prototype.stopPublishingStream=function(e){return this.logger.debug("zc.p.sps.1.1 call"),e?(this.streamCenter.stopPublishingStream(e),this.stateCenter.publishStreamList[e]&&(this.stateCenter.publishStreamList[e].state>=r.ENUM_PUBLISH_STREAM_STATE.update_info&&this.streamHandler.updateStreamInfo(e,r.ENUM_STREAM_SUB_CMD.liveEnd),delete this.stateCenter.publishStreamList[e]),!0):(this.logger.info("zc.p.sps.1.1 param error"),!1)},t.prototype.startScreenShotChrome=function(e){if(!t.screenShotReady)return this.logger.error('zc.b.ss Please install the extension:1. Go to chrome://extensions  2. Check: "Enable Developer mode   3. Click: "Load the unpacked extension... 4. Choose "extension" folder from the repository 5. Reload this page\n                                      '),!1;window.postMessage({type:"SS_UI_REQUEST",text:"start"},"*"),u.ClientUtil.registerCallback("screenShare",{success:e},this.stateCenter.callbackList)},t.prototype.startScreenShotFirFox=function(e,t,n){var l=this,i={video:{},audio:t};i.video.mediaSource=e,navigator.mediaDevices.getUserMedia(i).then(function(e){l.stateCenter.screenShotStream=e,n(!0,e)}).catch(function(e){l.logger.error("zc.b.ssf "+e),n(!1,null)})},t.prototype.stopScreenShot=function(){this.stateCenter.screenShotStream.getTracks().forEach(function(e){e.stop()}),window.postMessage({type:"SS_UI_CANCEL",text:"start"},"*")},t.prototype.WebrtcOnPublishStateUpdateHandle=function(e,t,n){this.stateCenter.publishStreamList[t].state==r.ENUM_PUBLISH_STREAM_STATE.publishing&&this.onPublishStateUpdate(e,t,n)},t.prototype.setCDNInfo=function(e,t){e.urls_flv=t.urls_flv,e.urls_hls=t.urls_m3u8,e.urls_https_flv=t.urls_https_flv,e.urls_https_hls=t.urls_https_m3u8,e.urls_rtmp=t.urls_rtmp},t.prototype.screenStreamFrom=function(e,t,n){var l=this,i={};i.audio={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e}},i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxWidth:window.screen.width,maxHeight:window.screen.height}},!t&&(i.audio=!1),navigator.mediaDevices.getUserMedia(i).then(function(e){l.stateCenter.screenShotStream=e,n(!0,e)}).catch(function(e){l.logger.error("zc.b.ssf "+e),n(!1,null)})},t.isSupportWebrtc=function(){return u.ClientUtil.isSupportWebrtc()},t.isSupportH264=function(e,t){u.ClientUtil.isSupportH264(e,t)},t.prototype.enumDevices=function(e,n){t.enumDevices(e,n)},t.enumDevices=function(e,t){void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(t){for(var n=[],l=[],i=[],r=0;r<t.length;r++){var o=t[r];"audioinput"===o.kind&&n.push({label:o.label,deviceId:o.deviceId}),"audiooutput"===o.kind&&l.push({label:o.label,deviceId:o.deviceId}),"videoinput"===o.kind&&i.push({label:o.label,deviceId:o.deviceId})}e&&e({microphones:n,speakers:l,cameras:i})}).catch(function(e){t&&t(e)}):t&&t("browser don't support enumerate devices")},t.screenShotReady=!1,t}(n(11).BaseCenter);t.ZegoClient=c,window.addEventListener("message",function(e){var t=e.data,n=t.type,l=e.origin;l!==window.location.origin&&console.warn("ScreenStream: you should discard foreign event from origin:",l),"SS_PING"===n&&(c.screenShotReady=!0)})}])})}},[201]);